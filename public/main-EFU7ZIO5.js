import{a as Go}from"./chunk-HSVEXVVZ.js";import{$ as ze,A as Tr,B as Et,C as vn,D as Tt,E as Mo,F as ih,G as $e,H as G,I as Fo,J as Ar,K as Ge,L as Lo,M as sh,N as Uo,O as oh,P as L,Q as $,R as Pe,S as br,T as ee,U as Cr,V as te,W as ah,X as $t,Y as Gt,Z as zt,_ as Sr,a as ko,aa as Bo,b as Yl,ba as ch,c as Xl,ca as uh,d as Zl,da as lh,e as No,ea as hh,f as Vo,fa as jo,g as Oo,ga as Rr,h as eh,ha as At,i as th,ia as qo,j as nh,ja as dh,k as rh,ka as fh,l as Di,la as ph,m as vr,ma as bt,n as wr,na as $o,o as Ir,oa as mh,p as ye,q as ki,r as xo,s as Ve,t as Fe,u as Er,v as Oe,w as yn,x as Ni,y as Le,z as Ue}from"./chunk-VDPLZGIH.js";import{a as Ae,b as Re,d as Do,e as It,f as _}from"./chunk-YYD2Q6U2.js";var _h=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},Em=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],c=n[t++],l=n[t++],h=((i&7)<<18|(o&63)<<12|(c&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(h>>10)),e[r++]=String.fromCharCode(56320+(h&1023))}else{let o=n[t++],c=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|c&63)}}return e.join("")},yh={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],c=i+1<n.length,l=c?n[i+1]:0,h=i+2<n.length,f=h?n[i+2]:0,v=o>>2,b=(o&3)<<4|l>>4,C=(l&15)<<2|f>>6,D=f&63;h||(D=64,c||(C=64)),r.push(t[v],t[b],t[C],t[D])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(_h(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Em(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],l=i<n.length?t[n.charAt(i)]:0;++i;let f=i<n.length?t[n.charAt(i)]:64;++i;let b=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||l==null||f==null||b==null)throw new Wo;let C=o<<2|l>>4;if(r.push(C),f!==64){let D=l<<4&240|f>>2;if(r.push(D),b!==64){let k=f<<6&192|b;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Wo=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Tm=function(n){let e=_h(n);return yh.encodeByteArray(e,!0)},Pr=function(n){return Tm(n).replace(/\./g,"")},Ko=function(n){try{return yh.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Am(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var bm=()=>Am().__FIREBASE_DEFAULTS__,Cm=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Sm=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ko(n[1]);return e&&JSON.parse(e)},Oi=()=>{try{return bm()||Cm()||Sm()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Qo=n=>{var e,t;return(t=(e=Oi())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},vh=n=>{let e=Qo(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Jo=()=>{var n;return(n=Oi())===null||n===void 0?void 0:n.config},Yo=n=>{var e;return(e=Oi())===null||e===void 0?void 0:e[`_${n}`]};var Vi=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function wh(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let c=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Pr(JSON.stringify(t)),Pr(JSON.stringify(c)),""].join(".")}function le(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Ih(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(le())}function Rm(){var n;let e=(n=Oi())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Eh(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Th(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Ah(){let n=le();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function bh(){return!Rm()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xo(){try{return typeof indexedDB=="object"}catch{return!1}}function Ch(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var Pm="FirebaseError",De=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Pm,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rt.prototype.create)}},rt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],c=o?Dm(o,r):"Error",l=`${this.serviceName}: ${c} (${i}).`;return new De(i,l,r)}};function Dm(n,e){return n.replace(km,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var km=/\{\$([^}]+)}/g;function Sh(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Wt(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],c=e[i];if(gh(o)&&gh(c)){if(!Wt(o,c))return!1}else if(o!==c)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function gh(n){return n!==null&&typeof n=="object"}function Dr(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wn(n){let e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){let[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function In(n){let e=n.indexOf("?");if(!e)return"";let t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function Rh(n,e){let t=new Ho(n,e);return t.subscribe.bind(t)}var Ho=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");Nm(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=zo),i.error===void 0&&(i.error=zo),i.complete===void 0&&(i.complete=zo);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Nm(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function zo(){}var xI=4*60*60*1e3;function be(n){return n&&n._delegate?n._delegate:n}var xe=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ht="[DEFAULT]";var Zo=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new Vi;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Om(e))try{this.getOrInitializeService({instanceIdentifier:Ht})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ht){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return _(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ht){return this.instances.has(e)}getOptions(e=Ht){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,c]of this.instancesDeferred.entries()){let l=this.normalizeInstanceIdentifier(o);r===l&&c.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let c=this.instances.get(i);return c&&e(c,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Vm(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ht){return this.component?this.component.multipleInstances?e:Ht:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Vm(n){return n===Ht?void 0:n}function Om(n){return n.instantiationMode==="EAGER"}var xi=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Zo(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var xm=[],U=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(U||{}),Mm={debug:U.DEBUG,verbose:U.VERBOSE,info:U.INFO,warn:U.WARN,error:U.ERROR,silent:U.SILENT},Fm=U.INFO,Lm={[U.DEBUG]:"log",[U.VERBOSE]:"log",[U.INFO]:"info",[U.WARN]:"warn",[U.ERROR]:"error"},Um=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=Lm[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Ct=class{constructor(e){this.name=e,this._logLevel=Fm,this._logHandler=Um,this._userLogHandler=null,xm.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in U))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mm[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,U.DEBUG,...e),this._logHandler(this,U.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,U.VERBOSE,...e),this._logHandler(this,U.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,U.INFO,...e),this._logHandler(this,U.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,U.WARN,...e),this._logHandler(this,U.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,U.ERROR,...e),this._logHandler(this,U.ERROR,...e)}};var Bm=(n,e)=>e.some(t=>n instanceof t),Ph,Dh;function jm(){return Ph||(Ph=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qm(){return Dh||(Dh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var kh=new WeakMap,ta=new WeakMap,Nh=new WeakMap,ea=new WeakMap,ra=new WeakMap;function $m(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",c)},o=()=>{t(We(n.result)),i()},c=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&kh.set(t,n)}).catch(()=>{}),ra.set(e,n),e}function Gm(n){if(ta.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",c),n.removeEventListener("abort",c)},o=()=>{t(),i()},c=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",c),n.addEventListener("abort",c)});ta.set(n,e)}var na={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ta.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Nh.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return We(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Vh(n){na=n(na)}function zm(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(Mi(this),e,...t);return Nh.set(r,e.sort?e.sort():[e]),We(r)}:qm().includes(n)?function(...e){return n.apply(Mi(this),e),We(kh.get(this))}:function(...e){return We(n.apply(Mi(this),e))}}function Wm(n){return typeof n=="function"?zm(n):(n instanceof IDBTransaction&&Gm(n),Bm(n,jm())?new Proxy(n,na):n)}function We(n){if(n instanceof IDBRequest)return $m(n);if(ea.has(n))return ea.get(n);let e=Wm(n);return e!==n&&(ea.set(n,e),ra.set(e,n)),e}var Mi=n=>ra.get(n);function xh(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let c=indexedDB.open(n,e),l=We(c);return r&&c.addEventListener("upgradeneeded",h=>{r(We(c.result),h.oldVersion,h.newVersion,We(c.transaction),h)}),t&&c.addEventListener("blocked",h=>t(h.oldVersion,h.newVersion,h)),l.then(h=>{o&&h.addEventListener("close",()=>o()),i&&h.addEventListener("versionchange",f=>i(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}var Hm=["get","getKey","getAll","getAllKeys","count"],Km=["put","add","delete","clear"],ia=new Map;function Oh(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ia.get(e))return ia.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=Km.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Hm.includes(t)))return;let o=function(c,...l){return _(this,null,function*(){let h=this.transaction(c,i?"readwrite":"readonly"),f=h.store;return r&&(f=f.index(l.shift())),(yield Promise.all([f[t](...l),i&&h.done]))[0]})};return ia.set(e,o),o}Vh(n=>Re(Ae({},n),{get:(e,t,r)=>Oh(e,t)||n.get(e,t,r),has:(e,t)=>!!Oh(e,t)||n.has(e,t)}));var oa=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Qm(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function Qm(n){let e=n.getComponent();return e?.type==="VERSION"}var aa="@firebase/app",Mh="0.10.10";var it=new Ct("@firebase/app"),Jm="@firebase/app-compat",Ym="@firebase/analytics-compat",Xm="@firebase/analytics",Zm="@firebase/app-check-compat",eg="@firebase/app-check",tg="@firebase/auth",ng="@firebase/auth-compat",rg="@firebase/database",ig="@firebase/database-compat",sg="@firebase/functions",og="@firebase/functions-compat",ag="@firebase/installations",cg="@firebase/installations-compat",ug="@firebase/messaging",lg="@firebase/messaging-compat",hg="@firebase/performance",dg="@firebase/performance-compat",fg="@firebase/remote-config",pg="@firebase/remote-config-compat",mg="@firebase/storage",gg="@firebase/storage-compat",_g="@firebase/firestore",yg="@firebase/vertexai-preview",vg="@firebase/firestore-compat",wg="firebase",Ig="10.13.1";var ca="[DEFAULT]",Eg={[aa]:"fire-core",[Jm]:"fire-core-compat",[Xm]:"fire-analytics",[Ym]:"fire-analytics-compat",[eg]:"fire-app-check",[Zm]:"fire-app-check-compat",[tg]:"fire-auth",[ng]:"fire-auth-compat",[rg]:"fire-rtdb",[ig]:"fire-rtdb-compat",[sg]:"fire-fn",[og]:"fire-fn-compat",[ag]:"fire-iid",[cg]:"fire-iid-compat",[ug]:"fire-fcm",[lg]:"fire-fcm-compat",[hg]:"fire-perf",[dg]:"fire-perf-compat",[fg]:"fire-rc",[pg]:"fire-rc-compat",[mg]:"fire-gcs",[gg]:"fire-gcs-compat",[_g]:"fire-fst",[vg]:"fire-fst-compat",[yg]:"fire-vertex","fire-js":"fire-js",[wg]:"fire-js-all"};var kr=new Map,Tg=new Map,ua=new Map;function Fh(n,e){try{n.container.addComponent(e)}catch(t){it.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Rt(n){let e=n.name;if(ua.has(e))return it.debug(`There were multiple attempts to register component ${e}.`),!1;ua.set(e,n);for(let t of kr.values())Fh(t,n);for(let t of Tg.values())Fh(t,n);return!0}function Vr(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Be(n){return n.settings!==void 0}var Ag={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},St=new rt("app","Firebase",Ag);var la=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xe("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw St.create("app-deleted",{appName:this._name})}};var Pt=Ig;function fa(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:ca,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw St.create("bad-app-name",{appName:String(i)});if(t||(t=Jo()),!t)throw St.create("no-options");let o=kr.get(i);if(o){if(Wt(t,o.options)&&Wt(r,o.config))return o;throw St.create("duplicate-app",{appName:i})}let c=new xi(i);for(let h of ua.values())c.addComponent(h);let l=new la(t,r,c);return kr.set(i,l),l}function En(n=ca){let e=kr.get(n);if(!e&&n===ca&&Jo())return fa();if(!e)throw St.create("no-app",{appName:n});return e}function Fi(){return Array.from(kr.values())}function ae(n,e,t){var r;let i=(r=Eg[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),c=e.match(/\s|\//);if(o||c){let l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&c&&l.push("and"),c&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),it.warn(l.join(" "));return}Rt(new xe(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var bg="firebase-heartbeat-database",Cg=1,Nr="firebase-heartbeat-store",sa=null;function jh(){return sa||(sa=xh(bg,Cg,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Nr)}catch(t){console.warn(t)}}}}).catch(n=>{throw St.create("idb-open",{originalErrorMessage:n.message})})),sa}function Sg(n){return _(this,null,function*(){try{let t=(yield jh()).transaction(Nr),r=yield t.objectStore(Nr).get(qh(n));return yield t.done,r}catch(e){if(e instanceof De)it.warn(e.message);else{let t=St.create("idb-get",{originalErrorMessage:e?.message});it.warn(t.message)}}})}function Lh(n,e){return _(this,null,function*(){try{let r=(yield jh()).transaction(Nr,"readwrite");yield r.objectStore(Nr).put(e,qh(n)),yield r.done}catch(t){if(t instanceof De)it.warn(t.message);else{let r=St.create("idb-set",{originalErrorMessage:t?.message});it.warn(r.message)}}})}function qh(n){return`${n.name}!${n.options.appId}`}var Rg=1024,Pg=30*24*60*60*1e3,ha=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new da(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return _(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=Uh();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(c=>c.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(c=>{let l=new Date(c.date).valueOf();return Date.now()-l<=Pg}),this._storage.overwrite(this._heartbeatsCache))}catch(r){it.warn(r)}})}getHeartbeatsHeader(){return _(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Uh(),{heartbeatsToSend:r,unsentEntries:i}=Dg(this._heartbeatsCache.heartbeats),o=Pr(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return it.warn(t),""}})}};function Uh(){return new Date().toISOString().substring(0,10)}function Dg(n,e=Rg){let t=[],r=n.slice();for(let i of n){let o=t.find(c=>c.agent===i.agent);if(o){if(o.dates.push(i.date),Bh(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Bh(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var da=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return _(this,null,function*(){return Xo()?Ch().then(()=>!0).catch(()=>!1):!1})}read(){return _(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield Sg(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Lh(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return _(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Lh(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Bh(n){return Pr(JSON.stringify({version:2,heartbeats:n})).length}function kg(n){Rt(new xe("platform-logger",e=>new oa(e),"PRIVATE")),Rt(new xe("heartbeat",e=>new ha(e),"PRIVATE")),ae(aa,Mh,n),ae(aa,Mh,"esm2017"),ae("fire-js","")}kg("");var Ng="firebase",Vg="10.13.1";ae(Ng,Vg,"app");var Jt=new Bo("ANGULARFIRE2_VERSION");function Ui(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(c=>c.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Or=(n,e)=>{let t=e?[e]:Fi(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(c=>{r.includes(c)||r.push(c)})}),r},An=class{constructor(){return Or(Og)}},Og="app-check";function Tn(){}var Li=class{zone;delegate;constructor(e,t=Zl){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(c){i.runGuarded(()=>{e.apply(this,[c])})};return this.delegate.schedule(o,t,r)}},pa=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tn,{},Tn,Tn)),t.pipe(rh({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},bn=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new Li(Zone.current)),this.insideAngular=t.run(()=>new Li(Zone.current,Xl)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ki(Tt))};static \u0275prov=wr({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Bi(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function xg(n){return Bi().ngZone.runOutsideAngular(()=>n())}function Kt(n){return Bi().ngZone.run(()=>n())}function Mg(n){return Fg(Bi())(n)}function Fg(n){return function(t){return t=t.lift(new pa(n.ngZone)),t.pipe(Oo(n.outsideAngular),Vo(n.insideAngular))}}var Lg=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Kt(()=>n.apply(void 0,r))},je=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Kt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Tn,{},Tn,Tn))),r[o]=Lg(r[o],t));let i=xg(()=>n.apply(this,r));if(!e)if(i instanceof ko){let o=Bi();return i.pipe(Oo(o.outsideAngular),Vo(o.insideAngular))}else return Kt(()=>i);return i instanceof ko?i.pipe(Mg):i instanceof Promise?Kt(()=>new Promise((o,c)=>i.then(l=>Kt(()=>o(l)),l=>Kt(()=>c(l))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Kt(()=>i)};var st=class{constructor(e){return e}},Yt=class{constructor(){return Fi()}};function Ug(n){return n&&n.length===1?n[0]:new st(En())}var ma=new ye("angularfire2._apps"),Bg={provide:st,useFactory:Ug,deps:[[new Ve,ma]]},jg={provide:Yt,deps:[[new Ve,ma]]};function qg(n){return(e,t)=>{let r=t.get(ih);ae("angularfire",Jt.full,"core"),ae("angularfire",Jt.full,"app"),ae("angular",ch.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new st(i)}}function $h(n,...e){return yn([Bg,jg,{provide:ma,useFactory:qg(n),multi:!0,deps:[Tt,Et,bn,...e]}])}var Gh=je(fa,!0);function ad(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var cd=ad,ud=new rt("auth","Firebase",ad());var Wi=new Ct("@firebase/auth");function $g(n,...e){Wi.logLevel<=U.WARN&&Wi.warn(`Auth (${Pt}): ${n}`,...e)}function qi(n,...e){Wi.logLevel<=U.ERROR&&Wi.error(`Auth (${Pt}): ${n}`,...e)}function Ke(n,...e){throw La(n,...e)}function Xt(n,...e){return La(n,...e)}function ld(n,e,t){let r=Object.assign(Object.assign({},cd()),{[e]:t});return new rt("auth","Firebase",r).create(e,{appName:n.name})}function ct(n){return ld(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function La(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return ud.create(n,...e)}function x(n,e,...t){if(!n)throw La(e,...t)}function ot(n){let e="INTERNAL ASSERTION FAILED: "+n;throw qi(e),new Error(e)}function kt(n,e){n||ot(e)}function va(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function Gg(){return zh()==="http:"||zh()==="https:"}function zh(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function zg(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Gg()||Eh()||"connection"in navigator)?navigator.onLine:!0}function Wg(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Zt=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,kt(t>e,"Short delay should be less than long delay!"),this.isMobile=Ih()||Th()}get(){return zg()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Ua(n,e){kt(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Hi=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ot("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ot("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ot("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Hg={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var Kg=new Zt(3e4,6e4);function Nt(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ut(o,c,l,h){return _(this,arguments,function*(n,e,t,r,i={}){return hd(n,i,()=>_(this,null,function*(){let f={},v={};r&&(e==="GET"?v=r:f={body:JSON.stringify(r)});let b=Dr(Object.assign({key:n.config.apiKey},v)).slice(1),C=yield n._getAdditionalHeaders();return C["Content-Type"]="application/json",n.languageCode&&(C["X-Firebase-Locale"]=n.languageCode),Hi.fetch()(dd(n,n.config.apiHost,t,b),Object.assign({method:e,headers:C,referrerPolicy:"no-referrer"},f))}))})}function hd(n,e,t){return _(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Hg),e);try{let i=new wa(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let c=yield o.json();if("needConfirmation"in c)throw ji(n,"account-exists-with-different-credential",c);if(o.ok&&!("errorMessage"in c))return c;{let l=o.ok?c.errorMessage:c.error.message,[h,f]=l.split(" : ");if(h==="FEDERATED_USER_ID_ALREADY_LINKED")throw ji(n,"credential-already-in-use",c);if(h==="EMAIL_EXISTS")throw ji(n,"email-already-in-use",c);if(h==="USER_DISABLED")throw ji(n,"user-disabled",c);let v=r[h]||h.toLowerCase().replace(/[_\s]+/g,"-");if(f)throw ld(n,v,f);Ke(n,v)}}catch(i){if(i instanceof De)throw i;Ke(n,"network-request-failed",{message:String(i)})}})}function jr(o,c,l,h){return _(this,arguments,function*(n,e,t,r,i={}){let f=yield ut(n,e,t,r,i);return"mfaPendingCredential"in f&&Ke(n,"multi-factor-auth-required",{_serverResponse:f}),f})}function dd(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Ua(n.config,i):`${n.config.apiScheme}://${i}`}function Qg(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}var wa=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Xt(this.auth,"network-request-failed")),Kg.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ji(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Xt(n,e,r);return i.customData._tokenResponse=t,i}function Wh(n){return n!==void 0&&n.enterprise!==void 0}var Ia=class{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(let t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Qg(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}};function Jg(n,e){return _(this,null,function*(){return ut(n,"GET","/v2/recaptchaConfig",Nt(n,e))})}function Yg(n,e){return _(this,null,function*(){return ut(n,"POST","/v1/accounts:delete",e)})}function fd(n,e){return _(this,null,function*(){return ut(n,"POST","/v1/accounts:lookup",e)})}function xr(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ba(n,e=!1){return _(this,null,function*(){let t=be(n),r=yield t.getIdToken(e),i=ja(r);x(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,c=o?.sign_in_provider;return{claims:i,token:r,authTime:xr(ga(i.auth_time)),issuedAtTime:xr(ga(i.iat)),expirationTime:xr(ga(i.exp)),signInProvider:c||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function ga(n){return Number(n)*1e3}function ja(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return qi("JWT malformed, contained fewer than 3 sections"),null;try{let i=Ko(t);return i?JSON.parse(i):(qi("Failed to decode base64 JWT payload"),null)}catch(i){return qi("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Hh(n){let e=ja(n);return x(e,"internal-error"),x(typeof e.exp<"u","internal-error"),x(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Cn(n,e,t=!1){return _(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof De&&Xg(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Xg({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Ea=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>_(this,null,function*(){yield this.iteration()}),t)}iteration(){return _(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Fr=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=xr(this.lastLoginAt),this.creationTime=xr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ki(n){return _(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield Cn(n,fd(t,{idToken:r}));x(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let c=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?pd(o.providerUserInfo):[],l=Zg(n.providerData,c),h=n.isAnonymous,f=!(n.email&&o.passwordHash)&&!l?.length,v=h?f:!1,b={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Fr(o.createdAt,o.lastLoginAt),isAnonymous:v};Object.assign(n,b)})}function qa(n){return _(this,null,function*(){let e=be(n);yield Ki(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Zg(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function pd(n){return n.map(e=>{var{providerId:t}=e,r=No(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function e_(n,e){return _(this,null,function*(){let t=yield hd(n,{},()=>_(this,null,function*(){let r=Dr({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,c=dd(n,i,"/v1/token",`key=${o}`),l=yield n._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Hi.fetch()(c,{method:"POST",headers:l,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function t_(n,e){return _(this,null,function*(){return ut(n,"POST","/v2/accounts:revokeToken",Nt(n,e))})}var Mr=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){x(e.idToken,"internal-error"),x(typeof e.idToken<"u","internal-error"),x(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Hh(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){x(e.length!==0,"internal-error");let t=Hh(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return _(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(x(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return _(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield e_(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,c=new n;return r&&(x(typeof r=="string","internal-error",{appName:e}),c.refreshToken=r),i&&(x(typeof i=="string","internal-error",{appName:e}),c.accessToken=i),o&&(x(typeof o=="number","internal-error",{appName:e}),c.expirationTime=o),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ot("not implemented")}};function Dt(n,e){x(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Sn=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=No(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ea(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Fr(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return _(this,null,function*(){let t=yield Cn(this,this.stsTokenManager.getToken(this.auth,e));return x(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Ba(this,e)}reload(){return qa(this)}_assign(e){this!==e&&(x(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){x(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return _(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Ki(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return _(this,null,function*(){if(Be(this.auth.app))return Promise.reject(ct(this.auth));let e=yield this.getIdToken();return yield Cn(this,Yg(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,c,l,h,f,v;let b=(r=t.displayName)!==null&&r!==void 0?r:void 0,C=(i=t.email)!==null&&i!==void 0?i:void 0,D=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,k=(c=t.photoURL)!==null&&c!==void 0?c:void 0,M=(l=t.tenantId)!==null&&l!==void 0?l:void 0,V=(h=t._redirectEventId)!==null&&h!==void 0?h:void 0,Q=(f=t.createdAt)!==null&&f!==void 0?f:void 0,H=(v=t.lastLoginAt)!==null&&v!==void 0?v:void 0,{uid:J,emailVerified:oe,isAnonymous:qe,providerData:ue,stsTokenManager:I}=t;x(J&&I,e,"internal-error");let p=Mr.fromJSON(this.name,I);x(typeof J=="string",e,"internal-error"),Dt(b,e.name),Dt(C,e.name),x(typeof oe=="boolean",e,"internal-error"),x(typeof qe=="boolean",e,"internal-error"),Dt(D,e.name),Dt(k,e.name),Dt(M,e.name),Dt(V,e.name),Dt(Q,e.name),Dt(H,e.name);let g=new n({uid:J,auth:e,email:C,emailVerified:oe,displayName:b,isAnonymous:qe,photoURL:k,phoneNumber:D,tenantId:M,stsTokenManager:p,createdAt:Q,lastLoginAt:H});return ue&&Array.isArray(ue)&&(g.providerData=ue.map(y=>Object.assign({},y))),V&&(g._redirectEventId=V),g}static _fromIdTokenResponse(e,t,r=!1){return _(this,null,function*(){let i=new Mr;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ki(o),o})}static _fromGetAccountInfoResponse(e,t,r){return _(this,null,function*(){let i=t.users[0];x(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?pd(i.providerUserInfo):[],c=!(i.email&&i.passwordHash)&&!o?.length,l=new Mr;l.updateFromIdToken(r);let h=new n({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:c}),f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Fr(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(h,f),h})}};var Kh=new Map;function at(n){kt(n instanceof Function,"Expected a class definition");let e=Kh.get(n);return e?(kt(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Kh.set(n,e),e)}var n_=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return _(this,null,function*(){return!0})}_set(t,r){return _(this,null,function*(){this.storage[t]=r})}_get(t){return _(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return _(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),Ta=n_;function $i(n,e,t){return`firebase:${n}:${e}:${t}`}var Qi=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=$i(this.userKey,i.apiKey,o),this.fullPersistenceKey=$i("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return _(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Sn._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return _(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return _(this,null,function*(){if(!t.length)return new n(at(Ta),e,r);let i=(yield Promise.all(t.map(f=>_(this,null,function*(){if(yield f._isAvailable())return f})))).filter(f=>f),o=i[0]||at(Ta),c=$i(r,e.config.apiKey,e.name),l=null;for(let f of t)try{let v=yield f._get(c);if(v){let b=Sn._fromJSON(e,v);f!==o&&(l=b),o=f;break}}catch{}let h=i.filter(f=>f._shouldAllowMigration);return!o._shouldAllowMigration||!h.length?new n(o,e,r):(o=h[0],l&&(yield o._set(c,l.toJSON())),yield Promise.all(t.map(f=>_(this,null,function*(){if(f!==o)try{yield f._remove(c)}catch{}}))),new n(o,e,r))})}};function Qh(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(yd(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(md(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(wd(e))return"Blackberry";if(Id(e))return"Webos";if(gd(e))return"Safari";if((e.includes("chrome/")||_d(e))&&!e.includes("edge/"))return"Chrome";if(vd(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function md(n=le()){return/firefox\//i.test(n)}function gd(n=le()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _d(n=le()){return/crios\//i.test(n)}function yd(n=le()){return/iemobile/i.test(n)}function vd(n=le()){return/android/i.test(n)}function wd(n=le()){return/blackberry/i.test(n)}function Id(n=le()){return/webos/i.test(n)}function $a(n=le()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function r_(n=le()){var e;return $a(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function i_(){return Ah()&&document.documentMode===10}function Ed(n=le()){return $a(n)||vd(n)||Id(n)||wd(n)||/windows phone/i.test(n)||yd(n)}function Td(n,e=[]){let t;switch(n){case"Browser":t=Qh(le());break;case"Worker":t=`${Qh(le())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Pt}/${r}`}var Aa=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((c,l)=>{try{let h=e(o);c(h)}catch(h){l(h)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return _(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function s_(t){return _(this,arguments,function*(n,e={}){return ut(n,"GET","/v2/passwordPolicy",Nt(n,e))})}var o_=6,ba=class{constructor(e){var t,r,i,o;let c=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=c.minPasswordLength)!==null&&t!==void 0?t:o_,c.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=c.maxPasswordLength),c.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=c.containsLowercaseCharacter),c.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=c.containsUppercaseCharacter),c.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=c.containsNumericCharacter),c.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=c.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,c,l;let h={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,h),this.validatePasswordCharacterOptions(e,h),h.isValid&&(h.isValid=(t=h.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),h.isValid&&(h.isValid=(r=h.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),h.isValid&&(h.isValid=(i=h.containsLowercaseLetter)!==null&&i!==void 0?i:!0),h.isValid&&(h.isValid=(o=h.containsUppercaseLetter)!==null&&o!==void 0?o:!0),h.isValid&&(h.isValid=(c=h.containsNumericCharacter)!==null&&c!==void 0?c:!0),h.isValid&&(h.isValid=(l=h.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),h}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ca=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ji(this),this.idTokenSubscription=new Ji(this),this.beforeStateQueue=new Aa(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ud,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=at(t)),this._initializationPromise=this.queue(()=>_(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield Qi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return _(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return _(this,null,function*(){try{let t=yield fd(this,{idToken:e}),r=yield Sn._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return _(this,null,function*(){var t;if(Be(this.app)){let c=this.app.settings.authIdToken;return c?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(c).then(l,l))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let c=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,l=i?._redirectEventId,h=yield this.tryRedirectSignIn(e);(!c||c===l)&&h?.user&&(i=h.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(c){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(c))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return x(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return _(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return _(this,null,function*(){try{yield Ki(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=Wg()}_delete(){return _(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return _(this,null,function*(){if(Be(this.app))return Promise.reject(ct(this));let t=e?be(e):null;return t&&x(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return _(this,null,function*(){if(!this._deleted)return e&&x(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>_(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return _(this,null,function*(){return Be(this.app)?Promise.reject(ct(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Be(this.app)?Promise.reject(ct(this)):this.queue(()=>_(this,null,function*(){yield this.assertedPersistence.setPersistence(at(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return _(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return _(this,null,function*(){let e=yield s_(this),t=new ba(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new rt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return _(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield t_(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return _(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return _(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&at(e)||this._popupRedirectResolver;x(t,this,"argument-error"),this.redirectPersistenceManager=yield Qi.create(this,[at(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return _(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>_(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return _(this,null,function*(){if(e===this.currentUser)return this.queue(()=>_(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),c=!1,l=this._isInitialized?Promise.resolve():this._initializationPromise;if(x(l,this,"internal-error"),l.then(()=>{c||o(this.currentUser)}),typeof t=="function"){let h=e.addObserver(t,r,i);return()=>{c=!0,h()}}else{let h=e.addObserver(t);return()=>{c=!0,h()}}}directlySetCurrentUser(e){return _(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return x(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Td(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return _(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return _(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&$g(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function tn(n){return be(n)}var Ji=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=Rh(t=>this.observer=t)}get next(){return x(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var rs={loadJS(){return _(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a_(n){rs=n}function Ad(n){return rs.loadJS(n)}function c_(){return rs.recaptchaEnterpriseScript}function u_(){return rs.gapiScript}function bd(n){return`__${n}${Math.floor(Math.random()*1e6)}`}var l_="recaptcha-enterprise",h_="NO_RECAPTCHA",Sa=class{constructor(e){this.type=l_,this.auth=tn(e)}verify(e="verify",t=!1){return _(this,null,function*(){function r(o){return _(this,null,function*(){if(!t){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise((c,l)=>_(this,null,function*(){Jg(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(h=>{if(h.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{let f=new Ia(h);return o.tenantId==null?o._agentRecaptchaConfig=f:o._tenantRecaptchaConfigs[o.tenantId]=f,c(f.siteKey)}}).catch(h=>{l(h)})}))})}function i(o,c,l){let h=window.grecaptcha;Wh(h)?h.enterprise.ready(()=>{h.enterprise.execute(o,{action:e}).then(f=>{c(f)}).catch(()=>{c(h_)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,c)=>{r(this.auth).then(l=>{if(!t&&Wh(window.grecaptcha))i(l,o,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let h=c_();h.length!==0&&(h+=l),Ad(h).then(()=>{i(l,o,c)}).catch(f=>{c(f)})}}).catch(l=>{c(l)})})})}};function Jh(n,e,t,r=!1){return _(this,null,function*(){let i=new Sa(n),o;try{o=yield i.verify(t)}catch{o=yield i.verify(t,!0)}let c=Object.assign({},e);return r?Object.assign(c,{captchaResp:o}):Object.assign(c,{captchaResponse:o}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c})}function Ra(n,e,t,r){return _(this,null,function*(){var i;if(!((i=n._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){let o=yield Jh(n,e,t,t==="getOobCode");return r(n,o)}else return r(n,e).catch(o=>_(this,null,function*(){if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);let c=yield Jh(n,e,t,t==="getOobCode");return r(n,c)}else return Promise.reject(o)}))})}function Ga(n,e){let t=Vr(n,"auth");if(t.isInitialized()){let i=t.getImmediate(),o=t.getOptions();if(Wt(o,e??{}))return i;Ke(i,"already-initialized")}return t.initialize({options:e})}function d_(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(at);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}function za(n,e,t){let r=tn(n);x(r._canInitEmulator,r,"emulator-config-failed"),x(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");let i=!!t?.disableWarnings,o=Cd(e),{host:c,port:l}=f_(e),h=l===null?"":`:${l}`;r.config.emulator={url:`${o}//${c}${h}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:c,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||p_()}function Cd(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function f_(n){let e=Cd(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let r=t[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){let o=i[1];return{host:o,port:Yh(r.substr(o.length+1))}}else{let[o,c]=r.split(":");return{host:o,port:Yh(c)}}}function Yh(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function p_(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Lr=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ot("not implemented")}_getIdTokenResponse(e){return ot("not implemented")}_linkToIdToken(e,t){return ot("not implemented")}_getReauthenticationResolver(e){return ot("not implemented")}};function m_(n,e){return _(this,null,function*(){return ut(n,"POST","/v1/accounts:signUp",e)})}function g_(n,e){return _(this,null,function*(){return jr(n,"POST","/v1/accounts:signInWithPassword",Nt(n,e))})}function __(n,e){return _(this,null,function*(){return jr(n,"POST","/v1/accounts:signInWithEmailLink",Nt(n,e))})}function y_(n,e){return _(this,null,function*(){return jr(n,"POST","/v1/accounts:signInWithEmailLink",Nt(n,e))})}var Ur=class n extends Lr{constructor(e,t,r,i=null){super("password",r),this._email=e,this._password=t,this._tenantId=i}static _fromEmailAndPassword(e,t){return new n(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new n(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){return _(this,null,function*(){switch(this.signInMethod){case"password":let t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ra(e,t,"signInWithPassword",g_);case"emailLink":return __(e,{email:this._email,oobCode:this._password});default:Ke(e,"internal-error")}})}_linkToIdToken(e,t){return _(this,null,function*(){switch(this.signInMethod){case"password":let r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ra(e,r,"signUpPassword",m_);case"emailLink":return y_(e,{idToken:t,email:this._email,oobCode:this._password});default:Ke(e,"internal-error")}})}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}};function _a(n,e){return _(this,null,function*(){return jr(n,"POST","/v1/accounts:signInWithIdp",Nt(n,e))})}function v_(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function w_(n){let e=wn(In(n)).link,t=e?wn(In(e)).deep_link_id:null,r=wn(In(n)).deep_link_id;return(r?wn(In(r)).link:null)||r||t||e||n}var Yi=class n{constructor(e){var t,r,i,o,c,l;let h=wn(In(e)),f=(t=h.apiKey)!==null&&t!==void 0?t:null,v=(r=h.oobCode)!==null&&r!==void 0?r:null,b=v_((i=h.mode)!==null&&i!==void 0?i:null);x(f&&v&&b,"argument-error"),this.apiKey=f,this.operation=b,this.code=v,this.continueUrl=(o=h.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(c=h.languageCode)!==null&&c!==void 0?c:null,this.tenantId=(l=h.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){let t=w_(e);try{return new n(t)}catch{return null}}};var Sd=(()=>{class n{constructor(){this.providerId=n.PROVIDER_ID}static credential(t,r){return Ur._fromEmailAndPassword(t,r)}static credentialWithLink(t,r){let i=Yi.parseLink(r);return x(i,"argument-error"),Ur._fromEmailAndCode(t,i.code,i.tenantId)}}n.PROVIDER_ID="password",n.EMAIL_PASSWORD_SIGN_IN_METHOD="password",n.EMAIL_LINK_SIGN_IN_METHOD="emailLink";return n})(),Xi=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Pa=class extends Xi{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};function I_(n,e){return _(this,null,function*(){return jr(n,"POST","/v1/accounts:signUp",Nt(n,e))})}var Rn=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,r,i=!1){return _(this,null,function*(){let o=yield Sn._fromIdTokenResponse(e,r,i),c=Xh(r);return new n({user:o,providerId:c,_tokenResponse:r,operationType:t})})}static _forOperation(e,t,r){return _(this,null,function*(){yield e._updateTokensIfNecessary(r,!0);let i=Xh(r);return new n({user:e,providerId:i,_tokenResponse:r,operationType:t})})}};function Xh(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Da=class n extends De{constructor(e,t,r,i){var o;super(t.code,t.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,i){return new n(e,t,r,i)}};function Rd(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Da._fromErrorAndOperation(n,o,e,r):o})}function E_(n,e,t=!1){return _(this,null,function*(){let r=yield Cn(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Rn._forOperation(n,"link",r)})}function T_(n,e,t=!1){return _(this,null,function*(){let{auth:r}=n;if(Be(r.app))return Promise.reject(ct(r));let i="reauthenticate";try{let o=yield Cn(n,Rd(r,i,e,n),t);x(o.idToken,r,"internal-error");let c=ja(o.idToken);x(c,r,"internal-error");let{sub:l}=c;return x(n.uid===l,r,"user-mismatch"),Rn._forOperation(n,i,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ke(r,"user-mismatch"),o}})}function Pd(n,e,t=!1){return _(this,null,function*(){if(Be(n.app))return Promise.reject(ct(n));let r="signIn",i=yield Rd(n,r,e),o=yield Rn._fromIdTokenResponse(n,r,i);return t||(yield n._updateCurrentUser(o.user)),o})}function Wa(n,e){return _(this,null,function*(){return Pd(tn(n),e)})}function Dd(n){return _(this,null,function*(){let e=tn(n);e._getPasswordPolicyInternal()&&(yield e._updatePasswordPolicy())})}function Ha(n,e,t){return _(this,null,function*(){if(Be(n.app))return Promise.reject(ct(n));let r=tn(n),c=yield Ra(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",I_).catch(h=>{throw h.code==="auth/password-does-not-meet-requirements"&&Dd(n),h}),l=yield Rn._fromIdTokenResponse(r,"signIn",c);return yield r._updateCurrentUser(l.user),l})}function Ka(n,e,t){return Be(n.app)?Promise.reject(ct(n)):Wa(be(n),Sd.credential(e,t)).catch(r=>_(this,null,function*(){throw r.code==="auth/password-does-not-meet-requirements"&&Dd(n),r}))}function A_(n,e){return _(this,null,function*(){return ut(n,"POST","/v1/accounts:update",e)})}function Qa(r,i){return _(this,arguments,function*(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;let o=be(n),l={idToken:yield o.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},h=yield Cn(o,A_(o.auth,l));o.displayName=h.displayName||null,o.photoURL=h.photoUrl||null;let f=o.providerData.find(({providerId:v})=>v==="password");f&&(f.displayName=o.displayName,f.photoURL=o.photoURL),yield o._updateTokensIfNecessary(h)})}function Ja(n,e,t,r){return be(n).onIdTokenChanged(e,t,r)}function Ya(n,e,t){return be(n).beforeAuthStateChanged(e,t)}var Zi="__sak";var es=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Zi,"1"),this.storage.removeItem(Zi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};var b_=1e3,C_=10,S_=(()=>{class n extends es{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,r)=>this.onStorageEvent(t,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ed(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let r of Object.keys(this.listeners)){let i=this.storage.getItem(r),o=this.localCache[r];i!==o&&t(r,o,i)}}onStorageEvent(t,r=!1){if(!t.key){this.forAllChangedKeys((l,h,f)=>{this.notifyListeners(l,f)});return}let i=t.key;r?this.detachListener():this.stopPolling();let o=()=>{let l=this.storage.getItem(i);!r&&this.localCache[i]===l||this.notifyListeners(i,l)},c=this.storage.getItem(i);i_()&&c!==t.newValue&&t.newValue!==t.oldValue?setTimeout(o,C_):o()}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,r,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i}),!0)})},b_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,r){return _(this,null,function*(){yield It(n.prototype,this,"_set").call(this,t,r),this.localCache[t]=JSON.stringify(r)})}_get(t){return _(this,null,function*(){let r=yield It(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(r),r})}_remove(t){return _(this,null,function*(){yield It(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),kd=S_;var R_=(()=>{class n extends es{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,r){}_removeListener(t,r){}}return n.type="SESSION",n})(),Xa=R_;function P_(n){return Promise.all(n.map(e=>_(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var D_=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let r=this.receivers.find(o=>o.isListeningto(t));if(r)return r;let i=new n(t);return this.receivers.push(i),i}isListeningto(t){return this.eventTarget===t}handleEvent(t){return _(this,null,function*(){let r=t,{eventId:i,eventType:o,data:c}=r.data,l=this.handlersMap[o];if(!l?.size)return;r.ports[0].postMessage({status:"ack",eventId:i,eventType:o});let h=Array.from(l).map(v=>_(this,null,function*(){return v(r.origin,c)})),f=yield P_(h);r.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f})})}_subscribe(t,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(r)}_unsubscribe(t,r){this.handlersMap[t]&&r&&this.handlersMap[t].delete(r),(!r||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Nd(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}var ka=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,r=50){return _(this,null,function*(){let i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,c;return new Promise((l,h)=>{let f=Nd("",20);i.port1.start();let v=setTimeout(()=>{h(new Error("unsupported_event"))},r);c={messageChannel:i,onMessage(b){let C=b;if(C.data.eventId===f)switch(C.data.status){case"ack":clearTimeout(v),o=setTimeout(()=>{h(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(C.data.response);break;default:clearTimeout(v),clearTimeout(o),h(new Error("invalid_response"));break}}},this.handlers.add(c),i.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:f,data:t},[i.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})})}};function He(){return window}function k_(n){He().location.href=n}function Vd(){return typeof He().WorkerGlobalScope<"u"&&typeof He().importScripts=="function"}function N_(){return _(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function V_(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function O_(){return Vd()?self:null}var Od="firebaseLocalStorageDb",x_=1,ts="firebaseLocalStorage",xd="fbase_key",en=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function is(n,e){return n.transaction([ts],e?"readwrite":"readonly").objectStore(ts)}function M_(){let n=indexedDB.deleteDatabase(Od);return new en(n).toPromise()}function Na(){let n=indexedDB.open(Od,x_);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let r=n.result;try{r.createObjectStore(ts,{keyPath:xd})}catch(i){t(i)}}),n.addEventListener("success",()=>_(this,null,function*(){let r=n.result;r.objectStoreNames.contains(ts)?e(r):(r.close(),yield M_(),e(yield Na()))}))})}function Zh(n,e,t){return _(this,null,function*(){let r=is(n,!0).put({[xd]:e,value:t});return new en(r).toPromise()})}function F_(n,e){return _(this,null,function*(){let t=is(n,!1).get(e),r=yield new en(t).toPromise();return r===void 0?null:r.value})}function ed(n,e){let t=is(n,!0).delete(e);return new en(t).toPromise()}var L_=800,U_=3,B_=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return _(this,null,function*(){return this.db?this.db:(this.db=yield Na(),this.db)})}_withRetries(t){return _(this,null,function*(){let r=0;for(;;)try{let i=yield this._openDb();return yield t(i)}catch(i){if(r++>U_)throw i;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return _(this,null,function*(){return Vd()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return _(this,null,function*(){this.receiver=D_._getInstance(O_()),this.receiver._subscribe("keyChanged",(t,r)=>_(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(r.key)}})),this.receiver._subscribe("ping",(t,r)=>_(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return _(this,null,function*(){var t,r;if(this.activeServiceWorker=yield N_(),!this.activeServiceWorker)return;this.sender=new ka(this.activeServiceWorker);let i=yield this.sender._send("ping",{},800);i&&!((t=i[0])===null||t===void 0)&&t.fulfilled&&!((r=i[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return _(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||V_()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return _(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Na();return yield Zh(t,Zi,"1"),yield ed(t,Zi),!0}catch{}return!1})}_withPendingWrite(t){return _(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,r){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(i=>Zh(i,t,r)),this.localCache[t]=r,this.notifyServiceWorker(t)}))})}_get(t){return _(this,null,function*(){let r=yield this._withRetries(i=>F_(i,t));return this.localCache[t]=r,r})}_remove(t){return _(this,null,function*(){return this._withPendingWrite(()=>_(this,null,function*(){return yield this._withRetries(r=>ed(r,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return _(this,null,function*(){let t=yield this._withRetries(o=>{let c=is(o,!1).getAll();return new en(c).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let r=[],i=new Set;if(t.length!==0)for(let{fbase_key:o,value:c}of t)i.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),r.push(o));for(let o of Object.keys(this.localCache))this.localCache[o]&&!i.has(o)&&(this.notifyListeners(o,null),r.push(o));return r})}notifyListeners(t,r){this.localCache[t]=r;let i=this.listeners[t];if(i)for(let o of Array.from(i))o(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>_(this,null,function*(){return this._poll()}),L_)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(r)}_removeListener(t,r){this.listeners[t]&&(this.listeners[t].delete(r),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),Md=B_;var RE=bd("rcb"),PE=new Zt(3e4,6e4);function j_(n,e){return e?at(e):(x(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Br=class extends Lr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return _a(e,this._buildIdpRequest())}_linkToIdToken(e,t){return _a(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return _a(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function q_(n){return Pd(n.auth,new Br(n),n.bypassAuthState)}function $_(n){let{auth:e,user:t}=n;return x(t,e,"internal-error"),T_(t,new Br(n),n.bypassAuthState)}function G_(n){return _(this,null,function*(){let{auth:e,user:t}=n;return x(t,e,"internal-error"),E_(t,new Br(n),n.bypassAuthState)})}var Va=class{constructor(e,t,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>_(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}}))}onAuthEvent(e){return _(this,null,function*(){let{urlResponse:t,sessionId:r,postBody:i,tenantId:o,error:c,type:l}=e;if(c){this.reject(c);return}let h={auth:this.auth,requestUri:t,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(l)(h))}catch(f){this.reject(f)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return q_;case"linkViaPopup":case"linkViaRedirect":return G_;case"reauthViaPopup":case"reauthViaRedirect":return $_;default:Ke(this.auth,"internal-error")}}resolve(e){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){kt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var DE=new Zt(2e3,1e4);var z_="pendingRedirect",Gi=new Map,Oa=class n extends Va{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}execute(){return _(this,null,function*(){let e=Gi.get(this.auth._key());if(!e){try{let r=(yield W_(this.resolver,this.auth))?yield It(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Gi.set(this.auth._key(),e)}return this.bypassAuthState||Gi.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return _(this,null,function*(){if(e.type==="signInViaRedirect")return It(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,It(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return _(this,null,function*(){})}cleanUp(){}};function W_(n,e){return _(this,null,function*(){let t=Q_(e),r=K_(n);if(!(yield r._isAvailable()))return!1;let i=(yield r._get(t))==="true";return yield r._remove(t),i})}function H_(n,e){Gi.set(n._key(),e)}function K_(n){return at(n._redirectPersistence)}function Q_(n){return $i(z_,n.config.apiKey,n.name)}function J_(n,e,t=!1){return _(this,null,function*(){if(Be(n.app))return Promise.reject(ct(n));let r=tn(n),i=j_(r,e),c=yield new Oa(r,i,t).execute();return c&&!t&&(delete c.user._redirectEventId,yield r._persistUserIfCurrent(c.user),yield r._setRedirectUser(null,e)),c})}var Y_=10*60*1e3,xa=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X_(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!Fd(e)){let i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError(Xt(this.auth,i))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Y_&&this.cachedEventUids.clear(),this.cachedEventUids.has(td(e))}saveEventToCache(e){this.cachedEventUids.add(td(e)),this.lastProcessedEventTime=Date.now()}};function td(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Fd({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function X_(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Fd(n);default:return!1}}function Z_(t){return _(this,arguments,function*(n,e={}){return ut(n,"GET","/v1/projects",e)})}var ey=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ty=/^https?/;function ny(n){return _(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield Z_(n);for(let t of e)try{if(ry(t))return}catch{}Ke(n,"unauthorized-domain")})}function ry(n){let e=va(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){let c=new URL(n);return c.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===r}if(!ty.test(t))return!1;if(ey.test(n))return r===n;let i=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}var iy=new Zt(3e4,6e4);function nd(){let n=He().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function sy(n){return new Promise((e,t)=>{var r,i,o;function c(){nd(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{nd(),t(Xt(n,"network-request-failed"))},timeout:iy.get()})}if(!((i=(r=He().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=He().gapi)===null||o===void 0)&&o.load)c();else{let l=bd("iframefcb");return He()[l]=()=>{gapi.load?c():t(Xt(n,"network-request-failed"))},Ad(`${u_()}?onload=${l}`).catch(h=>t(h))}}).catch(e=>{throw zi=null,e})}var zi=null;function oy(n){return zi=zi||sy(n),zi}var ay=new Zt(5e3,15e3),cy="__/auth/iframe",uy="emulator/auth/iframe",ly={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},hy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dy(n){let e=n.config;x(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Ua(e,uy):`https://${n.config.authDomain}/${cy}`,r={apiKey:e.apiKey,appName:n.name,v:Pt},i=hy.get(n.config.apiHost);i&&(r.eid=i);let o=n._getFrameworks();return o.length&&(r.fw=o.join(",")),`${t}?${Dr(r).slice(1)}`}function fy(n){return _(this,null,function*(){let e=yield oy(n),t=He().gapi;return x(t,n,"internal-error"),e.open({where:document.body,url:dy(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ly,dontclear:!0},r=>new Promise((i,o)=>_(this,null,function*(){yield r.restyle({setHideOnLeave:!1});let c=Xt(n,"network-request-failed"),l=He().setTimeout(()=>{o(c)},ay.get());function h(){He().clearTimeout(l),i(r)}r.ping(h).then(h,()=>{o(c)})})))})}var py={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},my=500,gy=600,_y="_blank",yy="http://localhost",ns=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function vy(n,e,t,r=my,i=gy){let o=Math.max((window.screen.availHeight-i)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString(),l="",h=Object.assign(Object.assign({},py),{width:r.toString(),height:i.toString(),top:o,left:c}),f=le().toLowerCase();t&&(l=_d(f)?_y:t),md(f)&&(e=e||yy,h.scrollbars="yes");let v=Object.entries(h).reduce((C,[D,k])=>`${C}${D}=${k},`,"");if(r_(f)&&l!=="_self")return wy(e||"",l),new ns(null);let b=window.open(e||"",l,v);x(b,n,"popup-blocked");try{b.focus()}catch{}return new ns(b)}function wy(n,e){let t=document.createElement("a");t.href=n,t.target=e;let r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}var Iy="__/auth/handler",Ey="emulator/auth/handler",Ty=encodeURIComponent("fac");function rd(n,e,t,r,i,o){return _(this,null,function*(){x(n.config.authDomain,n,"auth-domain-config-required"),x(n.config.apiKey,n,"invalid-api-key");let c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Pt,eventId:i};if(e instanceof Xi){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",Sh(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(let[v,b]of Object.entries(o||{}))c[v]=b}if(e instanceof Pa){let v=e.getScopes().filter(b=>b!=="");v.length>0&&(c.scopes=v.join(","))}n.tenantId&&(c.tid=n.tenantId);let l=c;for(let v of Object.keys(l))l[v]===void 0&&delete l[v];let h=yield n._getAppCheckToken(),f=h?`#${Ty}=${encodeURIComponent(h)}`:"";return`${Ay(n)}?${Dr(l).slice(1)}${f}`})}function Ay({config:n}){return n.emulator?Ua(n,Ey):`https://${n.authDomain}/${Iy}`}var ya="webStorageSupport",Ma=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xa,this._completeRedirectFn=J_,this._overrideRedirectResult=H_}_openPopup(e,t,r,i){return _(this,null,function*(){var o;kt((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");let c=yield rd(e,t,r,va(),i);return vy(e,c,Nd())})}_openRedirect(e,t,r,i){return _(this,null,function*(){yield this._originValidation(e);let o=yield rd(e,t,r,va(),i);return k_(o),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:i,promise:o}=this.eventManagers[t];return i?Promise.resolve(i):(kt(o,"If manager is not set, promise should be"),o)}let r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}initAndGetManager(e){return _(this,null,function*(){let t=yield fy(e),r=new xa(e);return t.register("authEvent",i=>(x(i?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ya,{type:ya},i=>{var o;let c=(o=i?.[0])===null||o===void 0?void 0:o[ya];c!==void 0&&t(!!c),Ke(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ny(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ed()||gd()||$a()}},Ld=Ma;var id="@firebase/auth",sd="1.7.8";var Fa=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return _(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){x(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function by(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cy(n){Rt(new xe("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:c,authDomain:l}=r.options;x(c&&!c.includes(":"),"invalid-api-key",{appName:r.name});let h={apiKey:c,authDomain:l,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Td(n)},f=new Ca(r,i,o,h);return d_(f,t),f},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Rt(new xe("auth-internal",e=>{let t=tn(e.getProvider("auth").getImmediate());return(r=>new Fa(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ae(id,sd,by(n)),ae(id,sd,"esm2017")}var Sy=5*60,Ry=Yo("authIdTokenMaxAge")||Sy,od=null,Py=n=>e=>_(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>Ry)return;let i=t?.token;od!==i&&(od=i,yield fetch(n,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))});function Za(n=En()){let e=Vr(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Ga(n,{popupRedirectResolver:Ld,persistence:[Md,kd,Xa]}),r=Yo("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){let o=new URL(r,location.origin);if(location.origin===o.origin){let c=Py(o.toString());Ya(t,c,()=>c(t.currentUser)),Ja(t,l=>c(l))}}let i=Qo("auth");return i&&za(t,`http://${i}`),t}function Dy(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}a_({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Xt("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",Dy().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cy("Browser");var Ud="auth",lt=class{constructor(e){return e}},qr=class{constructor(){return Or(Ud)}};var ec=new ye("angularfire2.auth-instances");function wv(n,e){let t=Ui(Ud,n,e);return t&&new lt(t)}function Iv(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new lt(r)}}var Ev={provide:qr,deps:[[new Ve,ec]]},Tv={provide:lt,useFactory:wv,deps:[[new Ve,ec],st]};function Bd(n,...e){return ae("angularfire",Jt.full,"auth"),yn([Tv,Ev,{provide:ec,useFactory:Iv(n),multi:!0,deps:[Tt,Et,bn,Yt,[new Ve,An],...e]}])}var jd=je(Ha,!0);var ss=je(Za,!0);var qd=je(Ka,!0);var $d=je(Qa,!0);var zd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Wd={};var tc,Hd;(function(){var n;function e(I,p){function g(){}g.prototype=p.prototype,I.D=p.prototype,I.prototype=new g,I.prototype.constructor=I,I.C=function(y,w,T){for(var m=Array(arguments.length-2),et=2;et<arguments.length;et++)m[et-2]=arguments[et];return p.prototype[w].apply(y,m)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,p,g){g||(g=0);var y=Array(16);if(typeof p=="string")for(var w=0;16>w;++w)y[w]=p.charCodeAt(g++)|p.charCodeAt(g++)<<8|p.charCodeAt(g++)<<16|p.charCodeAt(g++)<<24;else for(w=0;16>w;++w)y[w]=p[g++]|p[g++]<<8|p[g++]<<16|p[g++]<<24;p=I.g[0],g=I.g[1],w=I.g[2];var T=I.g[3],m=p+(T^g&(w^T))+y[0]+3614090360&4294967295;p=g+(m<<7&4294967295|m>>>25),m=T+(w^p&(g^w))+y[1]+3905402710&4294967295,T=p+(m<<12&4294967295|m>>>20),m=w+(g^T&(p^g))+y[2]+606105819&4294967295,w=T+(m<<17&4294967295|m>>>15),m=g+(p^w&(T^p))+y[3]+3250441966&4294967295,g=w+(m<<22&4294967295|m>>>10),m=p+(T^g&(w^T))+y[4]+4118548399&4294967295,p=g+(m<<7&4294967295|m>>>25),m=T+(w^p&(g^w))+y[5]+1200080426&4294967295,T=p+(m<<12&4294967295|m>>>20),m=w+(g^T&(p^g))+y[6]+2821735955&4294967295,w=T+(m<<17&4294967295|m>>>15),m=g+(p^w&(T^p))+y[7]+4249261313&4294967295,g=w+(m<<22&4294967295|m>>>10),m=p+(T^g&(w^T))+y[8]+1770035416&4294967295,p=g+(m<<7&4294967295|m>>>25),m=T+(w^p&(g^w))+y[9]+2336552879&4294967295,T=p+(m<<12&4294967295|m>>>20),m=w+(g^T&(p^g))+y[10]+4294925233&4294967295,w=T+(m<<17&4294967295|m>>>15),m=g+(p^w&(T^p))+y[11]+2304563134&4294967295,g=w+(m<<22&4294967295|m>>>10),m=p+(T^g&(w^T))+y[12]+1804603682&4294967295,p=g+(m<<7&4294967295|m>>>25),m=T+(w^p&(g^w))+y[13]+4254626195&4294967295,T=p+(m<<12&4294967295|m>>>20),m=w+(g^T&(p^g))+y[14]+2792965006&4294967295,w=T+(m<<17&4294967295|m>>>15),m=g+(p^w&(T^p))+y[15]+1236535329&4294967295,g=w+(m<<22&4294967295|m>>>10),m=p+(w^T&(g^w))+y[1]+4129170786&4294967295,p=g+(m<<5&4294967295|m>>>27),m=T+(g^w&(p^g))+y[6]+3225465664&4294967295,T=p+(m<<9&4294967295|m>>>23),m=w+(p^g&(T^p))+y[11]+643717713&4294967295,w=T+(m<<14&4294967295|m>>>18),m=g+(T^p&(w^T))+y[0]+3921069994&4294967295,g=w+(m<<20&4294967295|m>>>12),m=p+(w^T&(g^w))+y[5]+3593408605&4294967295,p=g+(m<<5&4294967295|m>>>27),m=T+(g^w&(p^g))+y[10]+38016083&4294967295,T=p+(m<<9&4294967295|m>>>23),m=w+(p^g&(T^p))+y[15]+3634488961&4294967295,w=T+(m<<14&4294967295|m>>>18),m=g+(T^p&(w^T))+y[4]+3889429448&4294967295,g=w+(m<<20&4294967295|m>>>12),m=p+(w^T&(g^w))+y[9]+568446438&4294967295,p=g+(m<<5&4294967295|m>>>27),m=T+(g^w&(p^g))+y[14]+3275163606&4294967295,T=p+(m<<9&4294967295|m>>>23),m=w+(p^g&(T^p))+y[3]+4107603335&4294967295,w=T+(m<<14&4294967295|m>>>18),m=g+(T^p&(w^T))+y[8]+1163531501&4294967295,g=w+(m<<20&4294967295|m>>>12),m=p+(w^T&(g^w))+y[13]+2850285829&4294967295,p=g+(m<<5&4294967295|m>>>27),m=T+(g^w&(p^g))+y[2]+4243563512&4294967295,T=p+(m<<9&4294967295|m>>>23),m=w+(p^g&(T^p))+y[7]+1735328473&4294967295,w=T+(m<<14&4294967295|m>>>18),m=g+(T^p&(w^T))+y[12]+2368359562&4294967295,g=w+(m<<20&4294967295|m>>>12),m=p+(g^w^T)+y[5]+4294588738&4294967295,p=g+(m<<4&4294967295|m>>>28),m=T+(p^g^w)+y[8]+2272392833&4294967295,T=p+(m<<11&4294967295|m>>>21),m=w+(T^p^g)+y[11]+1839030562&4294967295,w=T+(m<<16&4294967295|m>>>16),m=g+(w^T^p)+y[14]+4259657740&4294967295,g=w+(m<<23&4294967295|m>>>9),m=p+(g^w^T)+y[1]+2763975236&4294967295,p=g+(m<<4&4294967295|m>>>28),m=T+(p^g^w)+y[4]+1272893353&4294967295,T=p+(m<<11&4294967295|m>>>21),m=w+(T^p^g)+y[7]+4139469664&4294967295,w=T+(m<<16&4294967295|m>>>16),m=g+(w^T^p)+y[10]+3200236656&4294967295,g=w+(m<<23&4294967295|m>>>9),m=p+(g^w^T)+y[13]+681279174&4294967295,p=g+(m<<4&4294967295|m>>>28),m=T+(p^g^w)+y[0]+3936430074&4294967295,T=p+(m<<11&4294967295|m>>>21),m=w+(T^p^g)+y[3]+3572445317&4294967295,w=T+(m<<16&4294967295|m>>>16),m=g+(w^T^p)+y[6]+76029189&4294967295,g=w+(m<<23&4294967295|m>>>9),m=p+(g^w^T)+y[9]+3654602809&4294967295,p=g+(m<<4&4294967295|m>>>28),m=T+(p^g^w)+y[12]+3873151461&4294967295,T=p+(m<<11&4294967295|m>>>21),m=w+(T^p^g)+y[15]+530742520&4294967295,w=T+(m<<16&4294967295|m>>>16),m=g+(w^T^p)+y[2]+3299628645&4294967295,g=w+(m<<23&4294967295|m>>>9),m=p+(w^(g|~T))+y[0]+4096336452&4294967295,p=g+(m<<6&4294967295|m>>>26),m=T+(g^(p|~w))+y[7]+1126891415&4294967295,T=p+(m<<10&4294967295|m>>>22),m=w+(p^(T|~g))+y[14]+2878612391&4294967295,w=T+(m<<15&4294967295|m>>>17),m=g+(T^(w|~p))+y[5]+4237533241&4294967295,g=w+(m<<21&4294967295|m>>>11),m=p+(w^(g|~T))+y[12]+1700485571&4294967295,p=g+(m<<6&4294967295|m>>>26),m=T+(g^(p|~w))+y[3]+2399980690&4294967295,T=p+(m<<10&4294967295|m>>>22),m=w+(p^(T|~g))+y[10]+4293915773&4294967295,w=T+(m<<15&4294967295|m>>>17),m=g+(T^(w|~p))+y[1]+2240044497&4294967295,g=w+(m<<21&4294967295|m>>>11),m=p+(w^(g|~T))+y[8]+1873313359&4294967295,p=g+(m<<6&4294967295|m>>>26),m=T+(g^(p|~w))+y[15]+4264355552&4294967295,T=p+(m<<10&4294967295|m>>>22),m=w+(p^(T|~g))+y[6]+2734768916&4294967295,w=T+(m<<15&4294967295|m>>>17),m=g+(T^(w|~p))+y[13]+1309151649&4294967295,g=w+(m<<21&4294967295|m>>>11),m=p+(w^(g|~T))+y[4]+4149444226&4294967295,p=g+(m<<6&4294967295|m>>>26),m=T+(g^(p|~w))+y[11]+3174756917&4294967295,T=p+(m<<10&4294967295|m>>>22),m=w+(p^(T|~g))+y[2]+718787259&4294967295,w=T+(m<<15&4294967295|m>>>17),m=g+(T^(w|~p))+y[9]+3951481745&4294967295,I.g[0]=I.g[0]+p&4294967295,I.g[1]=I.g[1]+(w+(m<<21&4294967295|m>>>11))&4294967295,I.g[2]=I.g[2]+w&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,p){p===void 0&&(p=I.length);for(var g=p-this.blockSize,y=this.B,w=this.h,T=0;T<p;){if(w==0)for(;T<=g;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<p;)if(y[w++]=I.charCodeAt(T++),w==this.blockSize){i(this,y),w=0;break}}else for(;T<p;)if(y[w++]=I[T++],w==this.blockSize){i(this,y),w=0;break}}this.h=w,this.o+=p},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var p=1;p<I.length-8;++p)I[p]=0;var g=8*this.o;for(p=I.length-8;p<I.length;++p)I[p]=g&255,g/=256;for(this.u(I),I=Array(16),p=g=0;4>p;++p)for(var y=0;32>y;y+=8)I[g++]=this.g[p]>>>y&255;return I};function o(I,p){var g=l;return Object.prototype.hasOwnProperty.call(g,I)?g[I]:g[I]=p(I)}function c(I,p){this.h=p;for(var g=[],y=!0,w=I.length-1;0<=w;w--){var T=I[w]|0;y&&T==p||(g[w]=T,y=!1)}this.g=g}var l={};function h(I){return-128<=I&&128>I?o(I,function(p){return new c([p|0],0>p?-1:0)}):new c([I|0],0>I?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return b;if(0>I)return V(f(-I));for(var p=[],g=1,y=0;I>=g;y++)p[y]=I/g|0,g*=4294967296;return new c(p,0)}function v(I,p){if(I.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(I.charAt(0)=="-")return V(v(I.substring(1),p));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var g=f(Math.pow(p,8)),y=b,w=0;w<I.length;w+=8){var T=Math.min(8,I.length-w),m=parseInt(I.substring(w,w+T),p);8>T?(T=f(Math.pow(p,T)),y=y.j(T).add(f(m))):(y=y.j(g),y=y.add(f(m)))}return y}var b=h(0),C=h(1),D=h(16777216);n=c.prototype,n.m=function(){if(M(this))return-V(this).m();for(var I=0,p=1,g=0;g<this.g.length;g++){var y=this.i(g);I+=(0<=y?y:4294967296+y)*p,p*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(M(this))return"-"+V(this).toString(I);for(var p=f(Math.pow(I,6)),g=this,y="";;){var w=oe(g,p).g;g=Q(g,w.j(p));var T=((0<g.g.length?g.g[0]:g.h)>>>0).toString(I);if(g=w,k(g))return T+y;for(;6>T.length;)T="0"+T;y=T+y}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(var p=0;p<I.g.length;p++)if(I.g[p]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=Q(this,I),M(I)?-1:k(I)?0:1};function V(I){for(var p=I.g.length,g=[],y=0;y<p;y++)g[y]=~I.g[y];return new c(g,~I.h).add(C)}n.abs=function(){return M(this)?V(this):this},n.add=function(I){for(var p=Math.max(this.g.length,I.g.length),g=[],y=0,w=0;w<=p;w++){var T=y+(this.i(w)&65535)+(I.i(w)&65535),m=(T>>>16)+(this.i(w)>>>16)+(I.i(w)>>>16);y=m>>>16,T&=65535,m&=65535,g[w]=m<<16|T}return new c(g,g[g.length-1]&-2147483648?-1:0)};function Q(I,p){return I.add(V(p))}n.j=function(I){if(k(this)||k(I))return b;if(M(this))return M(I)?V(this).j(V(I)):V(V(this).j(I));if(M(I))return V(this.j(V(I)));if(0>this.l(D)&&0>I.l(D))return f(this.m()*I.m());for(var p=this.g.length+I.g.length,g=[],y=0;y<2*p;y++)g[y]=0;for(y=0;y<this.g.length;y++)for(var w=0;w<I.g.length;w++){var T=this.i(y)>>>16,m=this.i(y)&65535,et=I.i(w)>>>16,er=I.i(w)&65535;g[2*y+2*w]+=m*er,H(g,2*y+2*w),g[2*y+2*w+1]+=T*er,H(g,2*y+2*w+1),g[2*y+2*w+1]+=m*et,H(g,2*y+2*w+1),g[2*y+2*w+2]+=T*et,H(g,2*y+2*w+2)}for(y=0;y<p;y++)g[y]=g[2*y+1]<<16|g[2*y];for(y=p;y<2*p;y++)g[y]=0;return new c(g,0)};function H(I,p){for(;(I[p]&65535)!=I[p];)I[p+1]+=I[p]>>>16,I[p]&=65535,p++}function J(I,p){this.g=I,this.h=p}function oe(I,p){if(k(p))throw Error("division by zero");if(k(I))return new J(b,b);if(M(I))return p=oe(V(I),p),new J(V(p.g),V(p.h));if(M(p))return p=oe(I,V(p)),new J(V(p.g),p.h);if(30<I.g.length){if(M(I)||M(p))throw Error("slowDivide_ only works with positive integers.");for(var g=C,y=p;0>=y.l(I);)g=qe(g),y=qe(y);var w=ue(g,1),T=ue(y,1);for(y=ue(y,2),g=ue(g,2);!k(y);){var m=T.add(y);0>=m.l(I)&&(w=w.add(g),T=m),y=ue(y,1),g=ue(g,1)}return p=Q(I,w.j(p)),new J(w,p)}for(w=b;0<=I.l(p);){for(g=Math.max(1,Math.floor(I.m()/p.m())),y=Math.ceil(Math.log(g)/Math.LN2),y=48>=y?1:Math.pow(2,y-48),T=f(g),m=T.j(p);M(m)||0<m.l(I);)g-=y,T=f(g),m=T.j(p);k(T)&&(T=C),w=w.add(T),I=Q(I,m)}return new J(w,I)}n.A=function(I){return oe(this,I).h},n.and=function(I){for(var p=Math.max(this.g.length,I.g.length),g=[],y=0;y<p;y++)g[y]=this.i(y)&I.i(y);return new c(g,this.h&I.h)},n.or=function(I){for(var p=Math.max(this.g.length,I.g.length),g=[],y=0;y<p;y++)g[y]=this.i(y)|I.i(y);return new c(g,this.h|I.h)},n.xor=function(I){for(var p=Math.max(this.g.length,I.g.length),g=[],y=0;y<p;y++)g[y]=this.i(y)^I.i(y);return new c(g,this.h^I.h)};function qe(I){for(var p=I.g.length+1,g=[],y=0;y<p;y++)g[y]=I.i(y)<<1|I.i(y-1)>>>31;return new c(g,I.h)}function ue(I,p){var g=p>>5;p%=32;for(var y=I.g.length-g,w=[],T=0;T<y;T++)w[T]=0<p?I.i(T+g)>>>p|I.i(T+g+1)<<32-p:I.i(T+g);return new c(w,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Hd=Wd.Md5=r,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.A,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=f,c.fromString=v,tc=Wd.Integer=c}).apply(typeof zd<"u"?zd:typeof self<"u"?self:typeof window<"u"?window:{});var os=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ht={};var nc,rc,Pn,ic,$r,as,sc,oc,ac;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,a,u){return s==Array.prototype||s==Object.prototype||(s[a]=u.value),s};function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof os=="object"&&os];for(var a=0;a<s.length;++a){var u=s[a];if(u&&u.Math==Math)return u}throw Error("Cannot find global object")}var r=t(this);function i(s,a){if(a)e:{var u=r;s=s.split(".");for(var d=0;d<s.length-1;d++){var E=s[d];if(!(E in u))break e;u=u[E]}s=s[s.length-1],d=u[s],a=a(d),a!=d&&a!=null&&e(u,s,{configurable:!0,writable:!0,value:a})}}function o(s,a){s instanceof String&&(s+="");var u=0,d=!1,E={next:function(){if(!d&&u<s.length){var A=u++;return{value:a(A,s[A]),done:!1}}return d=!0,{done:!0,value:void 0}}};return E[Symbol.iterator]=function(){return E},E}i("Array.prototype.values",function(s){return s||function(){return o(this,function(a,u){return u})}});var c=c||{},l=this||self;function h(s){var a=typeof s;return a=a!="object"?a:s?Array.isArray(s)?"array":a:"null",a=="array"||a=="object"&&typeof s.length=="number"}function f(s){var a=typeof s;return a=="object"&&s!=null||a=="function"}function v(s,a,u){return s.call.apply(s.bind,arguments)}function b(s,a,u){if(!s)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var E=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(E,d),s.apply(a,E)}}return function(){return s.apply(a,arguments)}}function C(s,a,u){return C=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?v:b,C.apply(null,arguments)}function D(s,a){var u=Array.prototype.slice.call(arguments,1);return function(){var d=u.slice();return d.push.apply(d,arguments),s.apply(this,d)}}function k(s,a){function u(){}u.prototype=a.prototype,s.aa=a.prototype,s.prototype=new u,s.prototype.constructor=s,s.Qb=function(d,E,A){for(var P=Array(arguments.length-2),z=2;z<arguments.length;z++)P[z-2]=arguments[z];return a.prototype[E].apply(d,P)}}function M(s){let a=s.length;if(0<a){let u=Array(a);for(let d=0;d<a;d++)u[d]=s[d];return u}return[]}function V(s,a){for(let u=1;u<arguments.length;u++){let d=arguments[u];if(h(d)){let E=s.length||0,A=d.length||0;s.length=E+A;for(let P=0;P<A;P++)s[E+P]=d[P]}else s.push(d)}}class Q{constructor(a,u){this.i=a,this.j=u,this.h=0,this.g=null}get(){let a;return 0<this.h?(this.h--,a=this.g,this.g=a.next,a.next=null):a=this.i(),a}}function H(s){return/^[\s\xa0]*$/.test(s)}function J(){var s=l.navigator;return s&&(s=s.userAgent)?s:""}function oe(s){return oe[" "](s),s}oe[" "]=function(){};var qe=J().indexOf("Gecko")!=-1&&!(J().toLowerCase().indexOf("webkit")!=-1&&J().indexOf("Edge")==-1)&&!(J().indexOf("Trident")!=-1||J().indexOf("MSIE")!=-1)&&J().indexOf("Edge")==-1;function ue(s,a,u){for(let d in s)a.call(u,s[d],d,s)}function I(s,a){for(let u in s)a.call(void 0,s[u],u,s)}function p(s){let a={};for(let u in s)a[u]=s[u];return a}let g="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function y(s,a){let u,d;for(let E=1;E<arguments.length;E++){d=arguments[E];for(u in d)s[u]=d[u];for(let A=0;A<g.length;A++)u=g[A],Object.prototype.hasOwnProperty.call(d,u)&&(s[u]=d[u])}}function w(s){var a=1;s=s.split(":");let u=[];for(;0<a&&s.length;)u.push(s.shift()),a--;return s.length&&u.push(s.join(":")),u}function T(s){l.setTimeout(()=>{throw s},0)}function m(){var s=io;let a=null;return s.g&&(a=s.g,s.g=s.g.next,s.g||(s.h=null),a.next=null),a}class et{constructor(){this.h=this.g=null}add(a,u){let d=er.get();d.set(a,u),this.h?this.h.next=d:this.g=d,this.h=d}}var er=new Q(()=>new qp,s=>s.reset());class qp{constructor(){this.next=this.g=this.h=null}set(a,u){this.h=a,this.g=u,this.next=null}reset(){this.next=this.g=this.h=null}}let tr,nr=!1,io=new et,Ju=()=>{let s=l.Promise.resolve(void 0);tr=()=>{s.then($p)}};var $p=()=>{for(var s;s=m();){try{s.h.call(s.g)}catch(u){T(u)}var a=er;a.j(s),100>a.h&&(a.h++,s.next=a.g,a.g=s)}nr=!1};function _t(){this.s=this.s,this.C=this.C}_t.prototype.s=!1,_t.prototype.ma=function(){this.s||(this.s=!0,this.N())},_t.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(s,a){this.type=s,this.g=this.target=a,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Gp=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var s=!1,a=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let u=()=>{};l.addEventListener("test",u,a),l.removeEventListener("test",u,a)}catch{}return s}();function rr(s,a){if(pe.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var u=this.type=s.type,d=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=a,a=s.relatedTarget){if(qe){e:{try{oe(a.nodeName);var E=!0;break e}catch{}E=!1}E||(a=null)}}else u=="mouseover"?a=s.fromElement:u=="mouseout"&&(a=s.toElement);this.relatedTarget=a,d?(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:zp[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&rr.aa.h.call(this)}}k(rr,pe);var zp={2:"touch",3:"pen",4:"mouse"};rr.prototype.h=function(){rr.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var ir="closure_listenable_"+(1e6*Math.random()|0),Wp=0;function Hp(s,a,u,d,E){this.listener=s,this.proxy=null,this.src=a,this.type=u,this.capture=!!d,this.ha=E,this.key=++Wp,this.da=this.fa=!1}function fi(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function pi(s){this.src=s,this.g={},this.h=0}pi.prototype.add=function(s,a,u,d,E){var A=s.toString();s=this.g[A],s||(s=this.g[A]=[],this.h++);var P=oo(s,a,d,E);return-1<P?(a=s[P],u||(a.fa=!1)):(a=new Hp(a,this.src,A,!!d,E),a.fa=u,s.push(a)),a};function so(s,a){var u=a.type;if(u in s.g){var d=s.g[u],E=Array.prototype.indexOf.call(d,a,void 0),A;(A=0<=E)&&Array.prototype.splice.call(d,E,1),A&&(fi(a),s.g[u].length==0&&(delete s.g[u],s.h--))}}function oo(s,a,u,d){for(var E=0;E<s.length;++E){var A=s[E];if(!A.da&&A.listener==a&&A.capture==!!u&&A.ha==d)return E}return-1}var ao="closure_lm_"+(1e6*Math.random()|0),co={};function Yu(s,a,u,d,E){if(d&&d.once)return Zu(s,a,u,d,E);if(Array.isArray(a)){for(var A=0;A<a.length;A++)Yu(s,a[A],u,d,E);return null}return u=fo(u),s&&s[ir]?s.K(a,u,f(d)?!!d.capture:!!d,E):Xu(s,a,u,!1,d,E)}function Xu(s,a,u,d,E,A){if(!a)throw Error("Invalid event type");var P=f(E)?!!E.capture:!!E,z=lo(s);if(z||(s[ao]=z=new pi(s)),u=z.add(a,u,d,P,A),u.proxy)return u;if(d=Kp(),u.proxy=d,d.src=s,d.listener=u,s.addEventListener)Gp||(E=P),E===void 0&&(E=!1),s.addEventListener(a.toString(),d,E);else if(s.attachEvent)s.attachEvent(tl(a.toString()),d);else if(s.addListener&&s.removeListener)s.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");return u}function Kp(){function s(u){return a.call(s.src,s.listener,u)}let a=Qp;return s}function Zu(s,a,u,d,E){if(Array.isArray(a)){for(var A=0;A<a.length;A++)Zu(s,a[A],u,d,E);return null}return u=fo(u),s&&s[ir]?s.L(a,u,f(d)?!!d.capture:!!d,E):Xu(s,a,u,!0,d,E)}function el(s,a,u,d,E){if(Array.isArray(a))for(var A=0;A<a.length;A++)el(s,a[A],u,d,E);else d=f(d)?!!d.capture:!!d,u=fo(u),s&&s[ir]?(s=s.i,a=String(a).toString(),a in s.g&&(A=s.g[a],u=oo(A,u,d,E),-1<u&&(fi(A[u]),Array.prototype.splice.call(A,u,1),A.length==0&&(delete s.g[a],s.h--)))):s&&(s=lo(s))&&(a=s.g[a.toString()],s=-1,a&&(s=oo(a,u,d,E)),(u=-1<s?a[s]:null)&&uo(u))}function uo(s){if(typeof s!="number"&&s&&!s.da){var a=s.src;if(a&&a[ir])so(a.i,s);else{var u=s.type,d=s.proxy;a.removeEventListener?a.removeEventListener(u,d,s.capture):a.detachEvent?a.detachEvent(tl(u),d):a.addListener&&a.removeListener&&a.removeListener(d),(u=lo(a))?(so(u,s),u.h==0&&(u.src=null,a[ao]=null)):fi(s)}}}function tl(s){return s in co?co[s]:co[s]="on"+s}function Qp(s,a){if(s.da)s=!0;else{a=new rr(a,this);var u=s.listener,d=s.ha||s.src;s.fa&&uo(s),s=u.call(d,a)}return s}function lo(s){return s=s[ao],s instanceof pi?s:null}var ho="__closure_events_fn_"+(1e9*Math.random()>>>0);function fo(s){return typeof s=="function"?s:(s[ho]||(s[ho]=function(a){return s.handleEvent(a)}),s[ho])}function me(){_t.call(this),this.i=new pi(this),this.M=this,this.F=null}k(me,_t),me.prototype[ir]=!0,me.prototype.removeEventListener=function(s,a,u,d){el(this,s,a,u,d)};function Ee(s,a){var u,d=s.F;if(d)for(u=[];d;d=d.F)u.push(d);if(s=s.M,d=a.type||a,typeof a=="string")a=new pe(a,s);else if(a instanceof pe)a.target=a.target||s;else{var E=a;a=new pe(d,s),y(a,E)}if(E=!0,u)for(var A=u.length-1;0<=A;A--){var P=a.g=u[A];E=mi(P,d,!0,a)&&E}if(P=a.g=s,E=mi(P,d,!0,a)&&E,E=mi(P,d,!1,a)&&E,u)for(A=0;A<u.length;A++)P=a.g=u[A],E=mi(P,d,!1,a)&&E}me.prototype.N=function(){if(me.aa.N.call(this),this.i){var s=this.i,a;for(a in s.g){for(var u=s.g[a],d=0;d<u.length;d++)fi(u[d]);delete s.g[a],s.h--}}this.F=null},me.prototype.K=function(s,a,u,d){return this.i.add(String(s),a,!1,u,d)},me.prototype.L=function(s,a,u,d){return this.i.add(String(s),a,!0,u,d)};function mi(s,a,u,d){if(a=s.i.g[String(a)],!a)return!0;a=a.concat();for(var E=!0,A=0;A<a.length;++A){var P=a[A];if(P&&!P.da&&P.capture==u){var z=P.listener,fe=P.ha||P.src;P.fa&&so(s.i,P),E=z.call(fe,d)!==!1&&E}}return E&&!d.defaultPrevented}function nl(s,a,u){if(typeof s=="function")u&&(s=C(s,u));else if(s&&typeof s.handleEvent=="function")s=C(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(a)?-1:l.setTimeout(s,a||0)}function rl(s){s.g=nl(()=>{s.g=null,s.i&&(s.i=!1,rl(s))},s.l);let a=s.h;s.h=null,s.m.apply(null,a)}class Jp extends _t{constructor(a,u){super(),this.m=a,this.l=u,this.h=null,this.i=!1,this.g=null}j(a){this.h=arguments,this.g?this.i=!0:rl(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function sr(s){_t.call(this),this.h=s,this.g={}}k(sr,_t);var il=[];function sl(s){ue(s.g,function(a,u){this.g.hasOwnProperty(u)&&uo(a)},s),s.g={}}sr.prototype.N=function(){sr.aa.N.call(this),sl(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var po=l.JSON.stringify,Yp=l.JSON.parse,Xp=class{stringify(s){return l.JSON.stringify(s,void 0)}parse(s){return l.JSON.parse(s,void 0)}};function mo(){}mo.prototype.h=null;function ol(s){return s.h||(s.h=s.i())}function al(){}var or={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function go(){pe.call(this,"d")}k(go,pe);function _o(){pe.call(this,"c")}k(_o,pe);var Ut={},cl=null;function gi(){return cl=cl||new me}Ut.La="serverreachability";function ul(s){pe.call(this,Ut.La,s)}k(ul,pe);function ar(s){let a=gi();Ee(a,new ul(a))}Ut.STAT_EVENT="statevent";function ll(s,a){pe.call(this,Ut.STAT_EVENT,s),this.stat=a}k(ll,pe);function Te(s){let a=gi();Ee(a,new ll(a,s))}Ut.Ma="timingevent";function hl(s,a){pe.call(this,Ut.Ma,s),this.size=a}k(hl,pe);function cr(s,a){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){s()},a)}function ur(){this.g=!0}ur.prototype.xa=function(){this.g=!1};function Zp(s,a,u,d,E,A){s.info(function(){if(s.g)if(A)for(var P="",z=A.split("&"),fe=0;fe<z.length;fe++){var q=z[fe].split("=");if(1<q.length){var ge=q[0];q=q[1];var _e=ge.split("_");P=2<=_e.length&&_e[1]=="type"?P+(ge+"="+q+"&"):P+(ge+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+d+") [attempt "+E+"]: "+a+`
`+u+`
`+P})}function em(s,a,u,d,E,A,P){s.info(function(){return"XMLHTTP RESP ("+d+") [ attempt "+E+"]: "+a+`
`+u+`
`+A+" "+P})}function pn(s,a,u,d){s.info(function(){return"XMLHTTP TEXT ("+a+"): "+nm(s,u)+(d?" "+d:"")})}function tm(s,a){s.info(function(){return"TIMEOUT: "+a})}ur.prototype.info=function(){};function nm(s,a){if(!s.g)return a;if(!a)return null;try{var u=JSON.parse(a);if(u){for(s=0;s<u.length;s++)if(Array.isArray(u[s])){var d=u[s];if(!(2>d.length)){var E=d[1];if(Array.isArray(E)&&!(1>E.length)){var A=E[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<E.length;P++)E[P]=""}}}}return po(u)}catch{return a}}var _i={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yo;function yi(){}k(yi,mo),yi.prototype.g=function(){return new XMLHttpRequest},yi.prototype.i=function(){return{}},yo=new yi;function yt(s,a,u,d){this.j=s,this.i=a,this.l=u,this.R=d||1,this.U=new sr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fl}function fl(){this.i=null,this.g="",this.h=!1}var pl={},vo={};function wo(s,a,u){s.L=1,s.v=Ei(tt(a)),s.m=u,s.P=!0,ml(s,null)}function ml(s,a){s.F=Date.now(),vi(s),s.A=tt(s.v);var u=s.A,d=s.R;Array.isArray(d)||(d=[String(d)]),Pl(u.i,"t",d),s.C=0,u=s.j.J,s.h=new fl,s.g=Hl(s.j,u?a:null,!s.m),0<s.O&&(s.M=new Jp(C(s.Y,s,s.g),s.O)),a=s.U,u=s.g,d=s.ca;var E="readystatechange";Array.isArray(E)||(E&&(il[0]=E.toString()),E=il);for(var A=0;A<E.length;A++){var P=Yu(u,E[A],d||a.handleEvent,!1,a.h||a);if(!P)break;a.g[P.key]=P}a=s.H?p(s.H):{},s.m?(s.u||(s.u="POST"),a["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,a)):(s.u="GET",s.g.ea(s.A,s.u,null,a)),ar(),Zp(s.i,s.u,s.A,s.l,s.R,s.m)}yt.prototype.ca=function(s){s=s.target;let a=this.M;a&&nt(s)==3?a.j():this.Y(s)},yt.prototype.Y=function(s){try{if(s==this.g)e:{let _e=nt(this.g);var a=this.g.Ba();let _n=this.g.Z();if(!(3>_e)&&(_e!=3||this.g&&(this.h.h||this.g.oa()||Ml(this.g)))){this.J||_e!=4||a==7||(a==8||0>=_n?ar(3):ar(2)),Io(this);var u=this.g.Z();this.X=u;t:if(gl(this)){var d=Ml(this.g);s="";var E=d.length,A=nt(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Bt(this),lr(this);var P="";break t}this.h.i=new l.TextDecoder}for(a=0;a<E;a++)this.h.h=!0,s+=this.h.i.decode(d[a],{stream:!(A&&a==E-1)});d.length=0,this.h.g+=s,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=u==200,em(this.i,this.u,this.A,this.l,this.R,_e,u),this.o){if(this.T&&!this.K){t:{if(this.g){var z,fe=this.g;if((z=fe.g?fe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!H(z)){var q=z;break t}}q=null}if(u=q)pn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Eo(this,u);else{this.o=!1,this.s=3,Te(12),Bt(this),lr(this);break e}}if(this.P){u=!0;let Me;for(;!this.J&&this.C<P.length;)if(Me=rm(this,P),Me==vo){_e==4&&(this.s=4,Te(14),u=!1),pn(this.i,this.l,null,"[Incomplete Response]");break}else if(Me==pl){this.s=4,Te(15),pn(this.i,this.l,P,"[Invalid Chunk]"),u=!1;break}else pn(this.i,this.l,Me,null),Eo(this,Me);if(gl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),_e!=4||P.length!=0||this.h.h||(this.s=1,Te(16),u=!1),this.o=this.o&&u,!u)pn(this.i,this.l,P,"[Invalid Chunked Response]"),Bt(this),lr(this);else if(0<P.length&&!this.W){this.W=!0;var ge=this.j;ge.g==this&&ge.ba&&!ge.M&&(ge.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),Ro(ge),ge.M=!0,Te(11))}}else pn(this.i,this.l,P,null),Eo(this,P);_e==4&&Bt(this),this.o&&!this.J&&(_e==4?$l(this.j,this):(this.o=!1,vi(this)))}else wm(this.g),u==400&&0<P.indexOf("Unknown SID")?(this.s=3,Te(12)):(this.s=0,Te(13)),Bt(this),lr(this)}}}catch{}finally{}};function gl(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function rm(s,a){var u=s.C,d=a.indexOf(`
`,u);return d==-1?vo:(u=Number(a.substring(u,d)),isNaN(u)?pl:(d+=1,d+u>a.length?vo:(a=a.slice(d,d+u),s.C=d+u,a)))}yt.prototype.cancel=function(){this.J=!0,Bt(this)};function vi(s){s.S=Date.now()+s.I,_l(s,s.I)}function _l(s,a){if(s.B!=null)throw Error("WatchDog timer not null");s.B=cr(C(s.ba,s),a)}function Io(s){s.B&&(l.clearTimeout(s.B),s.B=null)}yt.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(tm(this.i,this.A),this.L!=2&&(ar(),Te(17)),Bt(this),this.s=2,lr(this)):_l(this,this.S-s)};function lr(s){s.j.G==0||s.J||$l(s.j,s)}function Bt(s){Io(s);var a=s.M;a&&typeof a.ma=="function"&&a.ma(),s.M=null,sl(s.U),s.g&&(a=s.g,s.g=null,a.abort(),a.ma())}function Eo(s,a){try{var u=s.j;if(u.G!=0&&(u.g==s||To(u.h,s))){if(!s.K&&To(u.h,s)&&u.G==3){try{var d=u.Da.g.parse(a)}catch{d=null}if(Array.isArray(d)&&d.length==3){var E=d;if(E[0]==0){e:if(!u.u){if(u.g)if(u.g.F+3e3<s.F)Si(u),bi(u);else break e;So(u),Te(18)}}else u.za=E[1],0<u.za-u.T&&37500>E[2]&&u.F&&u.v==0&&!u.C&&(u.C=cr(C(u.Za,u),6e3));if(1>=wl(u.h)&&u.ca){try{u.ca()}catch{}u.ca=void 0}}else qt(u,11)}else if((s.K||u.g==s)&&Si(u),!H(a))for(E=u.Da.g.parse(a),a=0;a<E.length;a++){let q=E[a];if(u.T=q[0],q=q[1],u.G==2)if(q[0]=="c"){u.K=q[1],u.ia=q[2];let ge=q[3];ge!=null&&(u.la=ge,u.j.info("VER="+u.la));let _e=q[4];_e!=null&&(u.Aa=_e,u.j.info("SVER="+u.Aa));let _n=q[5];_n!=null&&typeof _n=="number"&&0<_n&&(d=1.5*_n,u.L=d,u.j.info("backChannelRequestTimeoutMs_="+d)),d=u;let Me=s.g;if(Me){let Pi=Me.g?Me.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Pi){var A=d.h;A.g||Pi.indexOf("spdy")==-1&&Pi.indexOf("quic")==-1&&Pi.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Ao(A,A.h),A.h=null))}if(d.D){let Po=Me.g?Me.g.getResponseHeader("X-HTTP-Session-Id"):null;Po&&(d.ya=Po,Y(d.I,d.D,Po))}}u.G=3,u.l&&u.l.ua(),u.ba&&(u.R=Date.now()-s.F,u.j.info("Handshake RTT: "+u.R+"ms")),d=u;var P=s;if(d.qa=Wl(d,d.J?d.ia:null,d.W),P.K){Il(d.h,P);var z=P,fe=d.L;fe&&(z.I=fe),z.B&&(Io(z),vi(z)),d.g=P}else jl(d);0<u.i.length&&Ci(u)}else q[0]!="stop"&&q[0]!="close"||qt(u,7);else u.G==3&&(q[0]=="stop"||q[0]=="close"?q[0]=="stop"?qt(u,7):Co(u):q[0]!="noop"&&u.l&&u.l.ta(q),u.v=0)}}ar(4)}catch{}}var im=class{constructor(s,a){this.g=s,this.map=a}};function yl(s){this.l=s||10,l.PerformanceNavigationTiming?(s=l.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function vl(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function wl(s){return s.h?1:s.g?s.g.size:0}function To(s,a){return s.h?s.h==a:s.g?s.g.has(a):!1}function Ao(s,a){s.g?s.g.add(a):s.h=a}function Il(s,a){s.h&&s.h==a?s.h=null:s.g&&s.g.has(a)&&s.g.delete(a)}yl.prototype.cancel=function(){if(this.i=El(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function El(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let a=s.i;for(let u of s.g.values())a=a.concat(u.D);return a}return M(s.i)}function sm(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(h(s)){for(var a=[],u=s.length,d=0;d<u;d++)a.push(s[d]);return a}a=[],u=0;for(d in s)a[u++]=s[d];return a}function om(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(h(s)||typeof s=="string"){var a=[];s=s.length;for(var u=0;u<s;u++)a.push(u);return a}a=[],u=0;for(let d in s)a[u++]=d;return a}}}function Tl(s,a){if(s.forEach&&typeof s.forEach=="function")s.forEach(a,void 0);else if(h(s)||typeof s=="string")Array.prototype.forEach.call(s,a,void 0);else for(var u=om(s),d=sm(s),E=d.length,A=0;A<E;A++)a.call(void 0,d[A],u&&u[A],s)}var Al=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function am(s,a){if(s){s=s.split("&");for(var u=0;u<s.length;u++){var d=s[u].indexOf("="),E=null;if(0<=d){var A=s[u].substring(0,d);E=s[u].substring(d+1)}else A=s[u];a(A,E?decodeURIComponent(E.replace(/\+/g," ")):"")}}}function jt(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof jt){this.h=s.h,wi(this,s.j),this.o=s.o,this.g=s.g,Ii(this,s.s),this.l=s.l;var a=s.i,u=new fr;u.i=a.i,a.g&&(u.g=new Map(a.g),u.h=a.h),bl(this,u),this.m=s.m}else s&&(a=String(s).match(Al))?(this.h=!1,wi(this,a[1]||"",!0),this.o=hr(a[2]||""),this.g=hr(a[3]||"",!0),Ii(this,a[4]),this.l=hr(a[5]||"",!0),bl(this,a[6]||"",!0),this.m=hr(a[7]||"")):(this.h=!1,this.i=new fr(null,this.h))}jt.prototype.toString=function(){var s=[],a=this.j;a&&s.push(dr(a,Cl,!0),":");var u=this.g;return(u||a=="file")&&(s.push("//"),(a=this.o)&&s.push(dr(a,Cl,!0),"@"),s.push(encodeURIComponent(String(u)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u=this.s,u!=null&&s.push(":",String(u))),(u=this.l)&&(this.g&&u.charAt(0)!="/"&&s.push("/"),s.push(dr(u,u.charAt(0)=="/"?lm:um,!0))),(u=this.i.toString())&&s.push("?",u),(u=this.m)&&s.push("#",dr(u,dm)),s.join("")};function tt(s){return new jt(s)}function wi(s,a,u){s.j=u?hr(a,!0):a,s.j&&(s.j=s.j.replace(/:$/,""))}function Ii(s,a){if(a){if(a=Number(a),isNaN(a)||0>a)throw Error("Bad port number "+a);s.s=a}else s.s=null}function bl(s,a,u){a instanceof fr?(s.i=a,fm(s.i,s.h)):(u||(a=dr(a,hm)),s.i=new fr(a,s.h))}function Y(s,a,u){s.i.set(a,u)}function Ei(s){return Y(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function hr(s,a){return s?a?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function dr(s,a,u){return typeof s=="string"?(s=encodeURI(s).replace(a,cm),u&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function cm(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var Cl=/[#\/\?@]/g,um=/[#\?:]/g,lm=/[#\?]/g,hm=/[#\?@]/g,dm=/#/g;function fr(s,a){this.h=this.g=null,this.i=s||null,this.j=!!a}function vt(s){s.g||(s.g=new Map,s.h=0,s.i&&am(s.i,function(a,u){s.add(decodeURIComponent(a.replace(/\+/g," ")),u)}))}n=fr.prototype,n.add=function(s,a){vt(this),this.i=null,s=mn(this,s);var u=this.g.get(s);return u||this.g.set(s,u=[]),u.push(a),this.h+=1,this};function Sl(s,a){vt(s),a=mn(s,a),s.g.has(a)&&(s.i=null,s.h-=s.g.get(a).length,s.g.delete(a))}function Rl(s,a){return vt(s),a=mn(s,a),s.g.has(a)}n.forEach=function(s,a){vt(this),this.g.forEach(function(u,d){u.forEach(function(E){s.call(a,E,d,this)},this)},this)},n.na=function(){vt(this);let s=Array.from(this.g.values()),a=Array.from(this.g.keys()),u=[];for(let d=0;d<a.length;d++){let E=s[d];for(let A=0;A<E.length;A++)u.push(a[d])}return u},n.V=function(s){vt(this);let a=[];if(typeof s=="string")Rl(this,s)&&(a=a.concat(this.g.get(mn(this,s))));else{s=Array.from(this.g.values());for(let u=0;u<s.length;u++)a=a.concat(s[u])}return a},n.set=function(s,a){return vt(this),this.i=null,s=mn(this,s),Rl(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[a]),this.h+=1,this},n.get=function(s,a){return s?(s=this.V(s),0<s.length?String(s[0]):a):a};function Pl(s,a,u){Sl(s,a),0<u.length&&(s.i=null,s.g.set(mn(s,a),M(u)),s.h+=u.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],a=Array.from(this.g.keys());for(var u=0;u<a.length;u++){var d=a[u];let A=encodeURIComponent(String(d)),P=this.V(d);for(d=0;d<P.length;d++){var E=A;P[d]!==""&&(E+="="+encodeURIComponent(String(P[d]))),s.push(E)}}return this.i=s.join("&")};function mn(s,a){return a=String(a),s.j&&(a=a.toLowerCase()),a}function fm(s,a){a&&!s.j&&(vt(s),s.i=null,s.g.forEach(function(u,d){var E=d.toLowerCase();d!=E&&(Sl(this,d),Pl(this,E,u))},s)),s.j=a}function pm(s,a){let u=new ur;if(l.Image){let d=new Image;d.onload=D(wt,u,"TestLoadImage: loaded",!0,a,d),d.onerror=D(wt,u,"TestLoadImage: error",!1,a,d),d.onabort=D(wt,u,"TestLoadImage: abort",!1,a,d),d.ontimeout=D(wt,u,"TestLoadImage: timeout",!1,a,d),l.setTimeout(function(){d.ontimeout&&d.ontimeout()},1e4),d.src=s}else a(!1)}function mm(s,a){let u=new ur,d=new AbortController,E=setTimeout(()=>{d.abort(),wt(u,"TestPingServer: timeout",!1,a)},1e4);fetch(s,{signal:d.signal}).then(A=>{clearTimeout(E),A.ok?wt(u,"TestPingServer: ok",!0,a):wt(u,"TestPingServer: server error",!1,a)}).catch(()=>{clearTimeout(E),wt(u,"TestPingServer: error",!1,a)})}function wt(s,a,u,d,E){try{E&&(E.onload=null,E.onerror=null,E.onabort=null,E.ontimeout=null),d(u)}catch{}}function gm(){this.g=new Xp}function _m(s,a,u){let d=u||"";try{Tl(s,function(E,A){let P=E;f(E)&&(P=po(E)),a.push(d+A+"="+encodeURIComponent(P))})}catch(E){throw a.push(d+"type="+encodeURIComponent("_badmap")),E}}function pr(s){this.l=s.Ub||null,this.j=s.eb||!1}k(pr,mo),pr.prototype.g=function(){return new Ti(this.l,this.j)},pr.prototype.i=function(s){return function(){return s}}({});function Ti(s,a){me.call(this),this.D=s,this.o=a,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Ti,me),n=Ti.prototype,n.open=function(s,a){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=a,this.readyState=1,gr(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let a={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(a.body=s),(this.D||l).fetch(new Request(this.A,a)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,mr(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,gr(this)),this.g&&(this.readyState=3,gr(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dl(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dl(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var a=s.value?s.value:new Uint8Array(0);(a=this.v.decode(a,{stream:!s.done}))&&(this.response=this.responseText+=a)}s.done?mr(this):gr(this),this.readyState==3&&Dl(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,mr(this))},n.Qa=function(s){this.g&&(this.response=s,mr(this))},n.ga=function(){this.g&&mr(this)};function mr(s){s.readyState=4,s.l=null,s.j=null,s.v=null,gr(s)}n.setRequestHeader=function(s,a){this.u.append(s,a)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],a=this.h.entries();for(var u=a.next();!u.done;)u=u.value,s.push(u[0]+": "+u[1]),u=a.next();return s.join(`\r
`)};function gr(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(Ti.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function kl(s){let a="";return ue(s,function(u,d){a+=d,a+=":",a+=u,a+=`\r
`}),a}function bo(s,a,u){e:{for(d in u){var d=!1;break e}d=!0}d||(u=kl(u),typeof s=="string"?u!=null&&encodeURIComponent(String(u)):Y(s,a,u))}function X(s){me.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(X,me);var ym=/^https?$/i,vm=["POST","PUT"];n=X.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,a,u,d){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);a=a?a.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yo.g(),this.v=this.o?ol(this.o):ol(yo),this.g.onreadystatechange=C(this.Ea,this);try{this.B=!0,this.g.open(a,String(s),!0),this.B=!1}catch(A){Nl(this,A);return}if(s=u||"",u=new Map(this.headers),d)if(Object.getPrototypeOf(d)===Object.prototype)for(var E in d)u.set(E,d[E]);else if(typeof d.keys=="function"&&typeof d.get=="function")for(let A of d.keys())u.set(A,d.get(A));else throw Error("Unknown input type for opt_headers: "+String(d));d=Array.from(u.keys()).find(A=>A.toLowerCase()=="content-type"),E=l.FormData&&s instanceof l.FormData,!(0<=Array.prototype.indexOf.call(vm,a,void 0))||d||E||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of u)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{xl(this),this.u=!0,this.g.send(s),this.u=!1}catch(A){Nl(this,A)}};function Nl(s,a){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=a,s.m=5,Vl(s),Ai(s)}function Vl(s){s.A||(s.A=!0,Ee(s,"complete"),Ee(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,Ee(this,"complete"),Ee(this,"abort"),Ai(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ai(this,!0)),X.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ol(this):this.bb())},n.bb=function(){Ol(this)};function Ol(s){if(s.h&&typeof c<"u"&&(!s.v[1]||nt(s)!=4||s.Z()!=2)){if(s.u&&nt(s)==4)nl(s.Ea,0,s);else if(Ee(s,"readystatechange"),nt(s)==4){s.h=!1;try{let P=s.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var a=!0;break e;default:a=!1}var u;if(!(u=a)){var d;if(d=P===0){var E=String(s.D).match(Al)[1]||null;!E&&l.self&&l.self.location&&(E=l.self.location.protocol.slice(0,-1)),d=!ym.test(E?E.toLowerCase():"")}u=d}if(u)Ee(s,"complete"),Ee(s,"success");else{s.m=6;try{var A=2<nt(s)?s.g.statusText:""}catch{A=""}s.l=A+" ["+s.Z()+"]",Vl(s)}}finally{Ai(s)}}}}function Ai(s,a){if(s.g){xl(s);let u=s.g,d=s.v[0]?()=>{}:null;s.g=null,s.v=null,a||Ee(s,"ready");try{u.onreadystatechange=d}catch{}}}function xl(s){s.I&&(l.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function nt(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<nt(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var a=this.g.responseText;return s&&a.indexOf(s)==0&&(a=a.substring(s.length)),Yp(a)}};function Ml(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function wm(s){let a={};s=(s.g&&2<=nt(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let d=0;d<s.length;d++){if(H(s[d]))continue;var u=w(s[d]);let E=u[0];if(u=u[1],typeof u!="string")continue;u=u.trim();let A=a[E]||[];a[E]=A,A.push(u)}I(a,function(d){return d.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function _r(s,a,u){return u&&u.internalChannelParams&&u.internalChannelParams[s]||a}function Fl(s){this.Aa=0,this.i=[],this.j=new ur,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=_r("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=_r("baseRetryDelayMs",5e3,s),this.cb=_r("retryDelaySeedMs",1e4,s),this.Wa=_r("forwardChannelMaxRetries",2,s),this.wa=_r("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new yl(s&&s.concurrentRequestLimit),this.Da=new gm,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Fl.prototype,n.la=8,n.G=1,n.connect=function(s,a,u,d){Te(0),this.W=s,this.H=a||{},u&&d!==void 0&&(this.H.OSID=u,this.H.OAID=d),this.F=this.X,this.I=Wl(this,null,this.W),Ci(this)};function Co(s){if(Ll(s),s.G==3){var a=s.U++,u=tt(s.I);if(Y(u,"SID",s.K),Y(u,"RID",a),Y(u,"TYPE","terminate"),yr(s,u),a=new yt(s,s.j,a),a.L=2,a.v=Ei(tt(u)),u=!1,l.navigator&&l.navigator.sendBeacon)try{u=l.navigator.sendBeacon(a.v.toString(),"")}catch{}!u&&l.Image&&(new Image().src=a.v,u=!0),u||(a.g=Hl(a.j,null),a.g.ea(a.v)),a.F=Date.now(),vi(a)}zl(s)}function bi(s){s.g&&(Ro(s),s.g.cancel(),s.g=null)}function Ll(s){bi(s),s.u&&(l.clearTimeout(s.u),s.u=null),Si(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&l.clearTimeout(s.s),s.s=null)}function Ci(s){if(!vl(s.h)&&!s.s){s.s=!0;var a=s.Ga;tr||Ju(),nr||(tr(),nr=!0),io.add(a,s),s.B=0}}function Im(s,a){return wl(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=a.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=cr(C(s.Ga,s,a),Gl(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let E=new yt(this,this.j,s),A=this.o;if(this.S&&(A?(A=p(A),y(A,this.S)):A=this.S),this.m!==null||this.O||(E.H=A,A=null),this.P)e:{for(var a=0,u=0;u<this.i.length;u++){t:{var d=this.i[u];if("__data__"in d.map&&(d=d.map.__data__,typeof d=="string")){d=d.length;break t}d=void 0}if(d===void 0)break;if(a+=d,4096<a){a=u;break e}if(a===4096||u===this.i.length-1){a=u+1;break e}}a=1e3}else a=1e3;a=Bl(this,E,a),u=tt(this.I),Y(u,"RID",s),Y(u,"CVER",22),this.D&&Y(u,"X-HTTP-Session-Id",this.D),yr(this,u),A&&(this.O?a="headers="+encodeURIComponent(String(kl(A)))+"&"+a:this.m&&bo(u,this.m,A)),Ao(this.h,E),this.Ua&&Y(u,"TYPE","init"),this.P?(Y(u,"$req",a),Y(u,"SID","null"),E.T=!0,wo(E,u,null)):wo(E,u,a),this.G=2}}else this.G==3&&(s?Ul(this,s):this.i.length==0||vl(this.h)||Ul(this))};function Ul(s,a){var u;a?u=a.l:u=s.U++;let d=tt(s.I);Y(d,"SID",s.K),Y(d,"RID",u),Y(d,"AID",s.T),yr(s,d),s.m&&s.o&&bo(d,s.m,s.o),u=new yt(s,s.j,u,s.B+1),s.m===null&&(u.H=s.o),a&&(s.i=a.D.concat(s.i)),a=Bl(s,u,1e3),u.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),Ao(s.h,u),wo(u,d,a)}function yr(s,a){s.H&&ue(s.H,function(u,d){Y(a,d,u)}),s.l&&Tl({},function(u,d){Y(a,d,u)})}function Bl(s,a,u){u=Math.min(s.i.length,u);var d=s.l?C(s.l.Na,s.l,s):null;e:{var E=s.i;let A=-1;for(;;){let P=["count="+u];A==-1?0<u?(A=E[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let z=!0;for(let fe=0;fe<u;fe++){let q=E[fe].g,ge=E[fe].map;if(q-=A,0>q)A=Math.max(0,E[fe].g-100),z=!1;else try{_m(ge,P,"req"+q+"_")}catch{d&&d(ge)}}if(z){d=P.join("&");break e}}}return s=s.i.splice(0,u),a.D=s,d}function jl(s){if(!s.g&&!s.u){s.Y=1;var a=s.Fa;tr||Ju(),nr||(tr(),nr=!0),io.add(a,s),s.v=0}}function So(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=cr(C(s.Fa,s),Gl(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,ql(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=cr(C(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Te(10),bi(this),ql(this))};function Ro(s){s.A!=null&&(l.clearTimeout(s.A),s.A=null)}function ql(s){s.g=new yt(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var a=tt(s.qa);Y(a,"RID","rpc"),Y(a,"SID",s.K),Y(a,"AID",s.T),Y(a,"CI",s.F?"0":"1"),!s.F&&s.ja&&Y(a,"TO",s.ja),Y(a,"TYPE","xmlhttp"),yr(s,a),s.m&&s.o&&bo(a,s.m,s.o),s.L&&(s.g.I=s.L);var u=s.g;s=s.ia,u.L=1,u.v=Ei(tt(a)),u.m=null,u.P=!0,ml(u,s)}n.Za=function(){this.C!=null&&(this.C=null,bi(this),So(this),Te(19))};function Si(s){s.C!=null&&(l.clearTimeout(s.C),s.C=null)}function $l(s,a){var u=null;if(s.g==a){Si(s),Ro(s),s.g=null;var d=2}else if(To(s.h,a))u=a.D,Il(s.h,a),d=1;else return;if(s.G!=0){if(a.o)if(d==1){u=a.m?a.m.length:0,a=Date.now()-a.F;var E=s.B;d=gi(),Ee(d,new hl(d,u)),Ci(s)}else jl(s);else if(E=a.s,E==3||E==0&&0<a.X||!(d==1&&Im(s,a)||d==2&&So(s)))switch(u&&0<u.length&&(a=s.h,a.i=a.i.concat(u)),E){case 1:qt(s,5);break;case 4:qt(s,10);break;case 3:qt(s,6);break;default:qt(s,2)}}}function Gl(s,a){let u=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(u*=2),u*a}function qt(s,a){if(s.j.info("Error code "+a),a==2){var u=C(s.fb,s),d=s.Xa;let E=!d;d=new jt(d||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||wi(d,"https"),Ei(d),E?pm(d.toString(),u):mm(d.toString(),u)}else Te(2);s.G=0,s.l&&s.l.sa(a),zl(s),Ll(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),Te(2)):(this.j.info("Failed to ping google.com"),Te(1))};function zl(s){if(s.G=0,s.ka=[],s.l){let a=El(s.h);(a.length!=0||s.i.length!=0)&&(V(s.ka,a),V(s.ka,s.i),s.h.i.length=0,M(s.i),s.i.length=0),s.l.ra()}}function Wl(s,a,u){var d=u instanceof jt?tt(u):new jt(u);if(d.g!="")a&&(d.g=a+"."+d.g),Ii(d,d.s);else{var E=l.location;d=E.protocol,a=a?a+"."+E.hostname:E.hostname,E=+E.port;var A=new jt(null);d&&wi(A,d),a&&(A.g=a),E&&Ii(A,E),u&&(A.l=u),d=A}return u=s.D,a=s.ya,u&&a&&Y(d,u,a),Y(d,"VER",s.la),yr(s,d),d}function Hl(s,a,u){if(a&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return a=s.Ca&&!s.pa?new X(new pr({eb:u})):new X(s.pa),a.Ha(s.J),a}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kl(){}n=Kl.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ri(){}Ri.prototype.g=function(s,a){return new Se(s,a)};function Se(s,a){me.call(this),this.g=new Fl(a),this.l=s,this.h=a&&a.messageUrlParams||null,s=a&&a.messageHeaders||null,a&&a.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=a&&a.initMessageHeaders||null,a&&a.messageContentType&&(s?s["X-WebChannel-Content-Type"]=a.messageContentType:s={"X-WebChannel-Content-Type":a.messageContentType}),a&&a.va&&(s?s["X-WebChannel-Client-Profile"]=a.va:s={"X-WebChannel-Client-Profile":a.va}),this.g.S=s,(s=a&&a.Sb)&&!H(s)&&(this.g.m=s),this.v=a&&a.supportsCrossDomainXhr||!1,this.u=a&&a.sendRawJson||!1,(a=a&&a.httpSessionIdParam)&&!H(a)&&(this.g.D=a,s=this.h,s!==null&&a in s&&(s=this.h,a in s&&delete s[a])),this.j=new gn(this)}k(Se,me),Se.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Se.prototype.close=function(){Co(this.g)},Se.prototype.o=function(s){var a=this.g;if(typeof s=="string"){var u={};u.__data__=s,s=u}else this.u&&(u={},u.__data__=po(s),s=u);a.i.push(new im(a.Ya++,s)),a.G==3&&Ci(a)},Se.prototype.N=function(){this.g.l=null,delete this.j,Co(this.g),delete this.g,Se.aa.N.call(this)};function Ql(s){go.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var a=s.__sm__;if(a){e:{for(let u in a){s=u;break e}s=void 0}(this.i=s)&&(s=this.i,a=a!==null&&s in a?a[s]:void 0),this.data=a}else this.data=s}k(Ql,go);function Jl(){_o.call(this),this.status=1}k(Jl,_o);function gn(s){this.g=s}k(gn,Kl),gn.prototype.ua=function(){Ee(this.g,"a")},gn.prototype.ta=function(s){Ee(this.g,new Ql(s))},gn.prototype.sa=function(s){Ee(this.g,new Jl)},gn.prototype.ra=function(){Ee(this.g,"b")},Ri.prototype.createWebChannel=Ri.prototype.g,Se.prototype.send=Se.prototype.o,Se.prototype.open=Se.prototype.m,Se.prototype.close=Se.prototype.close,ac=ht.createWebChannelTransport=function(){return new Ri},oc=ht.getStatEventTarget=function(){return gi()},sc=ht.Event=Ut,as=ht.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},_i.NO_ERROR=0,_i.TIMEOUT=8,_i.HTTP_ERROR=6,$r=ht.ErrorCode=_i,dl.COMPLETE="complete",ic=ht.EventType=dl,al.EventType=or,or.OPEN="a",or.CLOSE="b",or.ERROR="c",or.MESSAGE="d",me.prototype.listen=me.prototype.K,Pn=ht.WebChannel=al,rc=ht.FetchXmlHttpFactory=pr,X.prototype.listenOnce=X.prototype.L,X.prototype.getLastError=X.prototype.Ka,X.prototype.getLastErrorCode=X.prototype.Ba,X.prototype.getStatus=X.prototype.Z,X.prototype.getResponseJson=X.prototype.Oa,X.prototype.getResponseText=X.prototype.oa,X.prototype.send=X.prototype.ea,X.prototype.setWithCredentials=X.prototype.Ha,nc=ht.XhrIo=X}).apply(typeof os<"u"?os:typeof self<"u"?self:typeof window<"u"?window:{});var Kd="@firebase/firestore";var he=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};he.UNAUTHENTICATED=new he(null),he.GOOGLE_CREDENTIALS=new he("google-credentials-uid"),he.FIRST_PARTY=new he("first-party-uid"),he.MOCK_USER=new he("mock-user");var Hn="10.13.1";var on=new Ct("@firebase/firestore");function Gr(){return on.logLevel}function N(n,...e){if(on.logLevel<=U.DEBUG){let t=e.map(Pu);on.debug(`Firestore (${Hn}): ${n}`,...t)}}function an(n,...e){if(on.logLevel<=U.ERROR){let t=e.map(Pu);on.error(`Firestore (${Hn}): ${n}`,...t)}}function fs(n,...e){if(on.logLevel<=U.WARN){let t=e.map(Pu);on.warn(`Firestore (${Hn}): ${n}`,...t)}}function Pu(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function B(n="Unexpected state"){let e=`FIRESTORE (${Hn}) INTERNAL ASSERTION FAILED: `+n;throw an(e),new Error(e)}function ce(n,e){n||B()}function K(n,e){return n}var S={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},O=class extends De{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var dt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ps=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},hc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(he.UNAUTHENTICATED))}shutdown(){}},dc=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},fc=class{constructor(e){this.t=e,this.currentUser=he.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let r=this.i,i=h=>this.i!==r?(r=this.i,t(h)):Promise.resolve(),o=new dt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new dt,e.enqueueRetryable(()=>i(this.currentUser))};let c=()=>{let h=o;e.enqueueRetryable(()=>_(this,null,function*(){yield h.promise,yield i(this.currentUser)}))},l=h=>{N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),c()};this.t.onInit(h=>l(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?l(h):(N("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new dt)}},0),c()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new ps(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new he(e)}},pc=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=he.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},mc=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new pc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(he.FIRST_PARTY))}shutdown(){}invalidateToken(){}},gc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},_c=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let r=o=>{o.error!=null&&N("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let c=o.token!==this.R;return this.R=o.token,N("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ce(typeof t.token=="string"),this.R=t.token,new gc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function Av(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var ms=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=Av(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function W(n,e){return n<e?-1:n>e?1:0}function Vn(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Ie=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(S.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new O(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(S.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?W(this.nanoseconds,e.nanoseconds):W(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ie(0,0))}static max(){return new n(new Ie(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var gs=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&B(),r===void 0?r=e.length-t:r>e.length-t&&B(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),c=t.get(i);if(o<c)return-1;if(o>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},se=class n extends gs{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new O(S.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},bv=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ke=class n extends gs{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return bv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new O(S.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},c=!1;for(;i<e.length;){let l=e[i];if(l==="\\"){if(i+1===e.length)throw new O(S.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let h=e[i+1];if(h!=="\\"&&h!=="."&&h!=="`")throw new O(S.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=h,i+=2}else l==="`"?(c=!c,i++):l!=="."||c?(r+=l,i++):(o(),i++)}if(o(),c)throw new O(S.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var F=class n{constructor(e){this.path=e}static fromPath(e){return new n(se.fromString(e))}static fromName(e){return new n(se.fromString(e).popFirst(5))}static empty(){return new n(se.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&se.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return se.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new se(e.slice()))}};var yc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};yc.UNKNOWN_ID=-1;function Cv(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Z.fromTimestamp(r===1e9?new Ie(t+1,0):new Ie(t,r));return new cn(i,F.empty(),e)}function Sv(n){return new cn(n.readTime,n.key,-1)}var cn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(Z.min(),F.empty(),-1)}static max(){return new n(Z.max(),F.empty(),-1)}};function Rv(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=F.comparator(n.documentKey,e.documentKey),t!==0?t:W(n.largestBatchId,e.largestBatchId))}var Pv="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",vc=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function _f(n){return _(this,null,function*(){if(n.code!==S.FAILED_PRECONDITION||n.message!==Pv)throw n;N("LocalStore","Unexpectedly lost primary lease")})}var R=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&B(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,c=!1;e.forEach(l=>{++i,l.next(()=>{++o,c&&o===i&&t()},h=>r(h))}),c=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,c=new Array(o),l=0;for(let h=0;h<o;h++){let f=h;t(e[f]).next(v=>{c[f]=v,++l,l===o&&r(c)},v=>i(v))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function Dv(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xs(n){return n.name==="IndexedDbTransactionError"}var kv=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function Du(n){return n==null}function Jr(n){return n===0&&1/n==-1/0}function Nv(n){return typeof n=="number"&&Number.isInteger(n)&&!Jr(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var Vv=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bT=[...Vv,"documentOverlays"],Ov=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xv=Ov,Mv=[...xv,"indexConfiguration","indexState","indexEntries"];var CT=[...Mv,"globals"];function Qd(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ei(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function yf(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ne=class n{constructor(e,t){this.comparator=e,this.root=t||Xe.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kn(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kn(this.root,e,this.comparator,!1)}getReverseIterator(){return new kn(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kn(this.root,e,this.comparator,!0)}},kn=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Xe=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw B();let e=this.left.check();if(e!==this.right.check())throw B();return e+(this.isRed()?0:1)}};Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw B()}get value(){throw B()}get color(){throw B()}get left(){throw B()}get right(){throw B()}copy(e,t,r,i,o){return this}insert(e,t,r){return new Xe(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ce=class n{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new _s(this.data.getIterator())}getIteratorFrom(e){return new _s(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},_s=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Ye=class n{constructor(e){this.fields=e,e.sort(ke.comparator)}static empty(){return new n([])}unionWith(e){let t=new Ce(ke.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vn(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var wc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var pt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new wc("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let c=0;c<i.length;++c)o+=String.fromCharCode(i[c]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return W(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};pt.EMPTY_BYTE_STRING=new pt("");var Fv=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ot(n){if(ce(!!n),typeof n=="string"){let e=0,t=Fv.exec(n);if(ce(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ie(n.seconds),nanos:ie(n.nanos)}}function ie(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function On(n){return typeof n=="string"?pt.fromBase64String(n):pt.fromUint8Array(n)}function ku(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function vf(n){let e=n.mapValue.fields.__previous_value__;return ku(e)?vf(e):e}function ys(n){let e=Ot(n.mapValue.fields.__local_write_time__.timestampValue);return new Ie(e.seconds,e.nanos)}var Ic=class{constructor(e,t,r,i,o,c,l,h,f){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=c,this.autoDetectLongPolling=l,this.longPollingOptions=h,this.useFetchStreams=f}},Ec=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var cs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function xn(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ku(n)?4:If(n)?9007199254740991:wf(n)?10:11:B()}function Ze(n,e){if(n===e)return!0;let t=xn(n);if(t!==xn(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ys(n).isEqual(ys(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let c=Ot(i.timestampValue),l=Ot(o.timestampValue);return c.seconds===l.seconds&&c.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return On(i.bytesValue).isEqual(On(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ie(i.geoPointValue.latitude)===ie(o.geoPointValue.latitude)&&ie(i.geoPointValue.longitude)===ie(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ie(i.integerValue)===ie(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let c=ie(i.doubleValue),l=ie(o.doubleValue);return c===l?Jr(c)===Jr(l):isNaN(c)&&isNaN(l)}return!1}(n,e);case 9:return Vn(n.arrayValue.values||[],e.arrayValue.values||[],Ze);case 10:case 11:return function(i,o){let c=i.mapValue.fields||{},l=o.mapValue.fields||{};if(Qd(c)!==Qd(l))return!1;for(let h in c)if(c.hasOwnProperty(h)&&(l[h]===void 0||!Ze(c[h],l[h])))return!1;return!0}(n,e);default:return B()}}function Yr(n,e){return(n.values||[]).find(t=>Ze(t,e))!==void 0}function Mn(n,e){if(n===e)return 0;let t=xn(n),r=xn(e);if(t!==r)return W(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return W(n.booleanValue,e.booleanValue);case 2:return function(o,c){let l=ie(o.integerValue||o.doubleValue),h=ie(c.integerValue||c.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return Jd(n.timestampValue,e.timestampValue);case 4:return Jd(ys(n),ys(e));case 5:return W(n.stringValue,e.stringValue);case 6:return function(o,c){let l=On(o),h=On(c);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(o,c){let l=o.split("/"),h=c.split("/");for(let f=0;f<l.length&&f<h.length;f++){let v=W(l[f],h[f]);if(v!==0)return v}return W(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,c){let l=W(ie(o.latitude),ie(c.latitude));return l!==0?l:W(ie(o.longitude),ie(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Yd(n.arrayValue,e.arrayValue);case 10:return function(o,c){var l,h,f,v;let b=o.fields||{},C=c.fields||{},D=(l=b.value)===null||l===void 0?void 0:l.arrayValue,k=(h=C.value)===null||h===void 0?void 0:h.arrayValue,M=W(((f=D?.values)===null||f===void 0?void 0:f.length)||0,((v=k?.values)===null||v===void 0?void 0:v.length)||0);return M!==0?M:Yd(D,k)}(n.mapValue,e.mapValue);case 11:return function(o,c){if(o===cs.mapValue&&c===cs.mapValue)return 0;if(o===cs.mapValue)return 1;if(c===cs.mapValue)return-1;let l=o.fields||{},h=Object.keys(l),f=c.fields||{},v=Object.keys(f);h.sort(),v.sort();for(let b=0;b<h.length&&b<v.length;++b){let C=W(h[b],v[b]);if(C!==0)return C;let D=Mn(l[h[b]],f[v[b]]);if(D!==0)return D}return W(h.length,v.length)}(n.mapValue,e.mapValue);default:throw B()}}function Jd(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return W(n,e);let t=Ot(n),r=Ot(e),i=W(t.seconds,r.seconds);return i!==0?i:W(t.nanos,r.nanos)}function Yd(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=Mn(t[i],r[i]);if(o)return o}return W(t.length,r.length)}function Fn(n){return Tc(n)}function Tc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=Ot(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return On(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return F.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Tc(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let c of r)o?o=!1:i+=",",i+=`${c}:${Tc(t.fields[c])}`;return i+"}"}(n.mapValue):B()}function Ac(n){return!!n&&"integerValue"in n}function Nu(n){return!!n&&"arrayValue"in n}function hs(n){return!!n&&"mapValue"in n}function wf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Wr(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return ei(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Wr(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Wr(n.arrayValue.values[t]);return e}return Object.assign({},n)}function If(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Je=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!hs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wr(t)}setAll(e){let t=ke.emptyPath(),r={},i=[];e.forEach((c,l)=>{if(!t.isImmediateParentOf(l)){let h=this.getFieldsMap(t);this.applyChanges(h,r,i),r={},i=[],t=l.popLast()}c?r[l.lastSegment()]=Wr(c):i.push(l.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());hs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ze(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];hs(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){ei(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(Wr(this.value))}};function Ef(n){let e=[];return ei(n.fields,(t,r)=>{let i=new ke([t]);if(hs(r)){let o=Ef(r.mapValue).fields;if(o.length===0)e.push(i);else for(let c of o)e.push(i.child(c))}else e.push(i)}),new Ye(e)}var Ln=class n{constructor(e,t,r,i,o,c,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=c,this.documentState=l}static newInvalidDocument(e){return new n(e,0,Z.min(),Z.min(),Z.min(),Je.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,Z.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,Z.min(),Z.min(),Je.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Z.min(),Z.min(),Je.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Je.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Je.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Un=class{constructor(e,t){this.position=e,this.inclusive=t}};function Xd(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],c=n.position[i];if(o.field.isKeyField()?r=F.comparator(F.fromName(c.referenceValue),t.key):r=Mn(c,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function Zd(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Ze(n.position[t],e.position[t]))return!1;return!0}var Bn=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function Lv(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var vs=class{},de=class n extends vs{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Cc(e,t,r):t==="array-contains"?new Pc(e,r):t==="in"?new Dc(e,r):t==="not-in"?new kc(e,r):t==="array-contains-any"?new Nc(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Sc(e,r):new Rc(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Mn(t,this.value)):t!==null&&xn(this.value)===xn(t)&&this.matchesComparison(Mn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return B()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},xt=class n extends vs{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Tf(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Tf(n){return n.op==="and"}function Af(n){return Uv(n)&&Tf(n)}function Uv(n){for(let e of n.filters)if(e instanceof xt)return!1;return!0}function bc(n){if(n instanceof de)return n.field.canonicalString()+n.op.toString()+Fn(n.value);if(Af(n))return n.filters.map(e=>bc(e)).join(",");{let e=n.filters.map(t=>bc(t)).join(",");return`${n.op}(${e})`}}function bf(n,e){return n instanceof de?function(r,i){return i instanceof de&&r.op===i.op&&r.field.isEqual(i.field)&&Ze(r.value,i.value)}(n,e):n instanceof xt?function(r,i){return i instanceof xt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,c,l)=>o&&bf(c,i.filters[l]),!0):!1}(n,e):void B()}function Cf(n){return n instanceof de?function(t){return`${t.field.canonicalString()} ${t.op} ${Fn(t.value)}`}(n):n instanceof xt?function(t){return t.op.toString()+" {"+t.getFilters().map(Cf).join(" ,")+"}"}(n):"Filter"}var Cc=class extends de{constructor(e,t,r){super(e,t,r),this.key=F.fromName(r.referenceValue)}matches(e){let t=F.comparator(e.key,this.key);return this.matchesComparison(t)}},Sc=class extends de{constructor(e,t){super(e,"in",t),this.keys=Sf("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Rc=class extends de{constructor(e,t){super(e,"not-in",t),this.keys=Sf("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function Sf(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>F.fromName(r.referenceValue))}var Pc=class extends de{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return Nu(t)&&Yr(t.arrayValue,this.value)}},Dc=class extends de{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Yr(this.value.arrayValue,t)}},kc=class extends de{constructor(e,t){super(e,"not-in",t)}matches(e){if(Yr(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Yr(this.value.arrayValue,t)}},Nc=class extends de{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!Nu(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Yr(this.value.arrayValue,r))}};var Vc=class{constructor(e,t=null,r=[],i=[],o=null,c=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=c,this.endAt=l,this.ue=null}};function ef(n,e=null,t=[],r=[],i=null,o=null,c=null){return new Vc(n,e,t,r,i,o,c)}function Vu(n){let e=K(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>bc(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Du(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Fn(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Fn(r)).join(",")),e.ue=t}return e.ue}function Ou(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Lv(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!bf(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Zd(n.startAt,e.startAt)&&Zd(n.endAt,e.endAt)}var jn=class{constructor(e,t=null,r=[],i=[],o=null,c="F",l=null,h=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=c,this.startAt=l,this.endAt=h,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function Bv(n,e,t,r,i,o,c,l){return new jn(n,e,t,r,i,o,c,l)}function jv(n){return new jn(n)}function tf(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qv(n){return n.collectionGroup!==null}function Hr(n){let e=K(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let l=new Ce(ke.comparator);return c.filters.forEach(h=>{h.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Bn(o,r))}),t.has(ke.keyField().canonicalString())||e.ce.push(new Bn(ke.keyField(),r))}return e.ce}function rn(n){let e=K(n);return e.le||(e.le=$v(e,Hr(n))),e.le}function $v(n,e){if(n.limitType==="F")return ef(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Bn(i.field,o)});let t=n.endAt?new Un(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Un(n.startAt.position,n.startAt.inclusive):null;return ef(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Oc(n,e,t){return new jn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Rf(n,e){return Ou(rn(n),rn(e))&&n.limitType===e.limitType}function Pf(n){return`${Vu(rn(n))}|lt:${n.limitType}`}function zr(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Cf(i)).join(", ")}]`),Du(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(c){return`${c.field.canonicalString()} (${c.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>Fn(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>Fn(i)).join(",")),`Target(${r})`}(rn(n))}; limitType=${n.limitType})`}function xu(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):F.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of Hr(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(c,l,h){let f=Xd(c,l,h);return c.inclusive?f<=0:f<0}(r.startAt,Hr(r),i)||r.endAt&&!function(c,l,h){let f=Xd(c,l,h);return c.inclusive?f>=0:f>0}(r.endAt,Hr(r),i))}(n,e)}function Gv(n){return(e,t)=>{let r=!1;for(let i of Hr(n)){let o=zv(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function zv(n,e,t){let r=n.field.isKeyField()?F.comparator(e.key,t.key):function(o,c,l){let h=c.data.field(o),f=l.data.field(o);return h!==null&&f!==null?Mn(h,f):B()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return B()}}var Mt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){ei(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return yf(this.inner)}size(){return this.innerSize}};var Wv=new Ne(F.comparator);function ws(){return Wv}var Df=new Ne(F.comparator);function us(...n){let e=Df;for(let t of n)e=e.insert(t.key,t);return e}function kf(n){let e=Df;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function nn(){return Kr()}function Nf(){return Kr()}function Kr(){return new Mt(n=>n.toString(),(n,e)=>n.isEqual(e))}var Hv=new Ne(F.comparator),Kv=new Ce(F.comparator);function we(...n){let e=Kv;for(let t of n)e=e.add(t);return e}var Qv=new Ce(W);function Jv(){return Qv}function Mu(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Jr(e)?"-0":e}}function Vf(n){return{integerValue:""+n}}function Yv(n,e){return Nv(e)?Vf(e):Mu(n,e)}var qn=class{constructor(){this._=void 0}};function Xv(n,e,t){return n instanceof $n?function(i,o){let c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&ku(o)&&(o=vf(o)),o&&(c.fields.__previous_value__=o),{mapValue:c}}(t,e):n instanceof un?xf(n,e):n instanceof ln?Mf(n,e):function(i,o){let c=Of(i,o),l=nf(c)+nf(i.Pe);return Ac(c)&&Ac(i.Pe)?Vf(l):Mu(i.serializer,l)}(n,e)}function Zv(n,e,t){return n instanceof un?xf(n,e):n instanceof ln?Mf(n,e):t}function Of(n,e){return n instanceof Gn?function(r){return Ac(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var $n=class extends qn{},un=class extends qn{constructor(e){super(),this.elements=e}};function xf(n,e){let t=Ff(e);for(let r of n.elements)t.some(i=>Ze(i,r))||t.push(r);return{arrayValue:{values:t}}}var ln=class extends qn{constructor(e){super(),this.elements=e}};function Mf(n,e){let t=Ff(e);for(let r of n.elements)t=t.filter(i=>!Ze(i,r));return{arrayValue:{values:t}}}var Gn=class extends qn{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function nf(n){return ie(n.integerValue||n.doubleValue)}function Ff(n){return Nu(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function ew(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof un&&i instanceof un||r instanceof ln&&i instanceof ln?Vn(r.elements,i.elements,Ze):r instanceof Gn&&i instanceof Gn?Ze(r.Pe,i.Pe):r instanceof $n&&i instanceof $n}(n.transform,e.transform)}var xc=class{constructor(e,t){this.version=e,this.transformResults=t}},sn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function ds(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var zn=class{};function Lf(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Is(n.key,sn.none()):new hn(n.key,n.data,sn.none());{let t=n.data,r=Je.empty(),i=new Ce(ke.comparator);for(let o of e.fields)if(!i.has(o)){let c=t.field(o);c===null&&o.length>1&&(o=o.popLast(),c=t.field(o)),c===null?r.delete(o):r.set(o,c),i=i.add(o)}return new mt(n.key,r,new Ye(i.toArray()),sn.none())}}function tw(n,e,t){n instanceof hn?function(i,o,c){let l=i.value.clone(),h=sf(i.fieldTransforms,o,c.transformResults);l.setAll(h),o.convertToFoundDocument(c.version,l).setHasCommittedMutations()}(n,e,t):n instanceof mt?function(i,o,c){if(!ds(i.precondition,o))return void o.convertToUnknownDocument(c.version);let l=sf(i.fieldTransforms,o,c.transformResults),h=o.data;h.setAll(Uf(i)),h.setAll(l),o.convertToFoundDocument(c.version,h).setHasCommittedMutations()}(n,e,t):function(i,o,c){o.convertToNoDocument(c.version).setHasCommittedMutations()}(0,e,t)}function Qr(n,e,t,r){return n instanceof hn?function(o,c,l,h){if(!ds(o.precondition,c))return l;let f=o.value.clone(),v=of(o.fieldTransforms,h,c);return f.setAll(v),c.convertToFoundDocument(c.version,f).setHasLocalMutations(),null}(n,e,t,r):n instanceof mt?function(o,c,l,h){if(!ds(o.precondition,c))return l;let f=of(o.fieldTransforms,h,c),v=c.data;return v.setAll(Uf(o)),v.setAll(f),c.convertToFoundDocument(c.version,v).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(b=>b.field))}(n,e,t,r):function(o,c,l){return ds(o.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):l}(n,e,t)}function nw(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=Of(r.transform,i||null);o!=null&&(t===null&&(t=Je.empty()),t.set(r.field,o))}return t||null}function rf(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Vn(r,i,(o,c)=>ew(o,c))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var hn=class extends zn{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},mt=class extends zn{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Uf(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function sf(n,e,t){let r=new Map;ce(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],c=o.transform,l=e.data.field(o.field);r.set(o.field,Zv(c,l,t[i]))}return r}function of(n,e,t){let r=new Map;for(let i of n){let o=i.transform,c=t.data.field(i.field);r.set(i.field,Xv(o,c,e))}return r}var Is=class extends zn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Mc=class extends zn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Fc=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&tw(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=Qr(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=Qr(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Nf();return this.mutations.forEach(i=>{let o=e.get(i.key),c=o.overlayedDocument,l=this.applyToLocalView(c,o.mutatedFields);l=t.has(i.key)?null:l;let h=Lf(c,l);h!==null&&r.set(i.key,h),c.isValidDocument()||c.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),we())}isEqual(e){return this.batchId===e.batchId&&Vn(this.mutations,e.mutations,(t,r)=>rf(t,r))&&Vn(this.baseMutations,e.baseMutations,(t,r)=>rf(t,r))}},Lc=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ce(e.mutations.length===r.length);let i=function(){return Hv}(),o=e.mutations;for(let c=0;c<o.length;c++)i=i.insert(o[c].key,r[c].version);return new n(e,t,r,i)}};var Uc=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ne,j;function rw(n){switch(n){default:return B();case S.CANCELLED:case S.UNKNOWN:case S.DEADLINE_EXCEEDED:case S.RESOURCE_EXHAUSTED:case S.INTERNAL:case S.UNAVAILABLE:case S.UNAUTHENTICATED:return!1;case S.INVALID_ARGUMENT:case S.NOT_FOUND:case S.ALREADY_EXISTS:case S.PERMISSION_DENIED:case S.FAILED_PRECONDITION:case S.ABORTED:case S.OUT_OF_RANGE:case S.UNIMPLEMENTED:case S.DATA_LOSS:return!0}}function iw(n){if(n===void 0)return an("GRPC error has no .code"),S.UNKNOWN;switch(n){case ne.OK:return S.OK;case ne.CANCELLED:return S.CANCELLED;case ne.UNKNOWN:return S.UNKNOWN;case ne.DEADLINE_EXCEEDED:return S.DEADLINE_EXCEEDED;case ne.RESOURCE_EXHAUSTED:return S.RESOURCE_EXHAUSTED;case ne.INTERNAL:return S.INTERNAL;case ne.UNAVAILABLE:return S.UNAVAILABLE;case ne.UNAUTHENTICATED:return S.UNAUTHENTICATED;case ne.INVALID_ARGUMENT:return S.INVALID_ARGUMENT;case ne.NOT_FOUND:return S.NOT_FOUND;case ne.ALREADY_EXISTS:return S.ALREADY_EXISTS;case ne.PERMISSION_DENIED:return S.PERMISSION_DENIED;case ne.FAILED_PRECONDITION:return S.FAILED_PRECONDITION;case ne.ABORTED:return S.ABORTED;case ne.OUT_OF_RANGE:return S.OUT_OF_RANGE;case ne.UNIMPLEMENTED:return S.UNIMPLEMENTED;case ne.DATA_LOSS:return S.DATA_LOSS;default:return B()}}(j=ne||(ne={}))[j.OK=0]="OK",j[j.CANCELLED=1]="CANCELLED",j[j.UNKNOWN=2]="UNKNOWN",j[j.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",j[j.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",j[j.NOT_FOUND=5]="NOT_FOUND",j[j.ALREADY_EXISTS=6]="ALREADY_EXISTS",j[j.PERMISSION_DENIED=7]="PERMISSION_DENIED",j[j.UNAUTHENTICATED=16]="UNAUTHENTICATED",j[j.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",j[j.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",j[j.ABORTED=10]="ABORTED",j[j.OUT_OF_RANGE=11]="OUT_OF_RANGE",j[j.UNIMPLEMENTED=12]="UNIMPLEMENTED",j[j.INTERNAL=13]="INTERNAL",j[j.UNAVAILABLE=14]="UNAVAILABLE",j[j.DATA_LOSS=15]="DATA_LOSS";var RT=new tc([4294967295,4294967295],0);var Bc=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function jc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function ow(n,e){return jc(n,e.toTimestamp())}function Nn(n){return ce(!!n),Z.fromTimestamp(function(t){let r=Ot(t);return new Ie(r.seconds,r.nanos)}(n))}function Bf(n,e){return qc(n,e).canonicalString()}function qc(n,e){let t=function(i){return new se(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function aw(n){let e=se.fromString(n);return ce(mw(e)),e}function $c(n,e){return Bf(n.databaseId,e.path)}function cw(n){let e=aw(n);return e.length===4?se.emptyPath():lw(e)}function uw(n){return new se(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function lw(n){return ce(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function af(n,e,t){return{name:$c(n,e),fields:t.value.mapValue.fields}}function hw(n,e){let t;if(e instanceof hn)t={update:af(n,e.key,e.value)};else if(e instanceof Is)t={delete:$c(n,e.key)};else if(e instanceof mt)t={update:af(n,e.key,e.data),updateMask:pw(e.fieldMask)};else{if(!(e instanceof Mc))return B();t={verify:$c(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,c){let l=c.transform;if(l instanceof $n)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof un)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ln)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Gn)return{fieldPath:c.field.canonicalString(),increment:l.Pe};throw B()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:ow(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:B()}(n,e.precondition)),t}function dw(n,e){return n&&n.length>0?(ce(e!==void 0),n.map(t=>function(i,o){let c=i.updateTime?Nn(i.updateTime):Nn(o);return c.isEqual(Z.min())&&(c=Nn(o)),new xc(c,i.transformResults||[])}(t,e))):[]}function fw(n){let e=cw(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ce(r===1);let v=t.from[0];v.allDescendants?i=v.collectionId:e=e.child(v.collectionId)}let o=[];t.where&&(o=function(b){let C=jf(b);return C instanceof xt&&Af(C)?C.getFilters():[C]}(t.where));let c=[];t.orderBy&&(c=function(b){return b.map(C=>function(k){return new Bn(Dn(k.field),function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(C))}(t.orderBy));let l=null;t.limit&&(l=function(b){let C;return C=typeof b=="object"?b.value:b,Du(C)?null:C}(t.limit));let h=null;t.startAt&&(h=function(b){let C=!!b.before,D=b.values||[];return new Un(D,C)}(t.startAt));let f=null;return t.endAt&&(f=function(b){let C=!b.before,D=b.values||[];return new Un(D,C)}(t.endAt)),Bv(e,i,c,o,l,"F",h,f)}function jf(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Dn(t.unaryFilter.field);return de.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Dn(t.unaryFilter.field);return de.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Dn(t.unaryFilter.field);return de.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let c=Dn(t.unaryFilter.field);return de.create(c,"!=",{nullValue:"NULL_VALUE"});default:return B()}}(n):n.fieldFilter!==void 0?function(t){return de.create(Dn(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return B()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return xt.create(t.compositeFilter.filters.map(r=>jf(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return B()}}(t.compositeFilter.op))}(n):B()}function Dn(n){return ke.fromServerFormat(n.fieldPath)}function pw(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function mw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Gc=class{constructor(e){this.ct=e}};function gw(n){let e=fw({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Oc(e,e.limit,"L"):e}var Es=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ie(e.integerValue));else if("doubleValue"in e){let r=ie(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),Jr(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=Ot(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(On(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?If(e)?this.dt(t,Number.MAX_SAFE_INTEGER):wf(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):B()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let c="value",l=((i=(r=o[c].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ie(l)),this.Vt(c,t),this.Tt(o[c],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),F.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};Es.vt=new Es;var zc=class{constructor(){this.un=new Wc}addToCollectionParentIndex(e,t){return this.un.add(t),R.resolve()}getCollectionParents(e,t){return R.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return R.resolve()}deleteFieldIndex(e,t){return R.resolve()}deleteAllFieldIndexes(e){return R.resolve()}createTargetIndexes(e,t){return R.resolve()}getDocumentsMatchingTarget(e,t){return R.resolve(null)}getIndexType(e,t){return R.resolve(0)}getFieldIndexes(e,t){return R.resolve([])}getNextCollectionGroupToUpdate(e){return R.resolve(null)}getMinOffset(e,t){return R.resolve(cn.min())}getMinOffsetFromCollectionGroup(e,t){return R.resolve(cn.min())}updateCollectionGroup(e,t,r){return R.resolve()}updateIndexEntries(e,t){return R.resolve()}},Wc=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Ce(se.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ce(se.comparator)).toArray()}};var PT=new Uint8Array(0);var Qe=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Qe.DEFAULT_COLLECTION_PERCENTILE=10,Qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Qe.DEFAULT=new Qe(41943040,Qe.DEFAULT_COLLECTION_PERCENTILE,Qe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Qe.DISABLED=new Qe(-1,0,0);var Xr=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var Hc=class{constructor(){this.changes=new Mt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?R.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Kc=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Qc=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&Qr(r.mutation,i,Ye.empty(),Ie.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,we()).next(()=>r))}getLocalViewOfDocuments(e,t,r=we()){let i=nn();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let c=us();return o.forEach((l,h)=>{c=c.insert(l,h.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){let r=nn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,we()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((c,l)=>{t.set(c,l)})})}computeViews(e,t,r,i){let o=ws(),c=Kr(),l=function(){return Kr()}();return t.forEach((h,f)=>{let v=r.get(f.key);i.has(f.key)&&(v===void 0||v.mutation instanceof mt)?o=o.insert(f.key,f):v!==void 0?(c.set(f.key,v.mutation.getFieldMask()),Qr(v.mutation,f,v.mutation.getFieldMask(),Ie.now())):c.set(f.key,Ye.empty())}),this.recalculateAndSaveOverlays(e,o).next(h=>(h.forEach((f,v)=>c.set(f,v)),t.forEach((f,v)=>{var b;return l.set(f,new Kc(v,(b=c.get(f))!==null&&b!==void 0?b:null))}),l))}recalculateAndSaveOverlays(e,t){let r=Kr(),i=new Ne((c,l)=>c-l),o=we();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(let l of c)l.keys().forEach(h=>{let f=t.get(h);if(f===null)return;let v=r.get(h)||Ye.empty();v=l.applyToLocalView(f,v),r.set(h,v);let b=(i.get(l.batchId)||we()).add(h);i=i.insert(l.batchId,b)})}).next(()=>{let c=[],l=i.getReverseIterator();for(;l.hasNext();){let h=l.getNext(),f=h.key,v=h.value,b=Nf();v.forEach(C=>{if(!o.has(C)){let D=Lf(t.get(C),r.get(C));D!==null&&b.set(C,D),o=o.add(C)}}),c.push(this.documentOverlayCache.saveOverlays(e,f,b))}return R.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(c){return F.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qv(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let c=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):R.resolve(nn()),l=-1,h=o;return c.next(f=>R.forEach(f,(v,b)=>(l<b.largestBatchId&&(l=b.largestBatchId),o.get(v)?R.resolve():this.remoteDocumentCache.getEntry(e,v).next(C=>{h=h.insert(v,C)}))).next(()=>this.populateOverlays(e,f,o)).next(()=>this.computeViews(e,h,f,we())).next(v=>({batchId:l,changes:kf(v)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new F(t)).next(r=>{let i=us();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,c=us();return this.indexManager.getCollectionParents(e,o).next(l=>R.forEach(l,h=>{let f=function(b,C){return new jn(C,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt)}(t,h.child(o));return this.getDocumentsMatchingCollectionQuery(e,f,r,i).next(v=>{v.forEach((b,C)=>{c=c.insert(b,C)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(c=>(o=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(c=>{o.forEach((h,f)=>{let v=f.getKey();c.get(v)===null&&(c=c.insert(v,Ln.newInvalidDocument(v)))});let l=us();return c.forEach((h,f)=>{let v=o.get(h);v!==void 0&&Qr(v.mutation,f,Ye.empty(),Ie.now()),xu(t,f)&&(l=l.insert(h,f))}),l})}};var Jc=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return R.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Nn(i.createTime)}}(t)),R.resolve()}getNamedQuery(e,t){return R.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:gw(i.bundledQuery),readTime:Nn(i.readTime)}}(t)),R.resolve()}};var Yc=class{constructor(){this.overlays=new Ne(F.comparator),this.Ir=new Map}getOverlay(e,t){return R.resolve(this.overlays.get(t))}getOverlays(e,t){let r=nn();return R.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),R.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),R.resolve()}getOverlaysForCollection(e,t,r){let i=nn(),o=t.length+1,c=new F(t.child("")),l=this.overlays.getIteratorFrom(c);for(;l.hasNext();){let h=l.getNext().value,f=h.getKey();if(!t.isPrefixOf(f.path))break;f.path.length===o&&h.largestBatchId>r&&i.set(h.getKey(),h)}return R.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Ne((f,v)=>f-v),c=this.overlays.getIterator();for(;c.hasNext();){let f=c.getNext().value;if(f.getKey().getCollectionGroup()===t&&f.largestBatchId>r){let v=o.get(f.largestBatchId);v===null&&(v=nn(),o=o.insert(f.largestBatchId,v)),v.set(f.getKey(),f)}}let l=nn(),h=o.getIterator();for(;h.hasNext()&&(h.getNext().value.forEach((f,v)=>l.set(f,v)),!(l.size()>=i)););return R.resolve(l)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let c=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new Uc(t,r));let o=this.Ir.get(t);o===void 0&&(o=we(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Xc=class{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return R.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,R.resolve()}};var Zr=class{constructor(){this.Tr=new Ce(re.Er),this.dr=new Ce(re.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new re(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new re(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new F(new se([])),r=new re(t,e),i=new re(t,e+1),o=[];return this.dr.forEachInRange([r,i],c=>{this.Vr(c),o.push(c.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new F(new se([])),r=new re(t,e),i=new re(t,e+1),o=we();return this.dr.forEachInRange([r,i],c=>{o=o.add(c.key)}),o}containsKey(e){let t=new re(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},re=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return F.comparator(e.key,t.key)||W(e.wr,t.wr)}static Ar(e,t){return W(e.wr,t.wr)||F.comparator(e.key,t.key)}};var Zc=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Ce(re.Er)}checkEmpty(e){return R.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let c=new Fc(o,t,r,i);this.mutationQueue.push(c);for(let l of i)this.br=this.br.add(new re(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return R.resolve(c)}lookupMutationBatch(e,t){return R.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return R.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return R.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return R.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new re(t,0),i=new re(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],c=>{let l=this.Dr(c.wr);o.push(l)}),R.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Ce(W);return t.forEach(i=>{let o=new re(i,0),c=new re(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,c],l=>{r=r.add(l.wr)})}),R.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;F.isDocumentKey(o)||(o=o.child(""));let c=new re(new F(o),0),l=new Ce(W);return this.br.forEachWhile(h=>{let f=h.key.path;return!!r.isPrefixOf(f)&&(f.length===i&&(l=l.add(h.wr)),!0)},c),R.resolve(this.Cr(l))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ce(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return R.forEach(t.mutations,i=>{let o=new re(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new re(t,0),i=this.br.firstAfterOrEqual(r);return R.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,R.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var eu=class{constructor(e){this.Mr=e,this.docs=function(){return new Ne(F.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,c=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return R.resolve(r?r.document.mutableCopy():Ln.newInvalidDocument(t))}getEntries(e,t){let r=ws();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Ln.newInvalidDocument(i))}),R.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=ws(),c=t.path,l=new F(c.child("")),h=this.docs.getIteratorFrom(l);for(;h.hasNext();){let{key:f,value:{document:v}}=h.getNext();if(!c.isPrefixOf(f.path))break;f.path.length>c.length+1||Rv(Sv(v),r)<=0||(i.has(v.key)||xu(t,v))&&(o=o.insert(v.key,v.mutableCopy()))}return R.resolve(o)}getAllFromCollectionGroup(e,t,r,i){B()}Or(e,t){return R.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tu(this)}getSize(e){return R.resolve(this.size)}},tu=class extends Hc{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),R.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var nu=class{constructor(e){this.persistence=e,this.Nr=new Mt(t=>Vu(t),Ou),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Zr,this.targetCount=0,this.kr=Xr.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),R.resolve()}getLastRemoteSnapshotVersion(e){return R.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return R.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),R.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),R.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new Xr(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,R.resolve()}updateTargetData(e,t){return this.Kn(t),R.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,R.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((c,l)=>{l.sequenceNumber<=t&&r.get(l.targetId)===null&&(this.Nr.delete(c),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),R.waitFor(o).next(()=>i)}getTargetCount(e){return R.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return R.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),R.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(c=>{o.push(i.markPotentiallyOrphaned(e,c))}),R.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),R.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return R.resolve(r)}containsKey(e,t){return R.resolve(this.Br.containsKey(t))}};var ru=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new kv(0),this.Kr=!1,this.Kr=!0,this.$r=new Xc,this.referenceDelegate=e(this),this.Ur=new nu(this),this.indexManager=new zc,this.remoteDocumentCache=function(i){return new eu(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Gc(t),this.Gr=new Jc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Yc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Zc(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){N("MemoryPersistence","Starting transaction:",e);let i=new iu(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return R.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},iu=class extends vc{constructor(e){super(),this.currentSequenceNumber=e}},su=class n{constructor(e){this.persistence=e,this.Jr=new Zr,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw B()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),R.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),R.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),R.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return R.forEach(this.Xr,r=>{let i=F.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,Z.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return R.or([()=>R.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var ou=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=we(),i=we();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var au=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var cu=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return bh()?8:Dv(le())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(c=>{o.result=c}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(c=>{o.result=c})}).next(()=>{if(o.result)return;let c=new au;return this.Xi(e,t,c).next(l=>{if(o.result=l,this.zi)return this.es(e,t,c,l.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(Gr()<=U.DEBUG&&N("QueryEngine","SDK will not create cache indexes for query:",zr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),R.resolve()):(Gr()<=U.DEBUG&&N("QueryEngine","Query:",zr(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(Gr()<=U.DEBUG&&N("QueryEngine","The SDK decides to create cache indexes for query:",zr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,rn(t))):R.resolve())}Yi(e,t){if(tf(t))return R.resolve(null);let r=rn(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=Oc(t,null,"F"),r=rn(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let c=we(...o);return this.Ji.getDocuments(e,c).next(l=>this.indexManager.getMinOffset(e,r).next(h=>{let f=this.ts(t,l);return this.ns(t,f,c,h.readTime)?this.Yi(e,Oc(t,null,"F")):this.rs(e,f,t,h)}))})))}Zi(e,t,r,i){return tf(t)||i.isEqual(Z.min())?R.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let c=this.ts(t,o);return this.ns(t,c,r,i)?R.resolve(null):(Gr()<=U.DEBUG&&N("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),zr(t)),this.rs(e,c,t,Cv(i,-1)).next(l=>l))})}ts(e,t){let r=new Ce(Gv(e));return t.forEach((i,o)=>{xu(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return Gr()<=U.DEBUG&&N("QueryEngine","Using full collection scan to execute query:",zr(t)),this.Ji.getDocumentsMatchingQuery(e,t,cn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(c=>{o=o.insert(c.key,c)}),o))}};var uu=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Ne(W),this._s=new Mt(o=>Vu(o),Ou),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Qc(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function _w(n,e,t,r){return new uu(n,e,t,r)}function qf(n,e){return _(this,null,function*(){let t=K(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let c=[],l=[],h=we();for(let f of i){c.push(f.batchId);for(let v of f.mutations)h=h.add(v.key)}for(let f of o){l.push(f.batchId);for(let v of f.mutations)h=h.add(v.key)}return t.localDocuments.getDocuments(r,h).next(f=>({hs:f,removedBatchIds:c,addedBatchIds:l}))})})})}function yw(n,e){let t=K(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(l,h,f,v){let b=f.batch,C=b.keys(),D=R.resolve();return C.forEach(k=>{D=D.next(()=>v.getEntry(h,k)).next(M=>{let V=f.docVersions.get(k);ce(V!==null),M.version.compareTo(V)<0&&(b.applyToRemoteDocument(M,f),M.isValidDocument()&&(M.setReadTime(f.commitVersion),v.addEntry(M)))})}),D.next(()=>l.mutationQueue.removeMutationBatch(h,b))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=we();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(h=h.add(l.batch.mutations[f].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function vw(n){let e=K(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function ww(n,e){let t=K(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}var Ts=class{constructor(){this.activeTargetIds=Jv()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var lu=class{constructor(){this.so=new Ts,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Ts,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var hu=class{_o(e){}shutdown(){}};var As=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){N("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){N("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var ls=null;function cc(){return ls===null?ls=function(){return 268435456+Math.round(2147483648*Math.random())}():ls++,"0x"+ls.toString(16)}var Iw={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var du=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var ve="WebChannelConnection",fu=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,c){let l=cc(),h=this.xo(t,r.toUriEncodedString());N("RestConnection",`Sending RPC '${t}' ${l}:`,h,i);let f={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(f,o,c),this.No(t,h,f,i).then(v=>(N("RestConnection",`Received RPC '${t}' ${l}: `,v),v),v=>{throw fs("RestConnection",`RPC '${t}' ${l} failed with error: `,v,"url: ",h,"request:",i),v})}Lo(t,r,i,o,c,l){return this.Mo(t,r,i,o,c)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hn}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,c)=>t[c]=o),i&&i.headers.forEach((o,c)=>t[c]=o)}xo(t,r){let i=Iw[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=cc();return new Promise((c,l)=>{let h=new nc;h.setWithCredentials(!0),h.listenOnce(ic.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case $r.NO_ERROR:let v=h.getResponseJson();N(ve,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(v)),c(v);break;case $r.TIMEOUT:N(ve,`RPC '${e}' ${o} timed out`),l(new O(S.DEADLINE_EXCEEDED,"Request time out"));break;case $r.HTTP_ERROR:let b=h.getStatus();if(N(ve,`RPC '${e}' ${o} failed with status:`,b,"response text:",h.getResponseText()),b>0){let C=h.getResponseJson();Array.isArray(C)&&(C=C[0]);let D=C?.error;if(D&&D.status&&D.message){let k=function(V){let Q=V.toLowerCase().replace(/_/g,"-");return Object.values(S).indexOf(Q)>=0?Q:S.UNKNOWN}(D.status);l(new O(k,D.message))}else l(new O(S.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new O(S.UNAVAILABLE,"Connection failed."));break;default:B()}}finally{N(ve,`RPC '${e}' ${o} completed.`)}});let f=JSON.stringify(i);N(ve,`RPC '${e}' ${o} sending request:`,i),h.send(t,"POST",f,r,15)})}Bo(e,t,r){let i=cc(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=ac(),l=oc(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(h.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(h.xmlHttpFactory=new rc({})),this.Oo(h.initMessageHeaders,t,r),h.encodeInitMessageHeaders=!0;let v=o.join("");N(ve,`Creating RPC '${e}' stream ${i}: ${v}`,h);let b=c.createWebChannel(v,h),C=!1,D=!1,k=new du({Io:V=>{D?N(ve,`Not sending because RPC '${e}' stream ${i} is closed:`,V):(C||(N(ve,`Opening RPC '${e}' stream ${i} transport.`),b.open(),C=!0),N(ve,`RPC '${e}' stream ${i} sending:`,V),b.send(V))},To:()=>b.close()}),M=(V,Q,H)=>{V.listen(Q,J=>{try{H(J)}catch(oe){setTimeout(()=>{throw oe},0)}})};return M(b,Pn.EventType.OPEN,()=>{D||(N(ve,`RPC '${e}' stream ${i} transport opened.`),k.yo())}),M(b,Pn.EventType.CLOSE,()=>{D||(D=!0,N(ve,`RPC '${e}' stream ${i} transport closed`),k.So())}),M(b,Pn.EventType.ERROR,V=>{D||(D=!0,fs(ve,`RPC '${e}' stream ${i} transport errored:`,V),k.So(new O(S.UNAVAILABLE,"The operation could not be completed")))}),M(b,Pn.EventType.MESSAGE,V=>{var Q;if(!D){let H=V.data[0];ce(!!H);let J=H,oe=J.error||((Q=J[0])===null||Q===void 0?void 0:Q.error);if(oe){N(ve,`RPC '${e}' stream ${i} received error:`,oe);let qe=oe.status,ue=function(g){let y=ne[g];if(y!==void 0)return iw(y)}(qe),I=oe.message;ue===void 0&&(ue=S.INTERNAL,I="Unknown error status: "+qe+" with message "+oe.message),D=!0,k.So(new O(ue,I)),b.close()}else N(ve,`RPC '${e}' stream ${i} received:`,H),k.bo(H)}}),M(l,sc.STAT_EVENT,V=>{V.stat===as.PROXY?N(ve,`RPC '${e}' stream ${i} detected buffering proxy`):V.stat===as.NOPROXY&&N(ve,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}};function uc(){return typeof document<"u"?document:null}function Ms(n){return new Bc(n,!0)}var bs=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&N("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var pu=class{constructor(e,t,r,i,o,c,l,h){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=l,this.listener=h,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new bs(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return _(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return _(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return _(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===S.RESOURCE_EXHAUSTED?(an(t.toString()),an("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===S.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new O(S.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>_(this,null,function*(){this.state=0,this.start()}))}I_(e){return N("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(N("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var mu=class extends pu{constructor(e,t,r,i,o,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ce(!!e.streamToken),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=dw(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=uw(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>hw(this.serializer,r))};this.a_(t)}};var gu=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new O(S.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Mo(e,qc(t,r),i,o,c)).catch(o=>{throw o.name==="FirebaseError"?(o.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new O(S.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,l])=>this.connection.Lo(e,qc(t,r),i,c,l,o)).catch(c=>{throw c.name==="FirebaseError"?(c.code===S.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new O(S.UNKNOWN,c.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},_u=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(an(t),this.D_=!1):N("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var yu=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(c=>{r.enqueueAndForget(()=>_(this,null,function*(){ni(this)&&(N("RemoteStore","Restarting streams for network reachability change."),yield function(h){return _(this,null,function*(){let f=K(h);f.L_.add(4),yield ti(f),f.q_.set("Unknown"),f.L_.delete(4),yield Fs(f)})}(this))}))}),this.q_=new _u(r,i)}};function Fs(n){return _(this,null,function*(){if(ni(n))for(let e of n.B_)yield e(!0)})}function ti(n){return _(this,null,function*(){for(let e of n.B_)yield e(!1)})}function ni(n){return K(n).L_.size===0}function $f(n,e,t){return _(this,null,function*(){if(!xs(e))throw e;n.L_.add(1),yield ti(n),n.q_.set("Offline"),t||(t=()=>vw(n.localStore)),n.asyncQueue.enqueueRetryable(()=>_(this,null,function*(){N("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield Fs(n)}))})}function Gf(n,e){return e().catch(t=>$f(n,t,e))}function Ls(n){return _(this,null,function*(){let e=K(n),t=Ft(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Ew(e);)try{let i=yield ww(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,Tw(e,i)}catch(i){yield $f(e,i)}zf(e)&&Wf(e)})}function Ew(n){return ni(n)&&n.O_.length<10}function Tw(n,e){n.O_.push(e);let t=Ft(n);t.r_()&&t.V_&&t.m_(e.mutations)}function zf(n){return ni(n)&&!Ft(n).n_()&&n.O_.length>0}function Wf(n){Ft(n).start()}function Aw(n){return _(this,null,function*(){Ft(n).p_()})}function bw(n){return _(this,null,function*(){let e=Ft(n);for(let t of n.O_)e.m_(t.mutations)})}function Cw(n,e,t){return _(this,null,function*(){let r=n.O_.shift(),i=Lc.from(r,e,t);yield Gf(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield Ls(n)})}function Sw(n,e){return _(this,null,function*(){e&&Ft(n).V_&&(yield function(r,i){return _(this,null,function*(){if(function(c){return rw(c)&&c!==S.ABORTED}(i.code)){let o=r.O_.shift();Ft(r).s_(),yield Gf(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield Ls(r)}})}(n,e)),zf(n)&&Wf(n)})}function cf(n,e){return _(this,null,function*(){let t=K(n);t.asyncQueue.verifyOperationInProgress(),N("RemoteStore","RemoteStore received new credentials");let r=ni(t);t.L_.add(3),yield ti(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield Fs(t)})}function Rw(n,e){return _(this,null,function*(){let t=K(n);e?(t.L_.delete(2),yield Fs(t)):e||(t.L_.add(2),yield ti(t),t.q_.set("Unknown"))})}function Ft(n){return n.U_||(n.U_=function(t,r,i){let o=K(t);return o.w_(),new mu(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Aw.bind(null,n),mo:Sw.bind(null,n),f_:bw.bind(null,n),g_:Cw.bind(null,n)}),n.B_.push(e=>_(this,null,function*(){e?(n.U_.s_(),yield Ls(n)):(yield n.U_.stop(),n.O_.length>0&&(N("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var vu=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new dt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let c=Date.now()+r,l=new n(e,t,c,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new O(S.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Hf(n,e){if(an("AsyncQueue",`${e}: ${n}`),xs(n))return new O(S.UNAVAILABLE,`${e}: ${n}`);throw n}var wu=class{constructor(){this.queries=uf(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=K(t),o=i.queries;i.queries=uf(),o.forEach((c,l)=>{for(let h of l.j_)h.onError(r)})})(this,new O(S.ABORTED,"Firestore shutting down"))}};function uf(){return new Mt(n=>Pf(n),Rf)}function Pw(n){n.Y_.forEach(e=>{e.next()})}var lf,hf;(hf=lf||(lf={})).ea="default",hf.Cache="cache";var Iu=class{constructor(e,t,r,i,o,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=c,this.Ca={},this.Fa=new Mt(l=>Pf(l),Rf),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(F.comparator),this.Na=new Map,this.La=new Zr,this.Ba={},this.ka=new Map,this.qa=Xr.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function Dw(n,e,t){return _(this,null,function*(){let r=Ow(n);try{let i=yield function(c,l){let h=K(c),f=Ie.now(),v=l.reduce((D,k)=>D.add(k.key),we()),b,C;return h.persistence.runTransaction("Locally write mutations","readwrite",D=>{let k=ws(),M=we();return h.cs.getEntries(D,v).next(V=>{k=V,k.forEach((Q,H)=>{H.isValidDocument()||(M=M.add(Q))})}).next(()=>h.localDocuments.getOverlayedDocuments(D,k)).next(V=>{b=V;let Q=[];for(let H of l){let J=nw(H,b.get(H.key).overlayedDocument);J!=null&&Q.push(new mt(H.key,J,Ef(J.value.mapValue),sn.exists(!0)))}return h.mutationQueue.addMutationBatch(D,f,Q,l)}).next(V=>{C=V;let Q=V.applyToLocalDocumentSet(b,M);return h.documentOverlayCache.saveOverlays(D,V.batchId,Q)})}).then(()=>({batchId:C.batchId,changes:kf(b)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(c,l,h){let f=c.Ba[c.currentUser.toKey()];f||(f=new Ne(W)),f=f.insert(l,h),c.Ba[c.currentUser.toKey()]=f}(r,i.batchId,t),yield Us(r,i.changes),yield Ls(r.remoteStore)}catch(i){let o=Hf(i,"Failed to persist write");t.reject(o)}})}function df(n,e,t){let r=K(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,c)=>{let l=c.view.Z_(e);l.snapshot&&i.push(l.snapshot)}),function(c,l){let h=K(c);h.onlineState=l;let f=!1;h.queries.forEach((v,b)=>{for(let C of b.j_)C.Z_(l)&&(f=!0)}),f&&Pw(h)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kw(n,e){return _(this,null,function*(){let t=K(n),r=e.batch.batchId;try{let i=yield yw(t.localStore,e);Qf(t,r,null),Kf(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Us(t,i)}catch(i){yield _f(i)}})}function Nw(n,e,t){return _(this,null,function*(){let r=K(n);try{let i=yield function(c,l){let h=K(c);return h.persistence.runTransaction("Reject batch","readwrite-primary",f=>{let v;return h.mutationQueue.lookupMutationBatch(f,l).next(b=>(ce(b!==null),v=b.keys(),h.mutationQueue.removeMutationBatch(f,b))).next(()=>h.mutationQueue.performConsistencyCheck(f)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(f,v,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,v)).next(()=>h.localDocuments.getDocuments(f,v))})}(r.localStore,e);Qf(r,e,t),Kf(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Us(r,i)}catch(i){yield _f(i)}})}function Kf(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function Qf(n,e,t){let r=K(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function Us(n,e,t){return _(this,null,function*(){let r=K(n),i=[],o=[],c=[];r.Fa.isEmpty()||(r.Fa.forEach((l,h)=>{c.push(r.Ka(h,e,t).then(f=>{var v;if((f||t)&&r.isPrimaryClient){let b=f?!f.fromCache:(v=t?.targetChanges.get(h.targetId))===null||v===void 0?void 0:v.current;r.sharedClientState.updateQueryState(h.targetId,b?"current":"not-current")}if(f){i.push(f);let b=ou.Wi(h.targetId,f);o.push(b)}}))}),yield Promise.all(c),r.Ca.d_(i),yield function(h,f){return _(this,null,function*(){let v=K(h);try{yield v.persistence.runTransaction("notifyLocalViewChanges","readwrite",b=>R.forEach(f,C=>R.forEach(C.$i,D=>v.persistence.referenceDelegate.addReference(b,C.targetId,D)).next(()=>R.forEach(C.Ui,D=>v.persistence.referenceDelegate.removeReference(b,C.targetId,D)))))}catch(b){if(!xs(b))throw b;N("LocalStore","Failed to update sequence numbers: "+b)}for(let b of f){let C=b.targetId;if(!b.fromCache){let D=v.os.get(C),k=D.snapshotVersion,M=D.withLastLimboFreeSnapshotVersion(k);v.os=v.os.insert(C,M)}}})}(r.localStore,o))})}function Vw(n,e){return _(this,null,function*(){let t=K(n);if(!t.currentUser.isEqual(e)){N("SyncEngine","User change. New user:",e.toKey());let r=yield qf(t.localStore,e);t.currentUser=e,function(o,c){o.ka.forEach(l=>{l.forEach(h=>{h.reject(new O(S.CANCELLED,c))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Us(t,r.hs)}})}function Ow(n){let e=K(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=kw.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Nw.bind(null,e),e}var Cs=class{constructor(){this.synchronizeTabs=!1}initialize(e){return _(this,null,function*(){this.serializer=Ms(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return _w(this.persistence,new cu,e.initialUser,this.serializer)}createPersistence(e){return new ru(su.Zr,this.serializer)}createSharedClientState(e){return new lu}terminate(){return _(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Eu=class{initialize(e,t){return _(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>df(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Vw.bind(null,this.syncEngine),yield Rw(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new wu}()}createDatastore(e){let t=Ms(e.databaseInfo.databaseId),r=function(o){return new fu(o)}(e.databaseInfo);return function(o,c,l,h){return new gu(o,c,l,h)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,i,o,c,l){return new yu(r,i,o,c,l)}(this.localStore,this.datastore,e.asyncQueue,t=>df(this.syncEngine,t,0),function(){return As.D()?new As:new hu}())}createSyncEngine(e,t){return function(i,o,c,l,h,f,v){let b=new Iu(i,o,c,l,h,f);return v&&(b.Qa=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return _(this,null,function*(){var e,t;yield function(i){return _(this,null,function*(){let o=K(i);N("RemoteStore","RemoteStore shutting down."),o.L_.add(5),yield ti(o),o.k_.shutdown(),o.q_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var Tu=class{constructor(e,t,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=he.UNAUTHENTICATED,this.clientId=ms.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,o=>_(this,null,function*(){N("FirestoreClient","Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,o=>(N("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new O(S.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new dt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>_(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=Hf(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function lc(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),N("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>_(this,null,function*(){r.isEqual(i)||(yield qf(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function ff(n,e){return _(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Mw(n);N("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>cf(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>cf(e.remoteStore,i)),n._onlineComponents=e})}function xw(n){return n.name==="FirebaseError"?n.code===S.FAILED_PRECONDITION||n.code===S.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function Mw(n){return _(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){N("FirestoreClient","Using user provided OfflineComponentProvider");try{yield lc(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!xw(t))throw t;fs("Error using user provided cache. Falling back to memory cache: "+t),yield lc(n,new Cs)}}else N("FirestoreClient","Using default OfflineComponentProvider"),yield lc(n,new Cs);return n._offlineComponents})}function Fw(n){return _(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(N("FirestoreClient","Using user provided OnlineComponentProvider"),yield ff(n,n._uninitializedComponentsProvider._online)):(N("FirestoreClient","Using default OnlineComponentProvider"),yield ff(n,new Eu))),n._onlineComponents})}function Lw(n){return Fw(n).then(e=>e.syncEngine)}function Jf(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var pf=new Map;function Yf(n,e,t){if(!t)throw new O(S.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Uw(n,e,t,r){if(e===!0&&r===!0)throw new O(S.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function mf(n){if(!F.isDocumentKey(n))throw new O(S.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function gf(n){if(F.isDocumentKey(n))throw new O(S.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Fu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":B()}function Xf(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new O(S.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Fu(n);throw new O(S.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Ss=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new O(S.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new O(S.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Uw("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Jf((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new O(S.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new O(S.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new O(S.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},Wn=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Ss({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new O(S.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new O(S.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Ss(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new hc;switch(r.type){case"firstParty":return new mc(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new O(S.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=pf.get(t);r&&(N("ComponentProvider","Removing Datastore"),pf.delete(t),r.terminate())}(this),Promise.resolve()}};function Zf(n,e,t,r={}){var i;let o=(n=Xf(n,Wn))._getSettings(),c=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==c&&fs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:c,ssl:!1})),r.mockUserToken){let l,h;if(typeof r.mockUserToken=="string")l=r.mockUserToken,h=he.MOCK_USER;else{l=wh(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let f=r.mockUserToken.sub||r.mockUserToken.user_id;if(!f)throw new O(S.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new he(f)}n._authCredentials=new dc(new ps(l,h))}}var Au=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},ft=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Vt(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Vt=class n extends Au{constructor(e,t,r){super(e,t,jv(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new F(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ep(n,e,...t){if(n=be(n),Yf("collection","path",e),n instanceof Wn){let r=se.fromString(e,...t);return gf(r),new Vt(n,null,r)}{if(!(n instanceof ft||n instanceof Vt))throw new O(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(se.fromString(e,...t));return gf(r),new Vt(n.firestore,null,r)}}function tp(n,e,...t){if(n=be(n),arguments.length===1&&(e=ms.newId()),Yf("doc","path",e),n instanceof Wn){let r=se.fromString(e,...t);return mf(r),new ft(n,null,new F(r))}{if(!(n instanceof ft||n instanceof Vt))throw new O(S.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(se.fromString(e,...t));return mf(r),new ft(n.firestore,n instanceof Vt?n.converter:null,new F(r))}}var bu=class{constructor(){this.au=Promise.resolve(),this.uu=[],this.cu=!1,this.lu=[],this.hu=null,this.Pu=!1,this.Iu=!1,this.Tu=[],this.t_=new bs(this,"async_queue_retry"),this.Eu=()=>{let t=uc();t&&N("AsyncQueue","Visibility state changed to "+t.visibilityState),this.t_.jo()};let e=uc();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Eu)}get isShuttingDown(){return this.cu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.du(),this.Au(e)}enterRestrictedMode(e){if(!this.cu){this.cu=!0,this.Iu=e||!1;let t=uc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Eu)}}enqueue(e){if(this.du(),this.cu)return new Promise(()=>{});let t=new dt;return this.Au(()=>this.cu&&this.Iu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.uu.push(e),this.Ru()))}Ru(){return _(this,null,function*(){if(this.uu.length!==0){try{yield this.uu[0](),this.uu.shift(),this.t_.reset()}catch(e){if(!xs(e))throw e;N("AsyncQueue","Operation failed with retryable error: "+e)}this.uu.length>0&&this.t_.Go(()=>this.Ru())}})}Au(e){let t=this.au.then(()=>(this.Pu=!0,e().catch(r=>{this.hu=r,this.Pu=!1;let i=function(c){let l=c.message||"";return c.stack&&(l=c.stack.includes(c.message)?c.stack:c.message+`
`+c.stack),l}(r);throw an("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Pu=!1,r))));return this.au=t,t}enqueueAfterDelay(e,t,r){this.du(),this.Tu.indexOf(e)>-1&&(t=0);let i=vu.createAndSchedule(this,e,t,r,o=>this.Vu(o));return this.lu.push(i),i}du(){this.hu&&B()}verifyOperationInProgress(){}mu(){return _(this,null,function*(){let e;do e=this.au,yield e;while(e!==this.au)})}fu(e){for(let t of this.lu)if(t.timerId===e)return!0;return!1}gu(e){return this.mu().then(()=>{this.lu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.lu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.mu()})}pu(e){this.Tu.push(e)}Vu(e){let t=this.lu.indexOf(e);this.lu.splice(t,1)}};var Rs=class extends Wn{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=function(){return new bu}(),this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||rp(this),this._firestoreClient.terminate()}};function np(n,e){let t=typeof n=="object"?n:En(),r=typeof n=="string"?n:e||"(default)",i=Vr(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=vh("firestore");o&&Zf(i,...o)}return i}function Bw(n){return n._firestoreClient||rp(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function rp(n){var e,t,r;let i=n._freezeSettings(),o=function(l,h,f,v){return new Ic(l,h,f,v.host,v.ssl,v.experimentalForceLongPolling,v.experimentalAutoDetectLongPolling,Jf(v.experimentalLongPollingOptions),v.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._firestoreClient=new Tu(n._authCredentials,n._appCheckCredentials,n._queue,o),!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}var Ps=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(pt.fromBase64String(e))}catch(t){throw new O(S.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Ds=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new O(S.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ke(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ks=class{constructor(e){this._methodName=e}};var Ns=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(S.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(S.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return W(this._lat,e._lat)||W(this._long,e._long)}};var Vs=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var jw=/^__.*__$/,Cu=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new mt(e,this.data,this.fieldMask,t,this.fieldTransforms):new hn(e,this.data,t,this.fieldTransforms)}};function ip(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw B()}}var Su=class n{constructor(e,t,r,i,o,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.yu(),this.fieldTransforms=o||[],this.fieldMask=c||[]}get path(){return this.settings.path}get wu(){return this.settings.wu}Su(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}bu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.vu(e),i}Cu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Su({path:r,Du:!1});return i.yu(),i}Fu(e){return this.Su({path:void 0,Du:!0})}Mu(e){return Os(e,this.settings.methodName,this.settings.xu||!1,this.path,this.settings.Ou)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}yu(){if(this.path)for(let e=0;e<this.path.length;e++)this.vu(this.path.get(e))}vu(e){if(e.length===0)throw this.Mu("Document fields must not be empty");if(ip(this.wu)&&jw.test(e))throw this.Mu('Document fields cannot begin and end with "__"')}},Ru=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Ms(e)}Nu(e,t,r,i=!1){return new Su({wu:e,methodName:t,Ou:r,path:ke.emptyPath(),Du:!1,xu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qw(n){let e=n._freezeSettings(),t=Ms(n._databaseId);return new Ru(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $w(n,e,t,r,i,o={}){let c=n.Nu(o.merge||o.mergeFields?2:0,e,t,i);cp("Data must be an object, but it was:",c,r);let l=op(r,c),h,f;if(o.merge)h=new Ye(c.fieldMask),f=c.fieldTransforms;else if(o.mergeFields){let v=[];for(let b of o.mergeFields){let C=Gw(e,b,t);if(!c.contains(C))throw new O(S.INVALID_ARGUMENT,`Field '${C}' is specified in your field mask but missing from your input data.`);Hw(v,C)||v.push(C)}h=new Ye(v),f=c.fieldTransforms.filter(b=>h.covers(b.field))}else h=null,f=c.fieldTransforms;return new Cu(new Je(l),h,f)}function sp(n,e){if(ap(n=be(n)))return cp("Unsupported field value:",e,n),op(n,e);if(n instanceof ks)return function(r,i){if(!ip(i.wu))throw i.Mu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Mu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Du&&e.wu!==4)throw e.Mu("Nested arrays are not supported");return function(r,i){let o=[],c=0;for(let l of r){let h=sp(l,i.Fu(c));h==null&&(h={nullValue:"NULL_VALUE"}),o.push(h),c++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=be(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Yv(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Ie.fromDate(r);return{timestampValue:jc(i.serializer,o)}}if(r instanceof Ie){let o=new Ie(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:jc(i.serializer,o)}}if(r instanceof Ns)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ps)return{bytesValue:sw(i.serializer,r._byteString)};if(r instanceof ft){let o=i.databaseId,c=r.firestore._databaseId;if(!c.isEqual(o))throw i.Mu(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Bf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vs)return function(c,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:c.toArray().map(h=>{if(typeof h!="number")throw l.Mu("VectorValues must only contain numeric values.");return Mu(l.serializer,h)})}}}}}}(r,i);throw i.Mu(`Unsupported field value: ${Fu(r)}`)}(n,e)}function op(n,e){let t={};return yf(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ei(n,(r,i)=>{let o=sp(i,e.bu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function ap(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ie||n instanceof Ns||n instanceof Ps||n instanceof ft||n instanceof ks||n instanceof Vs)}function cp(n,e,t){if(!ap(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=Fu(t);throw r==="an object"?e.Mu(n+" a custom object"):e.Mu(n+" "+r)}}function Gw(n,e,t){if((e=be(e))instanceof Ds)return e._internalPath;if(typeof e=="string")return Ww(n,e);throw Os("Field path arguments must be of type string or ",n,!1,void 0,t)}var zw=new RegExp("[~\\*/\\[\\]]");function Ww(n,e,t){if(e.search(zw)>=0)throw Os(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Ds(...e.split("."))._internalPath}catch{throw Os(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Os(n,e,t,r,i){let o=r&&!r.isEmpty(),c=i!==void 0,l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let h="";return(o||c)&&(h+=" (found",o&&(h+=` in field ${r}`),c&&(h+=` in document ${i}`),h+=")"),new O(S.INVALID_ARGUMENT,l+n+h)}function Hw(n,e){return n.some(t=>t.isEqual(e))}function Kw(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}function Bs(n,e){let t=Xf(n.firestore,Rs),r=tp(n),i=Kw(n.converter,e);return Qw(t,[$w(qw(n.firestore),"addDoc",r._key,i,n.converter!==null,{}).toMutation(r._key,sn.exists(!1))]).then(()=>r)}function Qw(n,e){return function(r,i){let o=new dt;return r.asyncQueue.enqueueAndForget(()=>_(this,null,function*(){return Dw(yield Lw(r),i,o)})),o.promise}(Bw(n),e)}(function(e,t=!0){(function(i){Hn=i})(Pt),Rt(new xe("firestore",(r,{instanceIdentifier:i,options:o})=>{let c=r.getProvider("app").getImmediate(),l=new Rs(new fc(r.getProvider("auth-internal")),new _c(r.getProvider("app-check-internal")),function(f,v){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new O(S.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ec(f.options.projectId,v)}(c,i),c);return o=Object.assign({useFetchStreams:t},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),ae(Kd,"4.7.1",e),ae(Kd,"4.7.1","esm2017")})();var gt=class{constructor(e){return e}},up="firestore",Lu=class{constructor(){return Or(up)}};var Uu=new ye("angularfire2.firestore-instances");function Jw(n,e){let t=Ui(up,n,e);return t&&new gt(t)}function Yw(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new gt(r)}}var Xw={provide:Lu,deps:[[new Ve,Uu]]},Zw={provide:gt,useFactory:Jw,deps:[[new Ve,Uu],st]};function lp(n,...e){return ae("angularfire",Jt.full,"fst"),yn([Zw,Xw,{provide:Uu,useFactory:Yw(n),multi:!0,deps:[Tt,Et,bn,Yt,[new Ve,qr],[new Ve,An],...e]}])}var hp=je(Bs,!0);var js=je(ep,!0);var dp=je(np,!0);var Ep=(()=>{let e=class e{constructor(r,i){this._renderer=r,this._elementRef=i,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(r,i){this._renderer.setProperty(this._elementRef.nativeElement,r,i)}registerOnTouched(r){this.onTouched=r}registerOnChange(r){this.onChange=r}setDisabledState(r){this.setProperty("disabled",r)}};e.\u0275fac=function(i){return new(i||e)(G(Fo),G(Mo))},e.\u0275dir=Oe({type:e});let n=e;return n})(),eI=(()=>{let e=class e extends Ep{};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Tr(e)))(o||e)}})(),e.\u0275dir=Oe({type:e,features:[Ge]});let n=e;return n})(),Tp=new ye("");var tI={provide:Tp,useExisting:vr(()=>Xn),multi:!0};function nI(){let n=qo()?qo().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var rI=new ye(""),Xn=(()=>{let e=class e extends Ep{constructor(r,i,o){super(r,i),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!nI())}writeValue(r){let i=r??"";this.setProperty("value",i)}_handleInput(r){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(r)}_compositionStart(){this._composing=!0}_compositionEnd(r){this._composing=!1,this._compositionMode&&this.onChange(r)}};e.\u0275fac=function(i){return new(i||e)(G(Fo),G(Mo),G(rI,8))},e.\u0275dir=Oe({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,o){i&1&&ee("input",function(l){return o._handleInput(l.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(l){return o._compositionEnd(l.target.value)})},features:[Sr([tI]),Ge]});let n=e;return n})();function iI(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var ju=new ye(""),Ap=new ye("");function sI(n){return iI(n.value)?{required:!0}:null}function pp(n){return null}function bp(n){return n!=null}function Cp(n){return uh(n)?eh(n):n}function Sp(n){let e={};return n.forEach(t=>{e=t!=null?Ae(Ae({},e),t):e}),Object.keys(e).length===0?null:e}function Rp(n,e){return e.map(t=>t(n))}function oI(n){return!n.validate}function Pp(n){return n.map(e=>oI(e)?e:t=>e.validate(t))}function aI(n){if(!n)return null;let e=n.filter(bp);return e.length==0?null:function(t){return Sp(Rp(t,e))}}function qu(n){return n!=null?aI(Pp(n)):null}function cI(n){if(!n)return null;let e=n.filter(bp);return e.length==0?null:function(t){let r=Rp(t,e).map(Cp);return nh(r).pipe(th(Sp))}}function $u(n){return n!=null?cI(Pp(n)):null}function mp(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function uI(n){return n._rawValidators}function lI(n){return n._rawAsyncValidators}function Bu(n){return n?Array.isArray(n)?n:[n]:[]}function $s(n,e){return Array.isArray(n)?n.includes(e):n===e}function gp(n,e){let t=Bu(e);return Bu(n).forEach(i=>{$s(t,i)||t.push(i)}),t}function _p(n,e){return Bu(e).filter(t=>!$s(n,t))}var Gs=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qu(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=$u(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Jn=class extends Gs{get formDirective(){return null}get path(){return null}},ci=class extends Gs{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},zs=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},hI={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},pA=Re(Ae({},hI),{"[class.ng-submitted]":"isSubmitted"}),Qs=(()=>{let e=class e extends zs{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(G(ci,2))},e.\u0275dir=Oe({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,o){i&2&&Uo("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[Ge]});let n=e;return n})(),Js=(()=>{let e=class e extends zs{constructor(r){super(r)}};e.\u0275fac=function(i){return new(i||e)(G(Jn,10))},e.\u0275dir=Oe({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(i,o){i&2&&Uo("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[Ge]});let n=e;return n})();var ri="VALID",qs="INVALID",Kn="PENDING",ii="DISABLED",Yn=class{},Ws=class extends Yn{constructor(e,t){super(),this.value=e,this.source=t}},oi=class extends Yn{constructor(e,t){super(),this.pristine=e,this.source=t}},ai=class extends Yn{constructor(e,t){super(),this.touched=e,this.source=t}},Qn=class extends Yn{constructor(e,t){super(),this.status=e,this.source=t}};function Dp(n){return(Ys(n)?n.validators:n)||null}function dI(n){return Array.isArray(n)?qu(n):n||null}function kp(n,e){return(Ys(e)?e.asyncValidators:n)||null}function fI(n){return Array.isArray(n)?$u(n):n||null}function Ys(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function pI(n,e,t){let r=n.controls;if(!(e?Object.keys(r):r).length)throw new Di(1e3,"");if(!r[t])throw new Di(1001,"")}function mI(n,e,t){n._forEachChild((r,i)=>{if(t[i]===void 0)throw new Di(1002,"")})}var Hs=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Rr(()=>this.statusReactive()),this.statusReactive=Ar(void 0),this._pristine=Rr(()=>this.pristineReactive()),this.pristineReactive=Ar(!0),this._touched=Rr(()=>this.touchedReactive()),this.touchedReactive=Ar(!1),this._events=new Yl,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return At(this.statusReactive)}set status(e){At(()=>this.statusReactive.set(e))}get valid(){return this.status===ri}get invalid(){return this.status===qs}get pending(){return this.status==Kn}get disabled(){return this.status===ii}get enabled(){return this.status!==ii}get pristine(){return At(this.pristineReactive)}set pristine(e){At(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return At(this.touchedReactive)}set touched(e){At(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(gp(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(gp(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(_p(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(_p(e,this._rawAsyncValidators))}hasValidator(e){return $s(this._rawValidators,e)}hasAsyncValidator(e){return $s(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(Re(Ae({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ai(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ai(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(Re(Ae({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new oi(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(i=>{i.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new oi(!0,r))}markAsPending(e={}){this.status=Kn;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Qn(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(Re(Ae({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ii,this.errors=null,this._forEachChild(i=>{i.disable(Re(Ae({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ws(this.value,r)),this._events.next(new Qn(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Re(Ae({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ri,this._forEachChild(r=>{r.enable(Re(Ae({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Re(Ae({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ri||this.status===Kn)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Ws(this.value,t)),this._events.next(new Qn(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(Re(Ae({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ii:ri}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=Kn,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=Cp(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(i=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(i,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Qn(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new vn,this.statusChanges=new vn}_calculateStatus(){return this._allControlsDisabled()?ii:this.errors?qs:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Kn)?Kn:this._anyControlsHaveStatus(qs)?qs:ri}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),i=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),i&&this._events.next(new oi(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ai(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ys(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=dI(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=fI(this._rawAsyncValidators)}},Ks=class extends Hs{constructor(e,t,r){super(Dp(t),kp(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){mI(this,!0,e),Object.keys(e).forEach(r=>{pI(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(r=>{let i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e?e[i]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>r._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,o)=>{r=t(r,i,o)}),r}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Gu=new ye("CallSetDisabledState",{providedIn:"root",factory:()=>zu}),zu="always";function gI(n,e){return[...e.path,n]}function Np(n,e,t=zu){Vp(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),yI(n,e),wI(n,e),vI(n,e),_I(n,e)}function yp(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function _I(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Vp(n,e){let t=uI(n);e.validator!==null?n.setValidators(mp(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=lI(n);e.asyncValidator!==null?n.setAsyncValidators(mp(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let i=()=>n.updateValueAndValidity();yp(e._rawValidators,i),yp(e._rawAsyncValidators,i)}function yI(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Op(n,e)})}function vI(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Op(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Op(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function wI(n,e){let t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function II(n,e){n==null,Vp(n,e)}function EI(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function TI(n){return Object.getPrototypeOf(n.constructor)===eI}function AI(n,e){n._syncPendingControls(),e.forEach(t=>{let r=t.control;r.updateOn==="submit"&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function bI(n,e){if(!e)return null;Array.isArray(e);let t,r,i;return e.forEach(o=>{o.constructor===Xn?t=o:TI(o)?r=o:i=o}),i||r||t||null}var CI={provide:Jn,useExisting:vr(()=>ui)},si=Promise.resolve(),ui=(()=>{let e=class e extends Jn{get submitted(){return At(this.submittedReactive)}constructor(r,i,o){super(),this.callSetDisabledState=o,this._submitted=Rr(()=>this.submittedReactive()),this.submittedReactive=Ar(!1),this._directives=new Set,this.ngSubmit=new vn,this.form=new Ks({},qu(r),$u(i))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(r){si.then(()=>{let i=this._findContainer(r.path);r.control=i.registerControl(r.name,r.control),Np(r.control,r,this.callSetDisabledState),r.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(r)})}getControl(r){return this.form.get(r.path)}removeControl(r){si.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name),this._directives.delete(r)})}addFormGroup(r){si.then(()=>{let i=this._findContainer(r.path),o=new Ks({});II(o,r),i.registerControl(r.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(r){si.then(()=>{let i=this._findContainer(r.path);i&&i.removeControl(r.name)})}getFormGroup(r){return this.form.get(r.path)}updateModel(r,i){si.then(()=>{this.form.get(r.path).setValue(i)})}setValue(r){this.control.setValue(r)}onSubmit(r){return this.submittedReactive.set(!0),AI(this.form,this._directives),this.ngSubmit.emit(r),r?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(r=void 0){this.form.reset(r),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(r){return r.pop(),r.length?this.form.get(r):this.form}};e.\u0275fac=function(i){return new(i||e)(G(ju,10),G(Ap,10),G(Gu,8))},e.\u0275dir=Oe({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(i,o){i&1&&ee("submit",function(l){return o.onSubmit(l)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Sr([CI]),Ge]});let n=e;return n})();function vp(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function wp(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var SI=class extends Hs{constructor(e=null,t,r){super(Dp(t),kp(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ys(t)&&(t.nonNullable||t.initialValueIsDefault)&&(wp(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){vp(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){vp(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){wp(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var RI={provide:ci,useExisting:vr(()=>li)},Ip=Promise.resolve(),li=(()=>{let e=class e extends ci{constructor(r,i,o,c,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new SI,this._registered=!1,this.name="",this.update=new vn,this._parent=r,this._setValidators(i),this._setAsyncValidators(o),this.valueAccessor=bI(this,c)}ngOnChanges(r){if(this._checkForErrors(),!this._registered||"name"in r){if(this._registered&&(this._checkName(),this.formDirective)){let i=r.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in r&&this._updateDisabled(r),EI(r,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(r){this.viewModel=r,this.update.emit(r)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Np(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(r){Ip.then(()=>{this.control.setValue(r,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(r){let i=r.isDisabled.currentValue,o=i!==0&&jo(i);Ip.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(r){return this._parent?gI(r,this._parent):[r]}};e.\u0275fac=function(i){return new(i||e)(G(Jn,9),G(ju,10),G(Ap,10),G(Tp,10),G(hh,8),G(Gu,8))},e.\u0275dir=Oe({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Sr([RI]),Ge,Ni]});let n=e;return n})(),Xs=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Oe({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})();var PI=(()=>{let e=class e{constructor(){this._validator=pp}ngOnChanges(r){if(this.inputName in r){let i=this.normalizeInput(r[this.inputName].currentValue);this._enabled=this.enabled(i),this._validator=this._enabled?this.createValidator(i):pp,this._onChange&&this._onChange()}}validate(r){return this._validator(r)}registerOnValidatorChange(r){this._onChange=r}enabled(r){return r!=null}};e.\u0275fac=function(i){return new(i||e)},e.\u0275dir=Oe({type:e,features:[Ni]});let n=e;return n})();var DI={provide:ju,useExisting:vr(()=>hi),multi:!0};var hi=(()=>{let e=class e extends PI{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=jo,this.createValidator=r=>sI}enabled(r){return r}};e.\u0275fac=(()=>{let r;return function(o){return(r||(r=Tr(e)))(o||e)}})(),e.\u0275dir=Oe({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(i,o){i&2&&sh("required",o._enabled?"":null)},inputs:{required:"required"},features:[Sr([DI]),Ge]});let n=e;return n})();var kI=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Er({type:e}),e.\u0275inj=Ir({});let n=e;return n})();var Lt=(()=>{let e=class e{static withConfig(r){return{ngModule:e,providers:[{provide:Gu,useValue:r.callSetDisabledState??zu}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Er({type:e}),e.\u0275inj=Ir({imports:[kI]});let n=e;return n})();var Wu=new ye("@sweetalert2/ngx-sweetalert2#swalProvider"),Mp=new ye("@sweetalert2/ngx-sweetalert2#fireOnInit"),Fp=new ye("@sweetalert2/ngx-sweetalert2#dismissOnDestroy"),Lp=(()=>{class n{swalProvider;swalPromiseCache;constructor(t){this.swalProvider=t}get swal(){return this.swalPromiseCache||this.preloadSweetAlertLibrary(),this.swalPromiseCache}preloadSweetAlertLibrary(){if(this.swalPromiseCache)return;let t=r(this.swalProvider)?this.swalProvider():Promise.resolve(this.swalProvider);this.swalPromiseCache=t.then(o=>i(o)?o:o.default);function r(o){return typeof o=="function"&&o.version===void 0}function i(o){return typeof o=="function"}}static \u0275fac=function(r){return new(r||n)(ki(Wu))};static \u0275prov=wr({token:n,factory:n.\u0275fac})}return n})();function NI(){return import("./chunk-3HU52FE5.js")}var Zs=(()=>{class n{static forRoot(t={}){return{ngModule:n,providers:[Lp,{provide:Wu,useValue:t.provideSwal||NI},{provide:Mp,useValue:t.fireOnInit||!1},{provide:Fp,useValue:t.dismissOnDestroy||!0}]}}static forChild(t={}){return{ngModule:n,providers:[...t.provideSwal?[Lp,{provide:Wu,useValue:t.provideSwal}]:[],...t.fireOnInit!==void 0?[{provide:Mp,useValue:t.fireOnInit}]:[],...t.dismissOnDestroy!==void 0?[{provide:Fp,useValue:t.dismissOnDestroy}]:[]]}}static \u0275fac=function(r){return new(r||n)};static \u0275mod=Er({type:n});static \u0275inj=Ir({imports:[dh]})}return n})();var dn=Do(Go());var di=class n{constructor(e,t,r){this.auth=e;this.router=t;this.firestore=r}userMail="";userPWD="";loggedUser="";flagError=!1;msjError="";obtenerFechaActual=()=>{let e=new Date,t=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear(),o=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0");return`${t}/${r}/${i} ${o}:${c}`};Login(){dn.default.fire({title:"Cargando...",text:"Por favor espera",allowOutsideClick:!1,background:"#000",color:"#fff",didOpen:()=>{dn.default.showLoading()}}),qd(this.auth,this.userMail,this.userPWD).then(e=>{dn.default.close(),e.user.email!==null&&(this.loggedUser=e.user.email);let t=js(this.firestore,"logins");Bs(t,{fecha:new Date,user:this.loggedUser}),dn.default.fire({title:`Bienvenido ${e.user.displayName}
Fecha de ingreso: ${this.obtenerFechaActual()}`,background:"#000",color:"#fff",confirmButtonColor:"#ff5722"}),this.router.navigate(["home"]),this.flagError=!1}).catch(e=>{switch(dn.default.close(),this.flagError=!0,console.log(e.code),e.code){case"auth/invalid-email":this.userMail==""?this.msjError="Por favor ingrese un mail":this.msjError="El mail ingresado es invalido";break;case"auth/invalid-credential":this.msjError="Contrase\xF1a incorrecta";break;case"auth/missing-password":this.msjError="Falta ingresar la contrase\xF1a";break;default:this.msjError="Ocurrio un error inesperado";break}dn.default.fire({title:`${this.msjError}`,background:"#000",color:"#fff",confirmButtonColor:"#ff5722"})})}CompletarInputs(e,t){this.userMail=e,this.userPWD=t}static \u0275fac=function(t){return new(t||n)(G(lt),G(bt),G(gt))};static \u0275cmp=Fe({type:n,selectors:[["app-login"]],standalone:!0,features:[ze],decls:20,vars:2,consts:[["mail",""],["pass",""],[1,"login-container","container-fluid"],["action","login.php","method","POST"],["type","text","name","email","placeholder","mail","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Contrase\xF1a","required","",3,"ngModelChange","ngModel"],["type","submit","value","Iniciar Sesi\xF3n",3,"click"],["id","users"],[1,"userbutton",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/tp-labo4-fae81.appspot.com/o/avatar%20(1).png?alt=media&token=63316508-e172-42c9-aa9a-d230191e3200"],["src","https://firebasestorage.googleapis.com/v0/b/tp-labo4-fae81.appspot.com/o/avatar%20(2).png?alt=media&token=ecbba639-a009-4141-afdd-845c19c8ead9"],["src","https://firebasestorage.googleapis.com/v0/b/tp-labo4-fae81.appspot.com/o/avatar.png?alt=media&token=7b9bf124-9782-46d5-b479-a736ec0df60d"],["href","#"],["href","/registro"]],template:function(t,r){if(t&1){let i=br();L(0,"div",2)(1,"h2"),te(2,"Iniciar Sesi\xF3n"),$(),L(3,"form",3)(4,"input",4,0),zt("ngModelChange",function(c){return Le(i),Gt(r.userMail,c)||(r.userMail=c),Ue(c)}),$(),L(6,"input",5,1),zt("ngModelChange",function(c){return Le(i),Gt(r.userPWD,c)||(r.userPWD=c),Ue(c)}),$(),L(8,"input",6),ee("click",function(){return Le(i),Ue(r.Login())}),$(),L(9,"div",7)(10,"button",8),ee("click",function(){return Le(i),Ue(r.CompletarInputs("carlos@mail.com","123456"))}),Pe(11,"img",9),$(),L(12,"button",8),ee("click",function(){return Le(i),Ue(r.CompletarInputs("alberto@gmail.com","abcdefg"))}),Pe(13,"img",10),$(),L(14,"button",8),ee("click",function(){return Le(i),Ue(r.CompletarInputs("luis@hotmail.com","123abc"))}),Pe(15,"img",11),$()()(),L(16,"a",12),te(17,"\xBFOlvidaste tu contrase\xF1a?"),$(),L(18,"a",13),te(19,"\xBFNo tenes usuario? Registrate"),$()()}t&2&&($e(4),$t("ngModel",r.userMail),$e(2),$t("ngModel",r.userPWD))},dependencies:[Lt,Xs,Xn,Qs,Js,hi,li,ui,Zs],styles:["body[_ngcontent-%COMP%]{background-image:url(https://example.com/tu-imagen-de-fondo.jpg);background-size:cover;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;font-family:Arial,sans-serif}.login-container[_ngcontent-%COMP%]{background-color:#000c;padding:20px;border-radius:10px;box-shadow:0 0 15px #00000080;max-width:400px;width:100%;text-align:center;color:#fff;margin-top:30px}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;font-size:24px}.login-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:15px;border:none;border-radius:5px}.login-container[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#ff5722;border:none;border-radius:5px;color:#fff;font-size:18px;cursor:pointer;transition:background-color .3s ease}.login-container[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{background-color:#e64a19}.login-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ff5722;text-decoration:none;display:block;margin-top:15px}.login-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}#users[_ngcontent-%COMP%]{display:flex;width:100%;height:100px;padding:10px;justify-content:space-between}.userbutton[_ngcontent-%COMP%]{width:30%;height:100%;display:flex;justify-content:center;align-items:center;background-color:transparent;border:none}.userbutton[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80%}.userbutton[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{width:100%}"]})};var to=class n{constructor(e){this.router=e}goTo(e){console.log(e),this.router.navigate([e])}static \u0275fac=function(t){return new(t||n)(G(bt))};static \u0275cmp=Fe({type:n,selectors:[["app-home"]],standalone:!0,features:[ze],decls:21,vars:0,consts:[["id","container",1,"login-container","container-fluid"],["id","juegos"],["id","ahorcado",1,"juegos",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/tp-labo4-fae81.appspot.com/o/gibbet_3570557.png?alt=media&token=d647779d-4781-464e-a7ea-729d377ef471",1,"icon"],["id","mayor-o-menor",1,"juegos",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/tp-labo4-fae81.appspot.com/o/poker-card_16830094.png?alt=media&token=a77f8811-f847-4a14-9ecd-50e7677df02f",1,"icon"],["id","preguntas",1,"juegos",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/tp-labo4-fae81.appspot.com/o/problem_5377707.png?alt=media&token=42d0dad7-74ea-444d-8eeb-8e3c7e7b15a1",1,"icon"],["id","buscaminas",1,"juegos",3,"click"],["src","https://firebasestorage.googleapis.com/v0/b/tp-labo4-fae81.appspot.com/o/explosivos.png?alt=media&token=64fe91e7-0c63-4b40-9e82-8bd5ad701f76",1,"icon"],["id","chat"],[1,"chat"]],template:function(t,r){t&1&&(L(0,"div",0)(1,"div",1)(2,"button",2),ee("click",function(){return r.goTo("juegos/ahorcado")}),Pe(3,"img",3),L(4,"p"),te(5,"Ahorcado"),$()(),L(6,"button",4),ee("click",function(){return r.goTo("juegos/mayor-o-menor")}),Pe(7,"img",5),L(8,"p"),te(9,"Mayor o menor"),$()(),L(10,"button",6),ee("click",function(){return r.goTo("juegos/preguntas")}),Pe(11,"img",7),L(12,"p"),te(13,"Preguntados"),$()(),L(14,"button",8),ee("click",function(){return r.goTo("juegos/buscaminas")}),Pe(15,"img",9),L(16,"p"),te(17,"Buscaminas"),$()()(),L(18,"div",10)(19,"button",11),te(20,"Chat"),$()()())},dependencies:[Lt,mh],styles:["p[_ngcontent-%COMP%]{color:#fff}button[_ngcontent-%COMP%]{box-shadow:0 0 15px #00000080;background-color:#000c;padding:20px;border-radius:10px;text-align:center;margin-top:30px;color:#fff;font-size:30px}button[_ngcontent-%COMP%]:hover{background-color:#5b5b5bcc}#juegos[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;justify-content:space-between;padding:20px}.juegos[_ngcontent-%COMP%]{width:400px;height:400px;display:flex;justify-content:space-around;align-items:center;flex-wrap:wrap;box-shadow:0 0 15px #00000080;background-color:#000c;padding:20px;border-radius:10px;max-width:400px;width:100%;text-align:center;margin-top:30px}.juegos[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:100%}#chat[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;padding:20px}.chat[_ngcontent-%COMP%]{width:1200px;height:100px}.icon[_ngcontent-%COMP%]{width:30%}"]})};var no=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=Fe({type:n,selectors:[["app-quien-soy"]],standalone:!0,features:[ze],decls:7,vars:0,consts:[["id","user"],["src","https://firebasestorage.googleapis.com/v0/b/tp-labo4-fae81.appspot.com/o/quien-soy.jpg?alt=media&token=7c7be0a4-c909-4cd7-8755-a9bcbf68d4f1","id","user-image"],["id","info"]],template:function(t,r){t&1&&(L(0,"div",0),Pe(1,"img",1),L(2,"div",2)(3,"h1"),te(4,"Quien Soy?"),$(),L(5,"p"),te(6,'Mi nombre es Gast\xF3n G\xF3mez, tengo 26 a\xF1os, soy de Banfield (como el 70% del sur\u{1F601}) y actualmente estudio la Tecnicatura en Programaci\xF3n en la UTN y trabajo como QA Automation. En esta web podran jugar al ahorcado, al juego de cartas "Mayor o Menor", a un juego de preguntas y respuestas y a una version del buscaminas. Todos los juegos fueron desarrollados por mi.'),$()()())},styles:["#user-image[_ngcontent-%COMP%]{border-radius:50%;width:300px}#user[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;margin-left:20px;margin-right:20px;margin-top:100px;background-color:#000c;box-shadow:0 0 15px #00000080;padding:20px;border-radius:10px;color:#fff}#info[_ngcontent-%COMP%]{width:1500px;font-size:30px}"]})};var fn=Do(Go());var Hu=Do(Go());function VI(n,e){if(n&1){let t=br();L(0,"ul")(1,"li")(2,"button",1),ee("click",function(){Le(t);let i=Cr();return Ue(i.goTo("login"))}),te(3,"Login"),$()(),L(4,"li")(5,"button",1),ee("click",function(){Le(t);let i=Cr();return Ue(i.goTo("quien-soy"))}),te(6,"Quien soy?"),$()()()}}function OI(n,e){if(n&1){let t=br();L(0,"ul",0)(1,"li",2)(2,"p"),te(3),$()(),L(4,"li")(5,"button",1),ee("click",function(){Le(t);let i=Cr();return Ue(i.logout())}),te(6,"Log out"),$()()()}if(n&2){let t=Cr();$e(3),ah("Bienvenido ",t.auth.currentUser==null?null:t.auth.currentUser.displayName,"")}}var Zn=class n{constructor(e,t,r){this.router=e;this.auth=t;this.firestore=r}title="TP_LABO4";username="";goTo(e){console.log(e),this.router.navigate([e])}isLoggedOut(){let e=this.router.url;return e==="/login"||e==="/quien-soy"||e==="/registro"||e==="/"}logout(){Hu.default.fire({title:"\xBFEsta seguro que desea cerrar la sesi\xF3n?",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Cerrar Sesi\xF3n",cancelButtonText:"Cancelar",background:"#000",color:"#fff"}).then(e=>{e.isConfirmed&&(Hu.default.showLoading(),console.log("Logout successful"),this.goTo("/login"))})}obtenerFechaActual=()=>{let e=new Date,t=String(e.getDate()).padStart(2,"0"),r=String(e.getMonth()+1).padStart(2,"0"),i=e.getFullYear(),o=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0");return`${t}/${r}/${i} ${o}:${c}`};static \u0275fac=function(t){return new(t||n)(G(bt),G(lt),G(gt))};static \u0275cmp=Fe({type:n,selectors:[["app-root"]],standalone:!0,features:[ze],decls:4,vars:1,consts:[["id","loggedin"],[3,"click"],["id","user"]],template:function(t,r){t&1&&(L(0,"nav"),Lo(1,VI,7,0,"ul")(2,OI,7,1,"ul",0),$(),Pe(3,"router-outlet")),t&2&&($e(),oh(r.isLoggedOut()?1:2))},dependencies:[ph,Lt],styles:["button[_ngcontent-%COMP%], p[_ngcontent-%COMP%]{background-color:transparent;text-decoration:none;color:#fff;border:none;height:100%;width:200px}button[_ngcontent-%COMP%]:hover{background-color:#a08f8f42}#user[_ngcontent-%COMP%]{width:fit-content;display:flex}#user[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0;text-align:center;height:100%;align-content:center}nav[_ngcontent-%COMP%]{background-color:#00000042;height:60px;width:100vw;display:flex}ul[_ngcontent-%COMP%]{display:flex;list-style:none;height:100%;align-items:center;width:100%;justify-content:flex-start}li[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}#loggedin[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]})};var ro=class n extends Zn{newUserMail="";newUserPWD="";newUserName="";loggedUser="";flagError=!1;msjError="";fechaRegistro="";Register(){fn.default.fire({title:"Cargando...",text:"Por favor espera",allowOutsideClick:!1,background:"#000",color:"#fff",didOpen:()=>{fn.default.showLoading()}}),jd(this.auth,this.newUserMail,this.newUserPWD).then(e=>{fn.default.close(),e.user.email!==null&&(this.loggedUser=e.user.email),this.fechaRegistro=this.obtenerFechaActual(),$d(e.user,{displayName:this.newUserName});let t=js(this.firestore,"logins");hp(t,{fecha:new Date,user:this.loggedUser}),fn.default.fire({title:`Se registro correctamente a ${e.user.displayName}
Fecha de registro: ${this.fechaRegistro}`,background:"#000",color:"#fff",confirmButtonColor:"#ff5722"}),this.router.navigate(["home"]),this.flagError=!1}).catch(e=>{switch(fn.default.close(),this.flagError=!0,e.code){case"auth/invalid-email":this.newUserMail==""?this.msjError="Por favor ingrese un mail":this.msjError="El mail ingresado es invalido";break;case"auth/email-already-in-use":this.msjError="Email ya en uso";break;case"auth/weak-password":this.msjError="La contrase\xF1a debe contener como minimo 6 caracteres";break;default:this.msjError="Ocurrio un error inesperado";break}fn.default.fire({title:`${this.msjError}`,background:"#000",color:"#fff",confirmButtonColor:"#ff5722"})})}static \u0275fac=(()=>{let e;return function(r){return(e||(e=Tr(n)))(r||n)}})();static \u0275cmp=Fe({type:n,selectors:[["app-registro"]],standalone:!0,features:[Ge,ze],decls:8,vars:3,consts:[[1,"login-container","container-fluid"],["action","register.php","method","POST"],["type","text","name","mail","placeholder","Usuario","required","",3,"ngModelChange","ngModel"],["type","text","name","mail","placeholder","Email","required","",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","Contrase\xF1a","required","",3,"ngModelChange","ngModel"],["type","submit","value","Registrarse",3,"click"]],template:function(t,r){t&1&&(L(0,"div",0)(1,"h2"),te(2,"Registrarse"),$(),L(3,"form",1)(4,"input",2),zt("ngModelChange",function(o){return Gt(r.newUserName,o)||(r.newUserName=o),o}),$(),L(5,"input",3),zt("ngModelChange",function(o){return Gt(r.newUserMail,o)||(r.newUserMail=o),o}),$(),L(6,"input",4),zt("ngModelChange",function(o){return Gt(r.newUserPWD,o)||(r.newUserPWD=o),o}),$(),L(7,"input",5),ee("click",function(){return r.Register()}),$()()()),t&2&&($e(4),$t("ngModel",r.newUserName),$e(),$t("ngModel",r.newUserMail),$e(),$t("ngModel",r.newUserPWD))},dependencies:[Lt,Xs,Xn,Qs,Js,hi,li,ui,Zs],styles:["body[_ngcontent-%COMP%]{background-image:url(https://example.com/tu-imagen-de-fondo.jpg);background-size:cover;display:flex;justify-content:center;align-items:center;height:100vh;margin:0;font-family:Arial,sans-serif}.login-container[_ngcontent-%COMP%]{background-color:#000c;padding:20px;border-radius:10px;box-shadow:0 0 15px #00000080;max-width:400px;width:100%;text-align:center;color:#fff;margin-top:30px}.login-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;font-size:24px}.login-container[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .login-container[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{width:100%;padding:10px;margin-bottom:15px;border:none;border-radius:5px}.login-container[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]{width:100%;padding:10px;background-color:#ff5722;border:none;border-radius:5px;color:#fff;font-size:18px;cursor:pointer;transition:background-color .3s ease}.login-container[_ngcontent-%COMP%]   input[type=submit][_ngcontent-%COMP%]:hover{background-color:#e64a19}.login-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ff5722;text-decoration:none;display:block;margin-top:15px}.login-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})};var Ku=(n,e)=>{let t=ss(),r=xo(bt);return t.currentUser?!0:(r.navigate(["/login"]),!1)};var Qu=[{path:"",component:di},{path:"login",component:di},{path:"home",component:to,canActivate:[Ku]},{path:"quien-soy",component:no},{path:"registro",component:ro},{path:"juegos",loadChildren:()=>import("./chunk-3B4AHYUK.js").then(n=>n.JuegosModule),canActivate:[Ku]}];var Bp={apiKey:"AIzaSyAWhCFvDRGhvGv4j7mD0_h5pXtai8NIFX0",authDomain:"tp-labo4-fae81.firebaseapp.com",projectId:"tp-labo4-fae81",storageBucket:"tp-labo4-fae81.appspot.com",messagingSenderId:"1089427362123",appId:"1:1089427362123:web:c6f9f59e1a78d8b141d8ce"};var jp={providers:[$o(Qu),lh({eventCoalescing:!0}),$o(Qu),$h(()=>Gh(Bp)),Bd(()=>ss()),lp(()=>dp())]};fh(Zn,jp).catch(n=>console.error(n));
